webpackJsonp([1],{0:function(t,e){},HtUJ:function(t,e){},NHnr:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("7+uW"),a=o("aK3Z"),s=o.n(a),i={name:"App",data:function(){return{showModal:!1,httpError:{header:"",body:"",report:"Please report any Gekko project errors as\n          issues at https://github.com/BYU-PRISM/GEKKO"}}},mounted:function(){setTimeout(this.poll,1e3)},methods:{poll:function(){var t=this;this.$http.headers.common["Access-Control-Allow-Origin"]="*",this.$http.get("poll").then(function(e){t.showModal=!1},function(e){console.log("HTTP Polling Error, Status:",e.status,"Message:",e.statusText),0===e.status?(t.httpError.header="Internal Communication Error",t.httpError.body="We seem to have lost communication with your\n                                  Gekko script. This means that we cannot get\n                                  any updates from your Gekko model.\n                                  Did you stop the script or did\n                                  it crash? If so, close this window and restart\n                                  it."):(t.httpError.header="Internal Communication Error",t.httpError.body="Please copy these details in an error report\n                                  to the Gekko developers. Error Code:\n                                  "+e.status+", Error: "+e.statusText),t.showModal=!0}),setTimeout(this.poll,1e3)}}},r={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"app"}},[o("transition",{attrs:{name:"modal"}},[t.showModal?o("div",{staticClass:"modal-mask"},[o("div",{staticClass:"modal-wrapper"},[o("div",{staticClass:"modal-container"},[o("div",{staticClass:"modal-header"},[t._t("header",[t._v("\n              "+t._s(t.httpError.header)+"\n            ")])],2),t._v(" "),o("div",{staticClass:"modal-body"},[t._t("body",[t._v("\n              "+t._s(t.httpError.body)+"\n            ")])],2),t._v(" "),o("div",{staticClass:"modal-body"},[t._t("error-reporting",[t._v("\n              "+t._s(t.httpError.report)+"\n            ")])],2),t._v(" "),o("div",{staticClass:"modal-footer"},[t._t("footer",[o("button",{staticClass:"modal-default-button",on:{click:function(e){t.showModal=!1}}},[t._v("\n                OK\n              ")])])],2)])])]):t._e()]),t._v(" "),o("router-view")],1)},staticRenderFns:[]};var l=o("VU/8")(i,r,!1,function(t){o("jXY9")},null,null).exports,c=o("fZjL"),d=o.n(c),u=o("pH0I"),v=o.n(u),h=this;window.onresize=function(){h.plotlyResize};var p={name:"Plot",props:{externalId:{type:Number,default:1},numPlots:{type:Number,default:1},layout:{type:Object,default:function(){return{height:500}}}},data:function(){return{id:Math.random().toString(36).substring(7)}},watch:{numPlots:function(){console.log("numPlots changed, resizing plot"),h.plotlyResize}},beforeDestroy:function(){window.removeEventListener("resize",this.plotlyResize)},mounted:function(){var t=this;window.addEventListener("resize",this.plotlyResize),console.log("plot layout",this.layout),this.$http.headers.common["Access-Control-Allow-Origin"]="*",this.$http.get("get_data").then(function(t){return t.json()}).then(function(e){var o=[];console.log(e);var n=d()(e).length>5;for(var a in e)if(e.hasOwnProperty(a)&&"time"!==a){var s={x:e.time,y:e[a],mode:"lines",type:"scatter",name:a,visible:n?"legendonly":"true"};o.push(s)}v.a.newPlot(t.id,o,t.layout)})},methods:{plotlyResize:function(){console.log("handling resize for:",this.id),v.a.Plots.resize(this.id)},removePlot:function(){this.$emit("plot-removed",this.externalId)}}},m={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"plot-div"},[this.numPlots>1?e("button",{staticClass:"btn btn-sm btn-danger plot-close",attrs:{type:"button"},on:{click:this.removePlot}},[this._v("X")]):this._e(),this._v(" "),e("div",{attrs:{id:this.id}})])},staticRenderFns:[]};var f=o("VU/8")(p,m,!1,function(t){o("vN6P")},null,null).exports,_={name:"Tabs",data:function(){return{activeTab:"Model",modelData:{},varsData:{},open:!1}},created:function(){var t=this,e=["INFO","APM"],o=void 0;this.$http.get("get_options").then(function(t){return t.json()}).then(function(n){return o=n,console.log("obj:",n),t.modelData=n.APM,d()(n).filter(function(t){return!e.includes(t)})}).then(function(e){e.forEach(function(e){return console.log(o),t.varsData[e]=o[e],t.varsData[e].ishidden=!0,null})}).then(function(){console.log("varsData:",t.varsData)}),this.$http.get("get_model").then(function(t){return t.json()}).then(function(e){t.modelData=e,console.log("model:",t.modelData)})},methods:{toggle:function(t,e){t.ishidden=!t.ishidden,this.$forceUpdate()}}},b={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("img",{attrs:{src:"/static/GekkoLogo.png",height:"65px"}}),t._v(" "),o("ul",{staticClass:"nav nav-tabs"},[o("li",{staticClass:"nav-item tab"},[o("a",{staticClass:"nav-link ",class:{active:"Model"==t.activeTab},on:{click:function(e){t.activeTab="Model"}}},[t._v("Model")])]),t._v(" "),o("li",{staticClass:"nav-item tab"},[o("a",{staticClass:"nav-link",class:{active:"Variables"==t.activeTab},on:{click:function(e){t.activeTab="Variables"}}},[t._v("Variables")])])]),t._v(" "),o("div",{staticClass:"tab-div"},[o("transition",{attrs:{name:"fade"}},["Model"===t.activeTab?[o("div",{staticClass:"table-responsive tab-table"},[o("table",{staticClass:"table table-striped table-sm"},[o("thead",[o("tr",[o("th",[t._v("Property")]),t._v(" "),o("th",[t._v("Value")])])]),t._v(" "),o("tbody",t._l(t.modelData,function(e,n){return o("tr",{key:n.id},[o("td",[t._v(t._s(n))]),t._v(" "),o("td",[t._v(t._s(e))])])}))])])]:t._e()],2),t._v(" "),o("transition",{attrs:{name:"fade"}},["Variables"===t.activeTab?[t.varsData?o("div",{staticClass:"tab-table"},[o("div",{staticStyle:{"overflow-y":"auto","max-height":"inherit"}},t._l(t.varsData,function(e,n){return o("ul",{key:e.id,staticClass:"tab-table-item"},[o("a",{staticClass:"var-dropdown",on:{click:function(o){t.toggle(e,n)}}},[t._v("\n                "+t._s(n)+" "+t._s(e.ishidden?"►":"▼")+"\n              ")]),t._v(" "),o("transition",{attrs:{name:"fade"}},[e.ishidden?t._e():o("div",{staticClass:"table-responsive"},[o("table",{staticClass:"table table-striped table-sm"},[o("thead",[o("tr",[o("th",[t._v("Property")]),t._v(" "),o("th",[t._v("Value")])])]),t._v(" "),o("tbody",t._l(e,function(e,n){return o("tr",{key:n.id},["ishidden"!=n?o("td",[t._v(t._s(n))]):t._e(),t._v(" "),"ishidden"!=n?o("td",[t._v(t._s(Number.isInteger(e)&&e<=1e5&&e>-1e5?e:e.toExponential(4)))]):t._e()])}))])])])],1)}))]):t._e()]:t._e()],2)],1)])},staticRenderFns:[]};var y=o("VU/8")(_,b,!1,function(t){o("HtUJ")},null,null).exports,g=o("8+8L"),C=o("/ocq"),w={components:{plot:f},data:function(){return{layout:{height:window.innerHeight-150}}}},P={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("transition",{attrs:{name:"modal"}},[o("div",{staticClass:"modal-mask"},[o("div",{staticClass:"modal-wrapper"},[o("div",{staticClass:"modal-fullscreen-container"},[o("div",{staticClass:"modal-body"},[t._t("body",[o("plot",{attrs:{layout:t.layout}})])],2),t._v(" "),o("div",{staticClass:"modal-footer"},[t._t("footer",[o("button",{on:{click:function(e){t.$emit("close",{})}}},[t._v("Close")])])],2)])])])])},staticRenderFns:[]};var k={name:"Main",components:{plot:f,tabs:y,modalPlot:o("VU/8")(w,P,!1,function(t){o("ifQY")},null,null).exports},data:function(){return{plotArray:[1],idCounter:2,showModalPlot:!1}},methods:{addPlot:function(){this.plotArray.push(this.idCounter),++this.idCounter},removePlot:function(t){console.log("Removing plot",t),this.plotArray=this.plotArray.filter(function(e){return e!==t})}}},E={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"mainDiv"},[t.showModalPlot?o("modalPlot",{on:{close:function(e){t.showModalPlot=!1}}}):t._e(),t._v(" "),o("div",{staticClass:"row",staticStyle:{"margin-right":"0px"}},[o("div",{staticClass:"col-sm-3"},[o("tabs")],1),t._v(" "),o("div",{staticClass:"col-sm-9"},[o("div",{staticClass:"plots-div"},t._l(t.plotArray,function(e){return o("div",{key:e},[o("plot",{attrs:{"external-id":e,"num-plots":t.plotArray.length},on:{"plot-removed":t.removePlot}})],1)})),t._v(" "),o("button",{staticClass:"btn btn-primary",staticStyle:{"margin-top":"10px"},attrs:{type:"button"},on:{click:t.addPlot}},[t._v("Add Plot")]),t._v(" "),o("button",{staticClass:"btn btn-secondary",staticStyle:{"margin-top":"10px"},attrs:{type:"button"},on:{click:function(e){t.showModalPlot=!0}}},[t._v("Fullscreen plot")])])])],1)},staticRenderFns:[]};var M=o("VU/8")(k,E,!1,function(t){o("xRCt")},null,null).exports;n.a.use(C.a);var x=new C.a({routes:[{path:"/",name:"Main",component:M}]}),T=o("rCTf");n.a.use(s.a,{Observable:T.Observable}),n.a.use(g.a),n.a.config.productionTip=!1,n.a.http.options.root="http://"+location.hostname+":"+location.port,new n.a({el:"#app",router:x,components:{App:l,Plot:f,Tabs:y},template:"<App/>"})},ifQY:function(t,e){},jXY9:function(t,e){},vN6P:function(t,e){},xRCt:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.d6fb38164bcc993388ee.js.map