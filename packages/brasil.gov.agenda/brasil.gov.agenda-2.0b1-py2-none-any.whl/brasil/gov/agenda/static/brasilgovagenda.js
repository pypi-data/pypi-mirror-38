!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.brasilgovagenda=e():t.brasilgovagenda=e()}("undefined"!=typeof self?self:this,function(){return function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var i={};return e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="++resource++brasil.gov.agenda/",e(e.s=1)}([function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){var i=[],n=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done)&&(i.push(o.value),!e||i.length!==e);n=!0);}catch(t){r=!0,a=t}finally{try{!n&&s.return&&s.return()}finally{if(r)throw a}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return(Array(e).fill("0").join("")+t).slice(-1*e)},s=function(){function t(e,i){n(this,t),this.container=e,this.callback=i,this.agendaURL=e.getAttribute("data-url"),this.$month=this.$(".monthpicker .month"),this.$year=this.$(".monthpicker .year"),this.$day=this.$(".daypicker"),this.$datePicker=this.$(".monthpicker input"),this.$datePicker3=this.$(".calendar"),this.isMobile=!1,this.is3calendar=!1,null==this.$datePicker[0]&&(this.is3calendar=!0),this.$currentPicker=this.is3calendar?this.$datePicker3:this.$datePicker,this.daysWithAppointments=[],this.initMonthPicker();var a=new Date;if(this.year=a.getFullYear(),this.month=a.getMonth(),this.day=a.getDate(),$(window).resize(this.resize.bind(this)),$(".portaltype-agendadiaria").length>0){var o=location.pathname.split("/").pop(),s=o.split("-").map(function(t){return parseInt(t)}),l=r(s,3),c=l[0],u=l[1],d=l[2],h=new Date(c,u-1,d);this.year=h.getFullYear(),this.month=h.getMonth(),this.day=h.getDate()}}return a(t,[{key:"$",value:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t){return $(t,this.container)})},{key:"update",value:function(){var t=this.year+"-"+o(this.month+1)+"-"+o(this.day);$.ajax({url:this.agendaURL+"/json/"+t,context:this,global:!1}).always(function(t){"function"==typeof this.callback&&this.callback(t),this.daysWithAppointments=[],null!=t[3].daysWithAppointments&&(this.daysWithAppointments=t[3].daysWithAppointments),this.updateMonthPicker()})}},{key:"updateMonthPicker",value:function(){if(this.$currentPicker.datepicker("setDate",new Date(this.year,this.month,this.day)),!1===this.is3calendar){var t=this.$currentPicker.datepicker("option","monthNamesShort");this.$month.html(t[this.month].toUpperCase()),this.$year.html(this.year),$(".monthpicker").attr("data-month",this.month),$(".monthpicker").attr("data-year",this.year),this.fixCalendarTitle()}!0===this.is3calendar&&this.resize()}},{key:"resize",value:function(t){var e=$(window).width()<=767;if(null==t||this.isMobile!==e){this.isMobile=e;var i=1,n=3;e&&(i=0,n=1),this.$currentPicker.datepicker("option","numberOfMonths",n),this.$currentPicker.datepicker("option","showCurrentAtPos",i),setTimeout(function(){this.$currentPicker.datepicker("option","showCurrentAtPos",i)}.bind(this),1),this.fixCalendarTitle()}}},{key:"fixCalendarTitle",value:function(){$(".ui-datepicker-title").removeClass("loaded"),setTimeout(function(){var t=!0,e=!1,i=void 0;try{for(var n,r=$(".ui-datepicker-month")[Symbol.iterator]();!(t=(n=r.next()).done);t=!0){var a=n.value;a.textContent=a.textContent.slice(0,3)}}catch(t){e=!0,i=t}finally{try{!t&&r.return&&r.return()}finally{if(e)throw i}}$(".ui-datepicker-title").addClass("loaded")},1)}},{key:"initMonthPicker",value:function(){$(window).on("load",function(){var t=function(t,e){this.year=e.selectedYear,this.month=e.selectedMonth,this.day=parseInt(e.selectedDay),!0===this.is3calendar?window.location=this.agendaURL+"/"+this.year+"-"+o(this.month+1)+"-"+o(this.day):this.update()},e=function(t){var e=t.toISOString().slice(0,10);return this.daysWithAppointments.indexOf(e)>=0?[!0,"ui-has-appointments",""]:[!1,"",""]},i=function(t,e,i){this.year=i.selectedYear,this.month=i.selectedMonth,this.day=parseInt(i.selectedDay),this.update()},n={onSelect:t.bind(this),beforeShowDay:e.bind(this),onChangeMonthYear:i.bind(this)};this.is3calendar?n.numberOfMonths=3:n.beforeShow=this.fixCalendarTitle.bind(this),this.$currentPicker.datepicker(n),this.update()}.bind(this))}}]),t}();e.default=s},function(t,e,i){i(2),i(3),i(4),t.exports=i(5)},function(t,e,i){t.exports=i.p+"agenda_icon.png"},function(t,e,i){t.exports=i.p+"compromisso_icon.png"},function(t,e){},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(6),a=n(r),o=i(7),s=n(o);jQuery.prototype[Symbol.iterator]=Array.prototype[Symbol.iterator],$(function(){var t=!0,e=!1,i=void 0;try{for(var n,r=$(".agenda-tile")[Symbol.iterator]();!(t=(n=r.next()).done);t=!0){var o=n.value;new a.default(o)}}catch(t){e=!0,i=t}finally{try{!t&&r.return&&r.return()}finally{if(e)throw i}}var l=!0,c=!1,u=void 0;try{for(var d,h=$(".dados-agenda")[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var p=d.value;new s.default(p)}}catch(t){c=!0,u=t}finally{try{!l&&h.return&&h.return()}finally{if(c)throw u}}}),e.default={AgendaTile:a.default,AgendaView:s.default}},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(0),o=function(t){return t&&t.__esModule?t:{default:t}}(a),s=function(){function t(e){n(this,t),this.tile=e,this.pageSize=3,this.datepicker=new o.default(this.tile,this.onDateChange.bind(this)),this.initSwiper(),this.$(".is-now").append('<div class="now">Agora</div>'),this.$(".daypicker").on("click",".day",this.onDayClick.bind(this))}return r(t,[{key:"$",value:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t){return $(t,this.tile)})},{key:"onDateChange",value:function(t){this.updateDayPicker(t);var e=t[3];this.swiper.removeAllSlides();var i=$('<div class="swiper-slide"></div>');if(!1===e.hasAppointment)return i.addClass("no-events"),i.html("Sem compromissos oficiais."),void this.swiper.appendSlide(i);var n=!0,r=!1,a=void 0;try{for(var o,s=e.items[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var l=o.value;i.children().length===this.pageSize&&(this.swiper.appendSlide(i),i=$('<div class="swiper-slide"></div>'));var c=$('\n        <div class="collection-events-item">\n          <a class="title-item" href="'+l.href+'">'+l.title+"</a>"+(null==l.location?"":'<div class="location-item">\n            <span class="location">'+l.location+"</span>\n          </div>")+'<div class="timestamp-cell">\n            <span class="timestamp">\n              '+l.start+"\n            </span>\n          </div>\n        </div>\n      ");l.isNow&&($(".timestamp-cell",c).addClass("is-now"),$(".timestamp-cell",c).append('<div class="now">Agora</div>')),i.append(c)}}catch(t){r=!0,a=t}finally{try{!n&&s.return&&s.return()}finally{if(r)throw a}}i.children().length>0&&this.swiper.appendSlide(i)}},{key:"initSwiper",value:function(){this.swiper=new Swiper("#"+this.tile.id+" .collection-events",{navigation:{nextEl:"#"+this.tile.id+" .collection-events .swiper-button-next",prevEl:"#"+this.tile.id+" .collection-events .swiper-button-prev"},pagination:{el:"#"+this.tile.id+" .collection-events .swiper-pagination",clickable:!0}})}},{key:"updateDayPicker",value:function(t){this.datepicker.$day.html("");var e=!0,i=!1,n=void 0;try{for(var r,a=t[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var o=r.value,s=["day"];o.isSelected&&s.push("is-selected");var l=$('\n        <li data-day="'+o.datetime+'" class="'+s.join(" ")+'">\n          <div class="daypicker-day">'+o.day+'</div>\n          <div class="daypicker-weekday">'+o.weekday+"</div>\n        </li>\n      ");o.hasAppointment&&l.addClass("has-appointment"),this.datepicker.$day.append(l)}}catch(t){i=!0,n=t}finally{try{!e&&a.return&&a.return()}finally{if(i)throw n}}}},{key:"onDayClick",value:function(t){t.preventDefault();var e=t.target;"LI"!==e.tagName&&(e=e.parentElement);var i=new Date(e.getAttribute("data-day"));this.datepicker.year=i.getFullYear(),this.datepicker.month=i.getMonth(),this.datepicker.day=i.getDate(),this.datepicker.$currentPicker.datepicker("setDate",i),this.datepicker.update()}}]),t}();e.default=s},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(0),o=function(t){return t&&t.__esModule?t:{default:t}}(a),s=function(){function t(e){n(this,t),this.container=e,this.datepicker=new o.default(e),this.$appointments=this.$(".list-compromissos"),this.bindEvents()}return r(t,[{key:"$",value:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t){return $(t,this.container.parentElement)})},{key:"bindEvents",value:function(){this.$(".editar_compromisso").prepOverlay({subtype:"ajax",filter:common_content_filter,formselector:"#form",cssclass:"overlay-compromisso",noform:function(t){return $.plonepopups.noformerrorshow(t,"redirect")},redirect:location.href,closeselector:'[name="form.buttons.cancel"]',width:"50%"}),this.$(".remover_compromisso").prepOverlay({subtype:"ajax",filter:common_content_filter,formselector:"#delete_confirmation",cssclass:"overlay-compromisso",noform:function(t){return $.plonepopups.noformerrorshow(t,"redirect")},redirect:location.href,closeselector:'[name="form.button.Cancel"]',width:"50%"})}}]),t}();e.default=s}])});