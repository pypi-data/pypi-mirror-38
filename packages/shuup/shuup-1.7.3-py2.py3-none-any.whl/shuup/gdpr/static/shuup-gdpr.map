{"version":3,"sources":["gdpr.js","index.js"],"names":["jQuery","getElementsByClassName","hidden","init","saveConsent","$","serialize","ajax","attr","data","remove","removeClass","jqXHR","textStatus","errorThrown","alert","gettext","document","ready","navigator","userAgent","match","addClass","click","e","target"],"mappings":";;;CASA,WAoD0B,oBAAXA,QACEC,SAAAA,uBAAuB,yBAAyB,GAAGC,QAAS,EAC5DD,SAAAA,uBAAuB,4BAA4B,GAAGC,QAAS,GArDnEC,WA0BAC,SAAAA,IACEC,KAAAA,EAAE,iBAAiBC,YACZD,EAAEE,KAAK,CACZF,IAAAA,EAAE,iBAAiBG,KAAK,UACvB,KAAA,OACAC,KAAAA,KACG,QAAA,WACH,EAAA,0BAA0BC,SAC1B,EAAA,6BAA6BA,SAC7B,EAAA,QAAQC,YAAY,kBAEnB,MAAA,SAAUC,EAAOC,EAAYC,GACzBC,OAAAA,MAAMC,QAAQ,yEArC/BC,EAAAA,UAAUC,MAAM,WACXC,UAAUC,UAAUC,MAAM,mBACvB,EAAA,8BAA8BC,SAAS,mBAK/C,EAAA,4BAA4BC,MAAM,WAC9B,EAAA,6BAA6BD,SAAS,WACtC,EAAA,QAAQA,SAAS,mBAGrB,EAAA,wCAAwCC,MAAM,WAC1C,EAAA,6BAA6BZ,YAAY,WACzC,EAAA,QAAQA,YAAY,mBAGxB,EAAA,wBAAwBY,MAAM,SAACC,GAC3B,EAAA,kCAAkCb,YAAY,UAC9C,EAAA,wBAAwBA,YAAY,UACpCa,EAAAA,EAAEC,QAAQH,SAAS,UACfb,IAAAA,EAAOJ,EAAEmB,EAAEC,QAAQhB,OACvB,EAAA,YAAcA,EAAKgB,QAAQH,SAAS,YAoBxC,EAAA,yBAAyBC,MAAM,WAC7BnB,MAGF,EAAA,cAAcmB,MAAM,WAClBnB,MAOAD,GAxDR;;ACIA,aAHA,QAAA,eAGA,QAAA","file":"shuup-gdpr.map","sourceRoot":"../static_src","sourcesContent":["/**\n * This file is part of Shuup.\n *\n * Copyright (c) 2012-2018, Shuup Inc. All rights reserved.\n *\n * This source code is licensed under the OSL-3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n(() => {\n    function init() {\n    $(document).ready(function() {\n        if(navigator.userAgent.match(/Windows Phone/i)){\n            $(\".gdpr-consent-warn-content\").addClass(\"windows-phone\");\n        }\n\n    });\n\n    $(\"#privacy-preferences-btn\").click(() => {\n        $(\".gdpr-consent-preferences\").addClass(\"visible\");\n        $(\"body\").addClass(\"body-noscroll\");\n    });\n\n    $(\".gdpr-consent-preferences .btn-close\").click(() => {\n        $(\".gdpr-consent-preferences\").removeClass(\"visible\");\n        $(\"body\").removeClass(\"body-noscroll\");\n    });\n\n    $(\".consent-option-item\").click((e) => {\n        $(\".gdpr-consent-preference-panel\").removeClass(\"active\");\n        $(\".consent-option-item\").removeClass(\"active\");\n        $(e.target).addClass(\"active\");\n        const data = $(e.target).data();\n        $(\"#consent_\" + data.target).addClass(\"active\");\n    });\n\n    function saveConsent() {\n        data = $(\"#consent-form\").serialize();\n        var request = $.ajax({\n            url: $(\"#consent-form\").attr(\"action\"),\n            type: 'POST',\n            data: data,\n            success: function() {\n                $(\".gdpr-consent-warn-bar\").remove();\n                $(\".gdpr-consent-preferences\").remove(); // Remove GDPR divs and their content upon successful completion\n                $(\"body\").removeClass(\"body-noscroll\");\n            },\n            error: function (jqXHR, textStatus, errorThrown) {\n                window.alert(gettext(\"An error has occurred while saving the consent, please try again.\"));\n            }\n        });\n    }\n\n    $(\"#btn-save-preferences\").click(() => {\n        saveConsent();\n    });\n\n    $(\"#agree-btn\").click(() => {\n        saveConsent();\n    });\n    }\n    if (typeof jQuery === \"undefined\") {\n        document.getElementsByClassName(\"gdpr-consent-warn-bar\")[0].hidden = true;\n        document.getElementsByClassName(\"gdpr-consent-preferences\")[0].hidden = true;\n    } else {\n        init();\n    }\n\n})();\n","/**\n * This file is part of Shuup.\n *\n * Copyright (c) 2012-2018, Shuup Inc. All rights reserved.\n *\n * This source code is licensed under the OSL-3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n// styles\nimport \"./gdpr.less\";\n\n// scripts\nimport \"./gdpr.js\";\n"]}