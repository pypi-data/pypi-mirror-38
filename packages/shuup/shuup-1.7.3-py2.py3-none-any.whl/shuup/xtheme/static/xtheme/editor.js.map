{"version":3,"sources":["webpack:///webpack/bootstrap a50681bd20cd20cc1540","webpack:///./editor/index.js","webpack:///./lib/domready.js","webpack:///./lib/qs.js","webpack:///./lib/el.js","webpack:///./lib/miniq.js","webpack:////Users/panu/shuup-dev/shuup-packages/shuup/shuup/admin/static_src/base/js/browse-widget.js"],"names":["post","args","window","CSRF_TOKEN","csrfmiddlewaretoken","inputs","Object","keys","map","key","val","type","name","value","form","method","action","location","href","document","body","appendChild","submit","updateModelChoiceWidgetURL","select","selectedObject","options","selectedIndex","url","dataset","adminUrl","widgetExtraDiv","getElementById","id","linkText","interpolate","gettext","text","innerHTML","outerHTML","on","x","y","newQs","cellCount","cellLimit","alert","command","confirm","changesMade","plugin","each","element","addEventListener","Sortable","querySelector","handle","onUpdate","evt","from_y","oldIndex","to_y","newIndex","els","getElementsByClassName","i","length","group","from_x","item","to_x","onAdd","Array","prototype","indexOf","call","parentNode","children","refreshPlaceholderInParent","placeholderName","parent","postMessage","fn","loaded","setTimeout","callbacks","push","events","readyState","listener","forEach","ev","removeEventListener","shift","stringify","parse","mutateObj","mutate","mutateURL","obj","bits","hasOwnProperty","encodeURIComponent","sort","join","queryString","kw","undefined","search","replace","split","bit","mutations","base","el","processAttrs","attrs","eventHash","eventName","processChildren","isArray","child","createTextNode","selector","tag","classes","createElement","cls","classList","add","init","functions","maybeSplit","strOrArray","event","off","elements","context","rv","slice","querySelectorAll","bind","BrowseAPI","browseData","data","pick","info","popup","close","object","_","isFunction","onSelect","openBrowseWindow","filter","disabledMenus","kind","browserUrl","ShuupAdminConfig","browserUrls","Error","JSON","Date","qs","compact","open","extend","$container","$","closest","find","$text","prop","e","emptyText","test","preventDefault"],"mappings":"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","file":"editor.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap a50681bd20cd20cc1540","/**\n * This file is part of Shuup.\n *\n * Copyright (c) 2012-2018, Shuup Inc. All rights reserved.\n *\n * This source code is licensed under the OSL-3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport domready from \"../lib/domready\";\nimport { mutate } from \"../lib/qs\";\nimport el from \"../lib/el\";\nimport $ from \"../lib/miniq\";\n\n\nfunction post(args) {\n    if (window.CSRF_TOKEN) {\n        args.csrfmiddlewaretoken = window.CSRF_TOKEN;\n    }\n    const inputs = Object.keys(args).\n        map((key) => {\n            const val = args[key];\n            return typeof val !== \"undefined\"? el(\"input\", {type: \"hidden\", name: key, value: val}) : null;\n        }\n    );\n    const form = el(\"form\", {method: \"POST\", action: location.href}, inputs);\n    document.body.appendChild(form);\n    form.submit();\n}\n\nfunction updateModelChoiceWidgetURL(select) {\n    const selectedObject = select.options[select.selectedIndex];\n    const url = selectedObject.dataset.adminUrl;\n    const widgetExtraDiv = document.getElementById(\"extra_for_\" + select.id);\n    const linkText = interpolate(gettext(\"Edit %s\"), [selectedObject.text]);\n    widgetExtraDiv.innerHTML = url ? el(\"a\", {\"target\": \"_blank\", \"href\": url}, [linkText]).outerHTML : \"\";\n}\n\ndomready(() => {\n    $(\".layout-cell\").on(\"click\", function() {\n        const {x, y} = this.dataset;\n        const newQs = mutate({x, y});\n        location.href = \"?\" + newQs;\n    });\n    $(\".layout-add-cell-btn\").on(\"click\", function() {\n        const {y, cellCount, cellLimit} = this.dataset;\n        if (cellCount >= cellLimit) {\n            alert(interpolate(gettext(\"Error: Cannot add more than %s cells to one row.\"), [cellLimit]));\n            return;\n        }\n        post({y: y, command: \"add_cell\"});\n    });\n    $(\".layout-add-row-btn\").on(\"click\", function() {\n        const {y} = this.dataset;\n        post({y, command: \"add_row\"});\n    });\n    $(\".layout-del-row-btn\").on(\"click\", function() {\n        if (!confirm(gettext(\"Are you sure you wish to delete this row?\"))) {\n            return;\n        }\n        const {y} = this.dataset;\n        post({y, command: \"del_row\"});\n    });\n    $(\".del-cell-btn\").on(\"click\", function() {\n        if (!confirm(gettext(\"Are you sure you wish to delete this cell?\"))) {\n            return;\n        }\n        const {x, y} = this.dataset;\n        post({x, y, command: \"del_cell\"});\n    });\n    $(\".publish-btn\").on(\"click\", function() {\n        if (!confirm(gettext(\"Are you sure you wish to publish changes made to this view?\"))) {\n            return;\n        }\n        post({command: \"publish\"});\n    });\n    $(\".revert-btn\").on(\"click\", function() {\n        if (!confirm(gettext(\"Are you sure you wish to revert all changes made since the last published version?\"))) {\n            return;\n        }\n        post({command: \"revert\"});\n    });\n    var changesMade = false;\n    $(\"input, select, textarea\").on(\"change,input\", function() {\n        if (this.id === \"id_general-plugin\") {\n            return;\n        }\n        changesMade = true;\n    });\n    $(\"#id_general-plugin\").on(\"change\", function() {\n        if (changesMade) {\n            if (!confirm(gettext(\"Changing plugins will cause other changes made on this form to be lost.\"))) {\n                return;\n            }\n        }\n        post({command: \"change_plugin\", plugin: this.value});\n    });\n    $(\".xtheme-model-choice-widget\").each(function(element) {\n        updateModelChoiceWidgetURL(element);\n        element.addEventListener(\"change\", function() {\n            updateModelChoiceWidgetURL(document.getElementById(this.id));\n        });\n    });\n\n\n    new Sortable(document.querySelector(\".layout-rows\"), {\n        handle: \".layout-move-row-btn\",\n        onUpdate: function(evt) {\n            post({command: \"move_row_to_index\", from_y: evt.oldIndex, to_y: evt.newIndex});\n        }\n    });\n\n    var els = document.getElementsByClassName(\"layout-row-cells\");\n    for(var i = 0; i < els.length; i++) {\n        new Sortable(els[i], {\n            group: 'cells',\n            onUpdate: function(evt) {\n                // cell re-arranged within the same row\n                post({\n                    command: \"move_cell_to_position\",\n                    from_x: evt.item.dataset.x,\n                    from_y: evt.item.dataset.y,\n                    to_x: evt.newIndex,\n                    to_y: evt.item.dataset.y\n                });\n            },\n            onAdd: function(evt) {\n                // cell moved to different row\n                post({\n                    command: \"move_cell_to_position\",\n                    from_x: evt.item.dataset.x,\n                    from_y: evt.item.dataset.y,\n                    to_x: Array.prototype.indexOf.call(evt.item.parentNode.children, evt.item),\n                    to_y: evt.item.parentNode.parentNode.dataset.y\n                });\n            }\n        });\n    }\n});\n\nwindow.refreshPlaceholderInParent = (placeholderName) => {\n    window.parent.postMessage({\"reloadPlaceholder\": placeholderName}, \"*\");\n};\n\n\n\n// WEBPACK FOOTER //\n// ./editor/index.js","/**\n * This file is part of Shuup.\n *\n * Copyright (c) 2012-2018, Shuup Inc. All rights reserved.\n *\n * This source code is licensed under the OSL-3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nconst callbacks = [];\nconst events = [\"DOMContentLoaded\", \"load\"];\nvar loaded = (document.readyState === \"complete\");\n\nfunction listener() {\n    events.forEach((ev) => { document.removeEventListener(ev, listener); });\n    if (!loaded) {\n        loaded = true;\n        var fn;\n        while ((fn = callbacks.shift())) {\n            fn();\n        }\n    }\n}\n\nif (!loaded) {\n    events.forEach((ev) => { document.addEventListener(ev, listener); });\n}\n\nexport default function(fn) {\n    if (loaded) {\n        setTimeout(fn, 0);\n    } else {\n        callbacks.push(fn);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/domready.js","/**\n * This file is part of Shuup.\n *\n * Copyright (c) 2012-2018, Shuup Inc. All rights reserved.\n *\n * This source code is licensed under the OSL-3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nexport function stringify(obj) {\n    const bits = [];\n    for (var key in obj) {\n        if (obj.hasOwnProperty(key) && obj[key]) {\n            bits.push(encodeURIComponent(key) + \"=\" + encodeURIComponent(obj[key]));\n        }\n    }\n    return bits.sort().join(\"&\");\n}\n\nexport function parse(queryString) {\n    const kw = {};\n    if (queryString === null || queryString === undefined) {\n        queryString = location.search.replace(/^\\?/, \"\");\n    }\n    queryString.split(\"&\").forEach((bit) => {\n        const [key, val] = bit.split(\"=\", 2);\n        kw[key] = (val !== undefined ? val : true);\n    });\n    return kw;\n}\n\nexport function mutateObj(obj, mutations) {\n    for (var key in mutations) {\n        if (!mutations.hasOwnProperty(key)) {\n            continue;\n        }\n        const val = mutations[key];\n        if (val === null || val === undefined) {\n            delete obj[key];\n        } else {\n            obj[key] = val;\n        }\n    }\n    return obj;\n}\n\nexport function mutate(mutations, queryString) {\n    const kw = parse(queryString);\n    mutateObj(kw, mutations);\n    return stringify(kw);\n}\n\nexport function mutateURL(url, mutations) {\n    var [base, search] = url.split(\"?\", 2);\n    search = mutate(mutations, search || \"\");\n    return base + (search.length ? \"?\" + search : \"\");\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/qs.js","/**\n * This file is part of Shuup.\n *\n * Copyright (c) 2012-2018, Shuup Inc. All rights reserved.\n *\n * This source code is licensed under the OSL-3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nfunction processAttrs(element, attrs) {\n    for (var key in attrs) {\n        if (!attrs.hasOwnProperty(key)) {\n            continue;\n        }\n        if (key === \"$events\") {\n            const eventHash = attrs[key];\n            for (var eventName in eventHash) {\n                if (!eventHash.hasOwnProperty(eventName)) {\n                    continue;\n                }\n                element.addEventListener(eventName, eventHash[eventName], false);\n            }\n            continue;\n        }\n        element[key] = attrs[key];\n    }\n}\n\nfunction processChildren(element, children) {\n    if (children && !Array.isArray(children)) {\n        children = [children];\n    }\n    (children || []).forEach((child) => {\n        if (!child) {\n            return;\n        }\n        if (typeof child === \"string\") {\n            child = document.createTextNode(child);\n        }\n        element.appendChild(child);\n    });\n}\n\n/**\n * Generate a HTML element.\n * For instance, el(\"div.foo\", {id: \"y\"}, [\"Hello\", \"Hello\"]) would generate\n * a div with the outerHTML `<div id=\"y\" class=\"foo\">HelloHello</div>`.\n *\n * @param selector Tag + CSS classes, separated with full-stops.\n * @param attrs Optional hash of attributes to assign on the new element.\n * @param children Optional array of children for the node.\n * @returns {HTMLElement}\n */\nexport default function el(selector, attrs, children) {\n    const [tag, ...classes] = selector.split(\".\");\n    const element = document.createElement(tag);\n    classes.forEach((cls) => {\n        element.classList.add(cls);\n    });\n    if (Array.isArray(attrs)) {\n        children = attrs;\n        attrs = {};\n    }\n    processAttrs(element, attrs);\n    processChildren(element, children);\n    return element;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/el.js","/**\n * This file is part of Shuup.\n *\n * Copyright (c) 2012-2018, Shuup Inc. All rights reserved.\n *\n * This source code is licensed under the OSL-3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nconst functions = {};\n\n/**\n * @return Array\n */\nfunction maybeSplit(strOrArray) {\n    if (Array.isArray(strOrArray)) {\n        return strOrArray;\n    }\n    return (\"\" + strOrArray).split(/,\\s*/);\n}\n\nfunctions.on = function on(events, fn) {\n    events = maybeSplit(events);\n    this.each((el) => {\n        events.forEach((event) => el.addEventListener(event, fn));\n    });\n    return this;\n};\n\nfunctions.off = function off(events, fn) {\n    events = maybeSplit(events);\n    this.each((el) => {\n        events.forEach((event) => el.removeEventListener(event, fn));\n    });\n    return this;\n};\n\nfunctions.each = function(fn) {\n    this.elements.forEach(fn);\n    return this;\n};\n\nexport default function init(selector, context=document) {\n    const rv = {\n        context: context,\n\n        // querySelectorAll returns a non-live collection anyway, so it's not a bad idea\n        // to array-fy it right here.\n        elements: [].slice.call(context.querySelectorAll(selector))\n    };\n    for (var key in functions) {\n        if (functions.hasOwnProperty(key)) {\n            rv[key] = functions[key].bind(rv);\n        }\n    }\n    return rv;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/miniq.js","/**\n * This file is part of Shuup.\n *\n * Copyright (c) 2012-2018, Shuup Inc. All rights reserved.\n *\n * This source code is licensed under the OSL-3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n/**\n * Support for media browsing widgets.\n * Currently opens a real, actual, true-to-1998\n * popup window (just like the Django admin, mind)\n * but could just as well use an <iframe> modal.\n */\n\nwindow.BrowseAPI = (function() {\n    const browseData = {};\n\n    window.addEventListener(\"message\", function (event) {\n        const data = event.data;\n        if (!data.pick) {\n            return;\n        }\n        const info = browseData[data.pick.id];\n        if (!info) {\n            return;\n        }\n        info.popup.close();\n        const obj = data.pick.object;\n        if (!obj) {\n            return;\n        }\n        if (_.isFunction(info.onSelect)) {\n            info.onSelect.call(this, obj);\n        }\n        delete browseData[data.pick.id];\n    }, false);\n\n    /**\n     * Open a browsing window with the given options.\n     *\n     * Currently supported options are:\n     * * `kind`: kind string (e.g. \"product\")\n     * * `filter`: filter string (kind-dependent)\n     * * `onSelect`: a function invoked when an object is selected\n     * @return {Object}\n     */\n    function openBrowseWindow(options) {\n        var filter = options.filter;\n        const disabledMenus = options.disabledMenus;\n        const kind = options.kind;\n        const browserUrl = window.ShuupAdminConfig.browserUrls[kind];\n        if (!browserUrl) {\n            throw new Error(gettext(\"No browser URL for kind:\") + \" \" + kind);\n        }\n        if(typeof filter !== \"string\") {\n            filter = JSON.stringify(filter);\n        }\n        const id = \"m-\" + (+new Date);\n        const qs = _.compact([\n            \"popup=1\",\n            \"kind=\" + kind,\n            \"pick=\" + id,\n            (filter ? \"filter=\" + filter : null),\n            (disabledMenus ? \"disabledMenus=\" + disabledMenus.join(\",\") : null)\n        ]).join(\"&\");\n        const popup = window.open(\n            browserUrl + (browserUrl.indexOf(\"?\") > -1 ? \"&\" : \"?\") + qs,\n            \"browser_popup_\" + id,\n            \"resizable,menubar=no,location=no,scrollbars=yes\"\n        );\n        return browseData[id] = _.extend(\n            {popup, $container: null, onSelect: null},\n            options\n        );\n    }\n\n    return {\n        openBrowseWindow\n    };\n}());\n\n$(function() {\n    $(document).on(\"click\", \".browse-widget .browse-btn\", function() {\n        const $container = $(this).closest(\".browse-widget\");\n        if (!$container.length) {\n            return;\n        }\n        const kind = $container.data(\"browse-kind\");\n        const filter = $container.data(\"filter\");\n        try {\n            return window.BrowseAPI.openBrowseWindow({kind, filter, onSelect: (obj) => {\n                $container.find(\"input\").val(obj.id);\n                const $text = $container.find(\".browse-text\");\n                $text.text(obj.text);\n                $text.prop(\"href\", obj.url || \"#\");\n            }});\n        } catch(e) {\n            alert(e);\n            return false;\n        }\n    });\n\n    $(document).on(\"click\", \".browse-widget .clear-btn\", function() {\n        const $container = $(this).closest(\".browse-widget\");\n        if (!$container.length) {\n            return;\n        }\n        const emptyText = $container.data(\"empty-text\") || \"\";\n        $container.find(\"input\").val(\"\");\n        const $text = $container.find(\".browse-text\");\n        $text.text(emptyText);\n        $text.prop(\"href\", \"#\");\n    });\n\n    $(document).on(\"click\", \".browse-widget .browse-text\", function(event) {\n        const href = $(this).prop(\"href\");\n        if (/#$/.test(href)) {  // Looks empty, so prevent clicks\n            event.preventDefault();\n            return false;\n        }\n    });\n});\n\n\n\n// WEBPACK FOOTER //\n// /Users/panu/shuup-dev/shuup-packages/shuup/shuup/admin/static_src/base/js/browse-widget.js"],"sourceRoot":""}