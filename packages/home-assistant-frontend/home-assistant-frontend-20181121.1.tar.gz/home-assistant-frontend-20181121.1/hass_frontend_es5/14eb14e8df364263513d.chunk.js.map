{"version":3,"file":"14eb14e8df364263513d.chunk.js","sources":["webpack:///14eb14e8df364263513d.chunk.js"],"sourcesContent":["(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{726:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__);var lit_element=__webpack_require__(90),classMap=__webpack_require__(205),js_yaml=__webpack_require__(421),js_yaml_default=__webpack_require__.n(js_yaml),paper_spinner=__webpack_require__(136),paper_dialog=__webpack_require__(177),paper_button=__webpack_require__(57),paper_textarea=__webpack_require__(181),paper_dialog_scrollable=__webpack_require__(183),getCardConfig=function(hass,cardId){return hass.callWS({type:\"lovelace/config/card/get\",card_id:cardId})},updateCardConfig=function(hass,cardId,config,configFormat){return hass.callWS({type:\"lovelace/config/card/update\",card_id:cardId,card_config:config,format:configFormat})},migrateConfig=function(hass){return hass.callWS({type:\"lovelace/config/migrate\"})},fire_event=__webpack_require__(81),lit_localize_mixin=__webpack_require__(173);function _typeof(obj){if(\"function\"===typeof Symbol&&\"symbol\"===typeof Symbol.iterator){_typeof=function(obj){return typeof obj}}else{_typeof=function(obj){return obj&&\"function\"===typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?\"symbol\":typeof obj}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,\"next\",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,\"throw\",err)}_next(void 0)})}}function _templateObject2(){var data=_taggedTemplateLiteral([\"\\n      <style>\\n        paper-textarea {\\n          --paper-input-container-shared-input-style_-_font-family: monospace;\\n        }\\n        .center {\\n          margin-left: auto;\\n          margin-right: auto;\\n        }\\n        paper-spinner {\\n          display: none;\\n        }\\n        paper-spinner[active] {\\n          display: block;\\n        }\\n      </style>\\n    \"]);_templateObject2=function(){return data};return data}function _templateObject(){var data=_taggedTemplateLiteral([\"\\n      \",\"\\n      <paper-spinner\\n        ?active=\\\"\",\"\\\"\\n        alt=\\\"Loading\\\"\\n        class=\\\"center\\\"\\n      ></paper-spinner>\\n      <paper-textarea\\n        max-rows=\\\"10\\\"\\n        .value=\\\"\",\"\\\"\\n        @value-changed=\\\"\",\"\\\"\\n      ></paper-textarea>\\n    \"]);_templateObject=function(){return data};return data}function _taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0)}return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\")}}function _defineProperties(target,props){for(var i=0,descriptor;i<props.length;i++){descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1;descriptor.configurable=!0;if(\"value\"in descriptor)descriptor.writable=!0;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(\"object\"===_typeof(call)||\"function\"===typeof call)){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(void 0===self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(\"function\"!==typeof superClass&&null!==superClass){throw new TypeError(\"Super expression must either be null or a function\")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var hui_yaml_editor_HuiYAMLEditor=function(_LitElement){_inherits(HuiYAMLEditor,_LitElement);function HuiYAMLEditor(){_classCallCheck(this,HuiYAMLEditor);return _possibleConstructorReturn(this,_getPrototypeOf(HuiYAMLEditor).apply(this,arguments))}_createClass(HuiYAMLEditor,[{key:\"render\",value:function(){return Object(lit_element.c)(_templateObject(),this.renderStyle(),this._loading,this._yaml,this._valueChanged)}},{key:\"renderStyle\",value:function(){return Object(lit_element.c)(_templateObject2())}},{key:\"_loadConfig\",value:function(){var _loadConfig2=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){return regeneratorRuntime.wrap(function(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(!this.hass||!this.cardId)){_context.next=2;break}return _context.abrupt(\"return\");case 2:_context.next=4;return getCardConfig(this.hass,this.cardId);case 4:this._yaml=_context.sent;if(this._loading){this._loading=!1}case 6:case\"end\":return _context.stop();}}},_callee,this)}));return function(){return _loadConfig2.apply(this,arguments)}}()},{key:\"_valueChanged\",value:function(ev){var target=ev.target;this._yaml=target.value;Object(fire_event.a)(this,\"yaml-changed\",{yaml:target.value})}},{key:\"yaml\",set:function(yaml){if(yaml===void 0){this._loading=!0;this._loadConfig()}else{this._yaml=yaml;if(this._loading){this._loading=!1}}}}],[{key:\"properties\",get:function(){return{_yaml:{},cardId:{}}}}]);return HuiYAMLEditor}(lit_element.a);customElements.define(\"hui-yaml-editor\",hui_yaml_editor_HuiYAMLEditor);var create_card_element=__webpack_require__(299),create_error_card_config=__webpack_require__(221);function hui_card_preview_typeof(obj){if(\"function\"===typeof Symbol&&\"symbol\"===typeof Symbol.iterator){hui_card_preview_typeof=function(obj){return typeof obj}}else{hui_card_preview_typeof=function(obj){return obj&&\"function\"===typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?\"symbol\":typeof obj}}return hui_card_preview_typeof(obj)}function hui_card_preview_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\")}}function hui_card_preview_defineProperties(target,props){for(var i=0,descriptor;i<props.length;i++){descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1;descriptor.configurable=!0;if(\"value\"in descriptor)descriptor.writable=!0;Object.defineProperty(target,descriptor.key,descriptor)}}function hui_card_preview_createClass(Constructor,protoProps,staticProps){if(protoProps)hui_card_preview_defineProperties(Constructor.prototype,protoProps);if(staticProps)hui_card_preview_defineProperties(Constructor,staticProps);return Constructor}function hui_card_preview_possibleConstructorReturn(self,call){if(call&&(\"object\"===hui_card_preview_typeof(call)||\"function\"===typeof call)){return call}return hui_card_preview_assertThisInitialized(self)}function hui_card_preview_assertThisInitialized(self){if(void 0===self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}return self}function hui_card_preview_inherits(subClass,superClass){if(\"function\"!==typeof superClass&&null!==superClass){throw new TypeError(\"Super expression must either be null or a function\")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}});if(superClass)hui_card_preview_setPrototypeOf(subClass,superClass)}function _wrapNativeSuper(Class){var _cache=\"function\"===typeof Map?new Map:void 0;_wrapNativeSuper=function(Class){if(null===Class||!_isNativeFunction(Class))return Class;if(\"function\"!==typeof Class){throw new TypeError(\"Super expression must either be null or a function\")}if(\"undefined\"!==typeof _cache){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}function Wrapper(){return _construct(Class,arguments,hui_card_preview_getPrototypeOf(this).constructor)}Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}});return hui_card_preview_setPrototypeOf(Wrapper,Class)};return _wrapNativeSuper(Class)}function isNativeReflectConstruct(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return!0}catch(e){return!1}}function _construct(){if(isNativeReflectConstruct()){_construct=Reflect.construct}else{_construct=function(Parent,args,Class){var a=[null];a.push.apply(a,args);var Constructor=Function.bind.apply(Parent,a),instance=new Constructor;if(Class)hui_card_preview_setPrototypeOf(instance,Class.prototype);return instance}}return _construct.apply(null,arguments)}function _isNativeFunction(fn){return-1!==Function.toString.call(fn).indexOf(\"[native code]\")}function hui_card_preview_setPrototypeOf(o,p){hui_card_preview_setPrototypeOf=Object.setPrototypeOf||function(o,p){o.__proto__=p;return o};return hui_card_preview_setPrototypeOf(o,p)}function hui_card_preview_getPrototypeOf(o){hui_card_preview_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)};return hui_card_preview_getPrototypeOf(o)}var CUSTOM_TYPE_PREFIX=\"custom:\",hui_card_preview_HuiCardPreview=function(_HTMLElement){hui_card_preview_inherits(HuiCardPreview,_HTMLElement);function HuiCardPreview(){hui_card_preview_classCallCheck(this,HuiCardPreview);return hui_card_preview_possibleConstructorReturn(this,hui_card_preview_getPrototypeOf(HuiCardPreview).apply(this,arguments))}hui_card_preview_createClass(HuiCardPreview,[{key:\"_createCard\",value:function(configValue){if(this._element){this.removeChild(this._element)}this._element=Object(create_card_element.a)(configValue);if(this._hass){this._element.hass=this._hass}this.appendChild(this._element)}},{key:\"hass\",set:function(value){this._hass=value;if(this._element){this._element.hass=value}}},{key:\"error\",set:function(error){var configValue=Object(create_error_card_config.a)(\"\".concat(error.type,\": \").concat(error.message),void 0);this._createCard(configValue)}},{key:\"config\",set:function(configValue){if(!configValue){return}if(!this._element){this._createCard(configValue);return}var tag=configValue.type.startsWith(CUSTOM_TYPE_PREFIX)?configValue.type.substr(CUSTOM_TYPE_PREFIX.length):\"hui-\".concat(configValue.type,\"-card\");if(tag.toUpperCase()===this._element.tagName){this._element.setConfig(configValue)}else{this._createCard(configValue)}}}]);return HuiCardPreview}(_wrapNativeSuper(HTMLElement));customElements.define(\"hui-card-preview\",hui_card_preview_HuiCardPreview);var secretYamlType=new js_yaml_default.a.Type(\"!secret\",{kind:\"scalar\",construct:function(data){data=data||\"\";return\"!secret \"+data}}),includeYamlType=new js_yaml_default.a.Type(\"!include\",{kind:\"scalar\",construct:function(data){data=data||\"\";return\"!include \"+data}}),extYamlSchema=js_yaml_default.a.Schema.create([secretYamlType,includeYamlType]);function hui_edit_card_typeof(obj){if(\"function\"===typeof Symbol&&\"symbol\"===typeof Symbol.iterator){hui_edit_card_typeof=function(obj){return typeof obj}}else{hui_edit_card_typeof=function(obj){return obj&&\"function\"===typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?\"symbol\":typeof obj}}return hui_edit_card_typeof(obj)}function _templateObject6(){var data=hui_edit_card_taggedTemplateLiteral([\"\\n      <style>\\n        paper-dialog {\\n          width: 650px;\\n        }\\n        .center {\\n          margin-left: auto;\\n          margin-right: auto;\\n        }\\n        .margin-bot {\\n          margin-bottom: 24px;\\n        }\\n        paper-button paper-spinner {\\n          width: 14px;\\n          height: 14px;\\n          margin-right: 20px;\\n        }\\n        paper-spinner {\\n          display: none;\\n        }\\n        paper-spinner[active] {\\n          display: block;\\n        }\\n        .hidden {\\n          display: none;\\n        }\\n        .element-editor {\\n          margin-bottom: 16px;\\n        }\\n      </style>\\n    \"]);_templateObject6=function(){return data};return data}function _templateObject5(){var data=hui_edit_card_taggedTemplateLiteral([\"\"]);_templateObject5=function(){return data};return data}function _templateObject4(){var data=hui_edit_card_taggedTemplateLiteral([\"\\n                <div class=\\\"paper-dialog-buttons\\\">\\n                  <paper-button\\n                    ?disabled=\\\"\",\"\\\"\\n                    @click=\\\"\",\"\\\"\\n                    >\",\"</paper-button\\n                  >\\n                  <paper-button @click=\\\"\",\"\\\"\\n                    >\",\"</paper-button\\n                  >\\n                  <paper-button\\n                    ?disabled=\\\"\",\"\\\"\\n                    @click=\\\"\",\"\\\"\\n                  >\\n                    <paper-spinner\\n                      ?active=\\\"\",\"\\\"\\n                      alt=\\\"Saving\\\"\\n                    ></paper-spinner>\\n                    \",\"</paper-button\\n                  >\\n                </div>\\n              \"]);_templateObject4=function(){return data};return data}function _templateObject3(){var data=hui_edit_card_taggedTemplateLiteral([\"\\n                  <hui-yaml-editor\\n                    .hass=\\\"\",\"\\\"\\n                    .cardId=\\\"\",\"\\\"\\n                    .yaml=\\\"\",\"\\\"\\n                    @yaml-changed=\\\"\",\"\\\"\\n                  ></hui-yaml-editor>\\n                \"]);_templateObject3=function(){return data};return data}function hui_edit_card_templateObject2(){var data=hui_edit_card_taggedTemplateLiteral([\"\\n                  <div class=\\\"element-editor\\\">\",\"</div>\\n                \"]);hui_edit_card_templateObject2=function(){return data};return data}function hui_edit_card_templateObject(){var data=hui_edit_card_taggedTemplateLiteral([\"\\n      \",\"\\n      <paper-dialog with-backdrop>\\n        <h2>\",\"</h2>\\n        <paper-spinner\\n          ?active=\\\"\",\"\\\"\\n          alt=\\\"Loading\\\"\\n          class=\\\"center margin-bot\\\"\\n        ></paper-spinner>\\n        <paper-dialog-scrollable\\n          class=\\\"\",\"\\\"\\n        >\\n          \",\"\\n          <hui-card-preview .hass=\\\"\",\"\\\"></hui-card-preview>\\n        </paper-dialog-scrollable>\\n        \",\"\\n      </paper-dialog>\\n    \"]);hui_edit_card_templateObject=function(){return data};return data}function hui_edit_card_taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0)}return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}function hui_edit_card_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function hui_edit_card_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){hui_edit_card_asyncGeneratorStep(gen,resolve,reject,_next,_throw,\"next\",value)}function _throw(err){hui_edit_card_asyncGeneratorStep(gen,resolve,reject,_next,_throw,\"throw\",err)}_next(void 0)})}}function hui_edit_card_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\")}}function hui_edit_card_possibleConstructorReturn(self,call){if(call&&(\"object\"===hui_edit_card_typeof(call)||\"function\"===typeof call)){return call}return hui_edit_card_assertThisInitialized(self)}function hui_edit_card_assertThisInitialized(self){if(void 0===self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}return self}function hui_edit_card_getPrototypeOf(o){hui_edit_card_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)};return hui_edit_card_getPrototypeOf(o)}function hui_edit_card_defineProperties(target,props){for(var i=0,descriptor;i<props.length;i++){descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1;descriptor.configurable=!0;if(\"value\"in descriptor)descriptor.writable=!0;Object.defineProperty(target,descriptor.key,descriptor)}}function hui_edit_card_createClass(Constructor,protoProps,staticProps){if(protoProps)hui_edit_card_defineProperties(Constructor.prototype,protoProps);if(staticProps)hui_edit_card_defineProperties(Constructor,staticProps);return Constructor}function hui_edit_card_inherits(subClass,superClass){if(\"function\"!==typeof superClass&&null!==superClass){throw new TypeError(\"Super expression must either be null or a function\")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}});if(superClass)hui_edit_card_setPrototypeOf(subClass,superClass)}function hui_edit_card_setPrototypeOf(o,p){hui_edit_card_setPrototypeOf=Object.setPrototypeOf||function(o,p){o.__proto__=p;return o};return hui_edit_card_setPrototypeOf(o,p)}var hui_edit_card_CUSTOM_TYPE_PREFIX=\"custom:\",hui_edit_card_HuiEditCard=function(_hassLocalizeLitMixin){hui_edit_card_inherits(HuiEditCard,_hassLocalizeLitMixin);hui_edit_card_createClass(HuiEditCard,null,[{key:\"properties\",get:function(){return{_hass:{},_cardId:{},_originalConfig:{},_configElement:{},_configValue:{},_configState:{},_uiEditor:{},_saving:{},_loading:{},_isToggleAvailable:{}}}}]);function HuiEditCard(){var _this;hui_edit_card_classCallCheck(this,HuiEditCard);_this=hui_edit_card_possibleConstructorReturn(this,hui_edit_card_getPrototypeOf(HuiEditCard).call(this));_this._saving=!1;return _this}hui_edit_card_createClass(HuiEditCard,[{key:\"showDialog\",value:function(){var _showDialog=hui_edit_card_asyncToGenerator(regeneratorRuntime.mark(function _callee(){return regeneratorRuntime.wrap(function(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(null==this._dialog)){_context.next=3;break}_context.next=3;return this.updateComplete;case 3:this._dialog.open();case 4:case\"end\":return _context.stop();}}},_callee,this)}));return function(){return _showDialog.apply(this,arguments)}}()},{key:\"render\",value:function(){return Object(lit_element.c)(hui_edit_card_templateObject(),this.renderStyle(),this.localize(\"ui.panel.lovelace.editor.edit.header\"),this._loading,Object(classMap.a)({hidden:this._loading}),this._uiEditor&&null!==this._configElement?Object(lit_element.c)(hui_edit_card_templateObject2(),this._configElement):Object(lit_element.c)(_templateObject3(),this.hass,this._cardId,this._configValue.value,this._handleYamlChanged),this.hass,!this._loading?Object(lit_element.c)(_templateObject4(),!this._isToggleAvailable,this._toggleEditor,this.localize(\"ui.panel.lovelace.editor.edit.toggle_editor\"),this._closeDialog,this.localize(\"ui.common.cancel\"),this._saving,this._save,this._saving,this.localize(\"ui.panel.lovelace.editor.edit.save\")):Object(lit_element.c)(_templateObject5()))}},{key:\"renderStyle\",value:function(){return Object(lit_element.c)(_templateObject6())}},{key:\"_toggleEditor\",value:function(){if(!this._isToggleAvailable){alert(\"You can't switch editor.\");return}if(this._uiEditor&&\"json\"===this._configValue.format){if(this._isConfigChanged()){this._configValue={format:\"yaml\",value:js_yaml_default.a.safeDump(this._configValue.value)}}else{this._configValue={format:\"yaml\",value:void 0}}this._uiEditor=!this._uiEditor}else if(this._configElement&&\"yaml\"===this._configValue.format){this._configValue={format:\"json\",value:js_yaml_default.a.safeLoad(this._configValue.value,{schema:extYamlSchema})};this._configElement.setConfig(this._configValue.value);this._uiEditor=!this._uiEditor}this._resizeDialog()}},{key:\"_save\",value:function(){this._saving=!0;this._updateConfigInBackend()}},{key:\"_saveDone\",value:function(){this._saving=!1}},{key:\"_loadedDialog\",value:function(){var _loadedDialog2=hui_edit_card_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){return regeneratorRuntime.wrap(function(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return this.updateComplete;case 2:this._loading=!1;this._resizeDialog();case 4:case\"end\":return _context2.stop();}}},_callee2,this)}));return function(){return _loadedDialog2.apply(this,arguments)}}()},{key:\"_resizeDialog\",value:function(){var _resizeDialog2=hui_edit_card_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){return regeneratorRuntime.wrap(function(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return this.updateComplete;case 2:Object(fire_event.a)(this._dialog,\"iron-resize\");case 3:case\"end\":return _context3.stop();}}},_callee3,this)}));return function(){return _resizeDialog2.apply(this,arguments)}}()},{key:\"_closeDialog\",value:function(){this._dialog.close()}},{key:\"_updateConfigInBackend\",value:function(){var _updateConfigInBackend2=hui_edit_card_asyncToGenerator(regeneratorRuntime.mark(function _callee4(){return regeneratorRuntime.wrap(function(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(this._isConfigValid()){_context4.next=4;break}alert(\"Your config is not valid, please fix your config before saving.\");this._saveDone();return _context4.abrupt(\"return\");case 4:if(this._isConfigChanged()){_context4.next=8;break}this._closeDialog();this._saveDone();return _context4.abrupt(\"return\");case 8:_context4.prev=8;_context4.next=11;return updateCardConfig(this.hass,this._cardId,this._configValue.value,this._configValue.format);case 11:this._closeDialog();this._saveDone();Object(fire_event.a)(this,\"reload-lovelace\");_context4.next=20;break;case 16:_context4.prev=16;_context4.t0=_context4[\"catch\"](8);alert(\"Saving failed: \".concat(_context4.t0.message));this._saveDone();case 20:case\"end\":return _context4.stop();}}},_callee4,this,[[8,16]])}));return function(){return _updateConfigInBackend2.apply(this,arguments)}}()},{key:\"_handleYamlChanged\",value:function(ev){this._configValue={format:\"yaml\",value:ev.detail.yaml};try{var config=js_yaml_default.a.safeLoad(this._configValue.value,{schema:extYamlSchema});this._updatePreview(config);this._configState=\"OK\";if(!this._isToggleAvailable&&null!==this._configElement){this._isToggleAvailable=!0}}catch(err){this._isToggleAvailable=!1;this._configState=\"YAML_ERROR\";this._setPreviewError({type:\"YAML Error\",message:err})}}},{key:\"_handleUIConfigChanged\",value:function(value){this._configValue={format:\"json\",value:value};this._updatePreview(value)}},{key:\"_updatePreview\",value:function(config){if(!this._previewEl){return}this._previewEl.config=config;if(this._loading){this._loadedDialog()}else{this._resizeDialog()}}},{key:\"_setPreviewError\",value:function(error){if(!this._previewEl){return}this._previewEl.error=error;this._resizeDialog()}},{key:\"_isConfigValid\",value:function(){if(!this._cardId||!this._configValue||!this._configValue.value){return!1}if(\"OK\"===this._configState){return!0}else{return!1}}},{key:\"_isConfigChanged\",value:function(){var configValue=\"yaml\"===this._configValue.format?js_yaml_default.a.safeDump(this._configValue.value):this._configValue.value;return JSON.stringify(configValue)!==JSON.stringify(this._originalConfig)}},{key:\"_loadConfigElement\",value:function(){var _loadConfigElement2=hui_edit_card_asyncToGenerator(regeneratorRuntime.mark(function _callee5(){var _this2=this,conf,tag,elClass,configElement;return regeneratorRuntime.wrap(function(_context5){while(1){switch(_context5.prev=_context5.next){case 0:if(this._originalConfig){_context5.next=2;break}return _context5.abrupt(\"return\");case 2:conf=this._originalConfig;tag=conf.type.startsWith(hui_edit_card_CUSTOM_TYPE_PREFIX)?conf.type.substr(hui_edit_card_CUSTOM_TYPE_PREFIX.length):\"hui-\".concat(conf.type,\"-card\");elClass=customElements.get(tag);_context5.prev=5;_context5.next=8;return elClass.getConfigElement();case 8:configElement=_context5.sent;_context5.next=16;break;case 11:_context5.prev=11;_context5.t0=_context5[\"catch\"](5);this._configElement=null;this._uiEditor=!1;return _context5.abrupt(\"return\");case 16:this._isToggleAvailable=!0;configElement.setConfig(conf);configElement.hass=this.hass;configElement.addEventListener(\"config-changed\",function(ev){return _this2._handleUIConfigChanged(ev.detail.config)});this._configValue={format:\"json\",value:conf};this._configElement=configElement;this._updatePreview(conf);case 23:case\"end\":return _context5.stop();}}},_callee5,this,[[5,11]])}));return function(){return _loadConfigElement2.apply(this,arguments)}}()},{key:\"cardConfig\",set:function(cardConfig){this._originalConfig=cardConfig;if(cardConfig.id+\"\"!==this._cardId){this._loading=!0;this._uiEditor=!0;this._configElement=void 0;this._configValue={format:\"yaml\",value:void 0};this._configState=\"OK\";this._isToggleAvailable=!1;this._cardId=cardConfig.id+\"\";this._loadConfigElement()}}},{key:\"_dialog\",get:function(){return this.shadowRoot.querySelector(\"paper-dialog\")}},{key:\"_previewEl\",get:function(){return this.shadowRoot.querySelector(\"hui-card-preview\")}}]);return HuiEditCard}(Object(lit_localize_mixin.a)(lit_element.a));customElements.define(\"hui-edit-card\",hui_edit_card_HuiEditCard);function hui_migrate_config_typeof(obj){if(\"function\"===typeof Symbol&&\"symbol\"===typeof Symbol.iterator){hui_migrate_config_typeof=function(obj){return typeof obj}}else{hui_migrate_config_typeof=function(obj){return obj&&\"function\"===typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?\"symbol\":typeof obj}}return hui_migrate_config_typeof(obj)}function hui_migrate_config_templateObject2(){var data=hui_migrate_config_taggedTemplateLiteral([\"\\n      <style>\\n        paper-dialog {\\n          width: 650px;\\n        }\\n        paper-spinner {\\n          display: none;\\n        }\\n        paper-spinner[active] {\\n          display: block;\\n        }\\n        paper-button paper-spinner {\\n          width: 14px;\\n          height: 14px;\\n          margin-right: 20px;\\n        }\\n      </style>\\n    \"]);hui_migrate_config_templateObject2=function(){return data};return data}function hui_migrate_config_templateObject(){var data=hui_migrate_config_taggedTemplateLiteral([\"\\n      \",\"\\n      <paper-dialog with-backdrop>\\n        <h2>\",\"</h2>\\n        <paper-dialog-scrollable>\\n          <p>\",\"</p>\\n          <p>\\n            \",\"\\n          </p>\\n        </paper-dialog-scrollable>\\n        <div class=\\\"paper-dialog-buttons\\\">\\n          <paper-button @click=\\\"\",\"\\\"\\n            >\",\"</paper-button\\n          >\\n          <paper-button\\n            ?disabled=\\\"\",\"\\\"\\n            @click=\\\"\",\"\\\"\\n          >\\n            <paper-spinner\\n              ?active=\\\"\",\"\\\"\\n              alt=\\\"Saving\\\"\\n            ></paper-spinner>\\n            \",\"</paper-button\\n          >\\n        </div>\\n      </paper-dialog>\\n    \"]);hui_migrate_config_templateObject=function(){return data};return data}function hui_migrate_config_taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0)}return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}function hui_migrate_config_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function hui_migrate_config_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){hui_migrate_config_asyncGeneratorStep(gen,resolve,reject,_next,_throw,\"next\",value)}function _throw(err){hui_migrate_config_asyncGeneratorStep(gen,resolve,reject,_next,_throw,\"throw\",err)}_next(void 0)})}}function hui_migrate_config_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\")}}function hui_migrate_config_defineProperties(target,props){for(var i=0,descriptor;i<props.length;i++){descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1;descriptor.configurable=!0;if(\"value\"in descriptor)descriptor.writable=!0;Object.defineProperty(target,descriptor.key,descriptor)}}function hui_migrate_config_createClass(Constructor,protoProps,staticProps){if(protoProps)hui_migrate_config_defineProperties(Constructor.prototype,protoProps);if(staticProps)hui_migrate_config_defineProperties(Constructor,staticProps);return Constructor}function hui_migrate_config_possibleConstructorReturn(self,call){if(call&&(\"object\"===hui_migrate_config_typeof(call)||\"function\"===typeof call)){return call}return hui_migrate_config_assertThisInitialized(self)}function hui_migrate_config_assertThisInitialized(self){if(void 0===self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}return self}function hui_migrate_config_getPrototypeOf(o){hui_migrate_config_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)};return hui_migrate_config_getPrototypeOf(o)}function hui_migrate_config_inherits(subClass,superClass){if(\"function\"!==typeof superClass&&null!==superClass){throw new TypeError(\"Super expression must either be null or a function\")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}});if(superClass)hui_migrate_config_setPrototypeOf(subClass,superClass)}function hui_migrate_config_setPrototypeOf(o,p){hui_migrate_config_setPrototypeOf=Object.setPrototypeOf||function(o,p){o.__proto__=p;return o};return hui_migrate_config_setPrototypeOf(o,p)}var hui_migrate_config_HuiMigrateConfig=function(_hassLocalizeLitMixin){hui_migrate_config_inherits(HuiMigrateConfig,_hassLocalizeLitMixin);function HuiMigrateConfig(){hui_migrate_config_classCallCheck(this,HuiMigrateConfig);return hui_migrate_config_possibleConstructorReturn(this,hui_migrate_config_getPrototypeOf(HuiMigrateConfig).apply(this,arguments))}hui_migrate_config_createClass(HuiMigrateConfig,[{key:\"showDialog\",value:function(){var _showDialog=hui_migrate_config_asyncToGenerator(regeneratorRuntime.mark(function _callee(){return regeneratorRuntime.wrap(function(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(null==this._dialog)){_context.next=3;break}_context.next=3;return this.updateComplete;case 3:this._dialog.open();case 4:case\"end\":return _context.stop();}}},_callee,this)}));return function(){return _showDialog.apply(this,arguments)}}()},{key:\"render\",value:function(){return Object(lit_element.c)(hui_migrate_config_templateObject(),this.renderStyle(),this.localize(\"ui.panel.lovelace.editor.migrate.header\"),this.localize(\"ui.panel.lovelace.editor.migrate.para_no_id\"),this.localize(\"ui.panel.lovelace.editor.migrate.para_migrate\"),this._closeDialog,this.localize(\"ui.common.cancel\"),this._migrating,this._migrateConfig,this._migrating,this.localize(\"ui.panel.lovelace.editor.migrate.migrate\"))}},{key:\"renderStyle\",value:function(){return Object(lit_element.c)(hui_migrate_config_templateObject2())}},{key:\"_closeDialog\",value:function(){this._dialog.close()}},{key:\"_migrateConfig\",value:function(){var _migrateConfig2=hui_migrate_config_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){return regeneratorRuntime.wrap(function(_context2){while(1){switch(_context2.prev=_context2.next){case 0:this._migrating=!0;_context2.prev=1;_context2.next=4;return migrateConfig(this.hass);case 4:this._closeDialog();Object(fire_event.a)(this,\"reload-lovelace\");_context2.next=12;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](1);alert(\"Migration failed: \".concat(_context2.t0.message));this._migrating=!1;case 12:case\"end\":return _context2.stop();}}},_callee2,this,[[1,8]])}));return function(){return _migrateConfig2.apply(this,arguments)}}()},{key:\"_dialog\",get:function(){return this.shadowRoot.querySelector(\"paper-dialog\")}}],[{key:\"properties\",get:function(){return{_hass:{},_migrating:{}}}}]);return HuiMigrateConfig}(Object(lit_localize_mixin.a)(lit_element.a));customElements.define(\"hui-migrate-config\",hui_migrate_config_HuiMigrateConfig);__webpack_require__.d(__webpack_exports__,\"HuiDialogEditCard\",function(){return hui_dialog_edit_card_HuiDialogEditCard});function hui_dialog_edit_card_typeof(obj){if(\"function\"===typeof Symbol&&\"symbol\"===typeof Symbol.iterator){hui_dialog_edit_card_typeof=function(obj){return typeof obj}}else{hui_dialog_edit_card_typeof=function(obj){return obj&&\"function\"===typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?\"symbol\":typeof obj}}return hui_dialog_edit_card_typeof(obj)}function hui_dialog_edit_card_templateObject3(){var data=hui_dialog_edit_card_taggedTemplateLiteral([\"\\n              <hui-migrate-config\\n                .hass=\\\"\",\"\\\"\\n                @reload-lovelace=\\\"\",\"\\\"\\n              ></hui-migrate-config>\\n            \"]);hui_dialog_edit_card_templateObject3=function(){return data};return data}function hui_dialog_edit_card_templateObject2(){var data=hui_dialog_edit_card_taggedTemplateLiteral([\"\\n              <hui-edit-card\\n                .cardConfig=\\\"\",\"\\\"\\n                .hass=\\\"\",\"\\\"\\n                @reload-lovelace=\\\"\",\"\\\"\\n              >\\n              </hui-edit-card>\\n            \"]);hui_dialog_edit_card_templateObject2=function(){return data};return data}function hui_dialog_edit_card_templateObject(){var data=hui_dialog_edit_card_taggedTemplateLiteral([\"\\n      \",\"\\n    \"]);hui_dialog_edit_card_templateObject=function(){return data};return data}function hui_dialog_edit_card_taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0)}return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}function hui_dialog_edit_card_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function hui_dialog_edit_card_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){hui_dialog_edit_card_asyncGeneratorStep(gen,resolve,reject,_next,_throw,\"next\",value)}function _throw(err){hui_dialog_edit_card_asyncGeneratorStep(gen,resolve,reject,_next,_throw,\"throw\",err)}_next(void 0)})}}function hui_dialog_edit_card_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\")}}function hui_dialog_edit_card_defineProperties(target,props){for(var i=0,descriptor;i<props.length;i++){descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1;descriptor.configurable=!0;if(\"value\"in descriptor)descriptor.writable=!0;Object.defineProperty(target,descriptor.key,descriptor)}}function hui_dialog_edit_card_createClass(Constructor,protoProps,staticProps){if(protoProps)hui_dialog_edit_card_defineProperties(Constructor.prototype,protoProps);if(staticProps)hui_dialog_edit_card_defineProperties(Constructor,staticProps);return Constructor}function hui_dialog_edit_card_possibleConstructorReturn(self,call){if(call&&(\"object\"===hui_dialog_edit_card_typeof(call)||\"function\"===typeof call)){return call}return hui_dialog_edit_card_assertThisInitialized(self)}function hui_dialog_edit_card_assertThisInitialized(self){if(void 0===self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}return self}function hui_dialog_edit_card_getPrototypeOf(o){hui_dialog_edit_card_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)};return hui_dialog_edit_card_getPrototypeOf(o)}function hui_dialog_edit_card_inherits(subClass,superClass){if(\"function\"!==typeof superClass&&null!==superClass){throw new TypeError(\"Super expression must either be null or a function\")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}});if(superClass)hui_dialog_edit_card_setPrototypeOf(subClass,superClass)}function hui_dialog_edit_card_setPrototypeOf(o,p){hui_dialog_edit_card_setPrototypeOf=Object.setPrototypeOf||function(o,p){o.__proto__=p;return o};return hui_dialog_edit_card_setPrototypeOf(o,p)}var hui_dialog_edit_card_HuiDialogEditCard=function(_LitElement){hui_dialog_edit_card_inherits(HuiDialogEditCard,_LitElement);function HuiDialogEditCard(){hui_dialog_edit_card_classCallCheck(this,HuiDialogEditCard);return hui_dialog_edit_card_possibleConstructorReturn(this,hui_dialog_edit_card_getPrototypeOf(HuiDialogEditCard).apply(this,arguments))}hui_dialog_edit_card_createClass(HuiDialogEditCard,[{key:\"showDialog\",value:function(){var _showDialog=hui_dialog_edit_card_asyncToGenerator(regeneratorRuntime.mark(function _callee(_ref){var hass,cardConfig,reloadLovelace;return regeneratorRuntime.wrap(function(_context){while(1){switch(_context.prev=_context.next){case 0:hass=_ref.hass,cardConfig=_ref.cardConfig,reloadLovelace=_ref.reloadLovelace;this._hass=hass;this._cardConfig=cardConfig;this._reloadLovelace=reloadLovelace;_context.next=6;return this.updateComplete;case 6:this.shadowRoot.children[0].showDialog();case 7:case\"end\":return _context.stop();}}},_callee,this)}));return function(){return _showDialog.apply(this,arguments)}}()},{key:\"render\",value:function(){return Object(lit_element.c)(hui_dialog_edit_card_templateObject(),this._cardConfig.id?Object(lit_element.c)(hui_dialog_edit_card_templateObject2(),this._cardConfig,this._hass,this._reloadLovelace):Object(lit_element.c)(hui_dialog_edit_card_templateObject3(),this._hass,this._reloadLovelace))}}],[{key:\"properties\",get:function(){return{_hass:{},_cardConfig:{}}}}]);return HuiDialogEditCard}(lit_element.a);customElements.define(\"hui-dialog-edit-card\",hui_dialog_edit_card_HuiDialogEditCard)}}]);"],"mappings":"AAAA","sourceRoot":""}