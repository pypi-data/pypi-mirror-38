webpackJsonp([1],{242:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=n(561),a=function(e){return e&&e.__esModule?e:{default:e}}(u),s=function e(){r(this,e),this.symbol=null,this.rate=null,this.inverseRate=null,this.rateDate=null,this.saved=null};t.default={data:function(){return{currencies:[],response:null,importEnabled:!1}},methods:{displayRates:function(e){this.response=e;for(var t=e.rates,n=0;n<this.currencies.length;n++){var r=this.currencies[n],u=t[r.symbol];r.rate=u,u&&(r.inverseRate=1/u,r.rateDate=e.date)}},downloadAll:function(e){var t=this;$.ajax({url:"https://api.fixer.io/latest",method:"GET",success:function(e){t.displayRates(e),t.enableImport()}})},enableImport:function(){this.importEnabled=!0},get_book_currencies:function(){var e=this;$.ajax({url:"/currency/api/book_currencies",success:function(t){e.initCurrencies(t)}})},importAll:function(){this.setSaved(!1);var e=this;$.ajax({url:"/currency/api/saverates",method:"POST",data:{currencies:JSON.stringify(this.currencies),base:this.response.base,date:this.response.date},success:function(t){var n=!1;"true"==t&&(n=!0),e.setSaved(n)}})},initCurrencies:function(e){for(var t=JSON.parse(e),n=[],r=0;r<t.length;r++){var u=t[r],a=new s;a.symbol=u,n.push(a)}this.currencies=n},setSaved:function(e){for(var t=0;t<this.currencies.length;t++)this.currencies[t].saved=e}},mounted:function(){console.log("Initializing currencies..."),this.get_book_currencies()},components:{CurrencyTable:a.default}}},243:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(562),u=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default={data:function(){return{}},props:["currencies"],components:{CurrencyTableRow:u.default}}},244:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{}},props:["currency"]}},559:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var u=n(15),a=r(u),s=n(560),c=r(s);new a.default({el:"#app",render:function(e){return e(c.default)}})},560:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(242),u=n.n(r);for(var a in r)"default"!==a&&function(e){n.d(t,e,function(){return r[e]})}(a);var s=n(565),c=n(13),i=Object(c.a)(u.a,s.a,s.b,!1,null,null,null);t.default=i.exports},561:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(243),u=n.n(r);for(var a in r)"default"!==a&&function(e){n.d(t,e,function(){return r[e]})}(a);var s=n(564),c=n(13),i=Object(c.a)(u.a,s.a,s.b,!1,null,null,null);t.default=i.exports},562:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(244),u=n.n(r);for(var a in r)"default"!==a&&function(e){n.d(t,e,function(){return r[e]})}(a);var s=n(563),c=n(13),i=Object(c.a)(u.a,s.a,s.b,!1,null,null,null);t.default=i.exports},563:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return u});var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("tr",{key:"{{currency.symbol}}"},[n("td",[e._v(e._s(e.currency.symbol))]),e._v(" "),n("td",{staticClass:"text-right"},[e._v(e._s(e.currency.rate))]),e._v(" "),n("td",{staticClass:"text-right"},[e._v(e._s(e.currency.inverseRate))]),e._v(" "),n("td",[e._v(e._s(e.currency.rateDate))]),e._v(" "),n("td",[e._v(e._s(e.currency.saved))])])},u=[]},564:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return u});var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("table",{staticClass:"table table-bordered table-striped"},[e._m(0),e._v(" "),n("tbody",e._l(e.currencies,function(e){return n("CurrencyTableRow",{key:e.symbol,attrs:{currency:e}})}))])},u=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("thead",{staticClass:"thead-dark"},[n("tr",[n("th",[e._v("Currency")]),e._v(" "),n("th",[e._v("Value")]),e._v(" "),n("th",[e._v("Inverse")]),e._v(" "),n("th",[e._v("Date")]),e._v(" "),n("th",[e._v("Saved")])])])}]},565:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return u});var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h3",[e._v("Book currencies")]),e._v(" "),n("CurrencyTable",{attrs:{currencies:e.currencies}}),e._v(" "),n("div",{attrs:{className:"text-center"}},[n("button",{staticClass:"btn btn-primary",on:{click:e.downloadAll}},[e._v("\n            Download all\n        ")]),e._v(" "),e.importEnabled?n("button",{staticClass:"btn btn-outline-primary ml-3",on:{click:e.importAll}},[e._v("\n            Import all\n        ")]):e._e()])],1)},u=[]}},[559]);
//# sourceMappingURL=currency_download.js.map