webpackJsonp([7],{210:function(n,t,e){"use strict";function a(n){return n&&n.__esModule?n:{default:n}}Object.defineProperty(t,"__esModule",{value:!0});var o=e(211),s=a(o),r=e(24),c=a(r),i=e(38),d=a(i);e(555);var u=e(557),l=a(u),f={inserted:function(n){window.model||n.querySelector("input").focus()}};Date.prototype.addDays=function(n){var t=new Date(this.valueOf());return t.setDate(t.getDate()+n),t},t.default={directives:{focus:f},data:function(){return{dateFrom:"",dateTo:"",account:"",options:[],datesNotSelected:!1,tableFields:["date","description","notes",{key:"value",tdClass:"text-right"},{key:"quantity",tdClass:"text-right"}],model:{accountName:"",startBalance:0,endBalance:0,transactions:[]}}},methods:{formatNumber:function(n){return(0,l.default)("#,##0.00",n)},getAccounts:function(n,t){var e=this;n.length<2||(t(!0),c.default.get("/account/api/search",{params:{query:n}}).then(function(n){e.options=n.data.suggestions,t(!1)}))},accountSelected:function(n){n&&(this.account=n,this.loadTransactions())},loadTransactions:function(){var n=this;this.datesNotSelected=!this.dateFrom||!this.dateTo,c.default.get("/account/api/transactions",{params:{dateFrom:this.dateFrom,dateTo:this.dateTo,account:this.account.id}}).then(function(t){n.model=t.data,n.account.name||(n.account.name=n.model.accountName)}).catch(function(n){console.error(n)})},isoDate:function(n){return n.toISOString().substring(0,10)},setPeriod:function(n){var t=new Date;t=t.addDays(-n),this.dateFrom=this.isoDate(t);var e=new Date;this.dateTo=this.isoDate(e),this.loadTransactions()}},mounted:function(){window.model&&(this.account={id:window.model.accountId,name:""}),this.setPeriod(7)},components:{vSelect:s.default,BootstrapVue:d.default}}},439:function(n,t,e){"use strict";function a(n){return n&&n.__esModule?n:{default:n}}var o=e(15),s=a(o),r=e(440),c=a(r),i=e(38),d=a(i);s.default.use(d.default),new s.default({el:"#app",render:function(n){return n(c.default)}})},440:function(n,t,e){"use strict";function a(n){e(441)}Object.defineProperty(t,"__esModule",{value:!0});var o=e(210),s=e.n(o);for(var r in o)"default"!==r&&function(n){e.d(t,n,function(){return o[n]})}(r);var c=e(558),i=e(13),d=a,u=Object(i.a)(s.a,c.a,c.b,!1,d,null,null);t.default=u.exports},441:function(n,t,e){var a=e(442);"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);var o=e(11).default;o("11d74d6c",a,!0,{})},442:function(n,t,e){t=n.exports=e(10)(!1),t.push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},558:function(n,t,e){"use strict";e.d(t,"a",function(){return a}),e.d(t,"b",function(){return o});var a=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",[e("div",{staticClass:"card bg-secondary text-dark"},[e("div",{staticClass:"card-header"}),n._v(" "),e("div",{staticClass:"card-body"},[e("form",{staticClass:"form"},[e("div",{staticClass:"form-row"},[e("div",{staticClass:"form-group col-md-8"},[e("v-select",{directives:[{name:"focus",rawName:"v-focus"}],staticClass:"form-control",attrs:{debounce:250,"on-search":n.getAccounts,options:n.options,placeholder:"Search account...",label:"name","on-change":n.accountSelected},model:{value:n.account,callback:function(t){n.account=t},expression:"account"}})],1),n._v(" "),e("div",{staticClass:"form-group col-md form-inline"},[e("input",{directives:[{name:"model",rawName:"v-model",value:n.dateFrom,expression:"dateFrom"}],staticClass:"form-control",attrs:{type:"date",name:"dateFrom"},domProps:{value:n.dateFrom},on:{change:n.loadTransactions,input:function(t){t.target.composing||(n.dateFrom=t.target.value)}}}),n._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:n.dateTo,expression:"dateTo"}],staticClass:"form-control",attrs:{type:"date",name:"dateTo"},domProps:{value:n.dateTo},on:{change:n.loadTransactions,input:function(t){t.target.composing||(n.dateTo=t.target.value)}}}),n._v(" "),e("b-alert",{attrs:{variant:"warning",show:n.datesNotSelected}},[n._v("Dates not selected!")]),n._v(" "),e("div",[e("a",{attrs:{href:"#"},on:{click:function(t){n.setPeriod("7")}}},[e("small",[n._v("7 days")])]),n._v("\n                      •\n                      "),e("a",{attrs:{href:"#"},on:{click:function(t){n.setPeriod("30")}}},[e("small",[n._v("30 days")])]),n._v("\n                      •\n                      "),e("a",{attrs:{href:"#"},on:{click:function(t){n.setPeriod("90")}}},[e("small",[n._v("90 days")])])])],1),n._v(" "),e("div",{staticClass:"text-center"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:n.loadTransactions}},[e("i",{staticClass:"fa fa-chevron-right"})])])])])])]),n._v(" "),e("p",[n._v("\n    Transactions for account "),e("strong",[n._v(n._s(n.model.accountName))]),n._v(" "),e("br"),n._v("\n    Starting balance: "),e("span",[n._v(n._s(n.model.startBalance))]),n._v(", Ending balance: "+n._s(n.model.endBalance)+"\n")]),n._v(" "),e("b-table",{attrs:{striped:"",hover:"",small:"","head-variant":"dark",fields:n.tableFields,items:n.model.transactions},scopedSlots:n._u([{key:"date",fn:function(t){return[e("a",{attrs:{href:"/transaction/details/"+t.item.id}},[n._v("\n    "+n._s(t.value)+"\n    ")])]}},{key:"value",fn:function(t){return[n._v("\n    "+n._s(n.formatNumber(t.value))+"\n  ")]}},{key:"quantity",fn:function(t){return[n._v("\n    "+n._s(n.formatNumber(t.value))+"\n  ")]}}])})],1)},o=[]}},[439]);
//# sourceMappingURL=account_transactions.js.map