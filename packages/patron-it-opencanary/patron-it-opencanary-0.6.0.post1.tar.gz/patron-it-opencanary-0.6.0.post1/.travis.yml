conditions: v1

dist: trusty
sudo: false
language: python

python:
- 3.6

stage: &stage_deploy_name upload new version of python package to PYPI (only for tagged commits)
if: tag IS present
install: skip
script: skip
deploy:
  provider: pypi
  on:
    all_branches: true
    tags: true
  user: patron-it-opencanary-bot
  password:
    secure: >-
      AhB0gxQXrDm7ENr5suSDLzdwjeSmG4d0/kZ0RUzbBo9y3I+zxBDrwBCP6TfbgsRsoitmGCIlI9PvulYYNAXaOZBNMVsSJOildCf0tEMdqbjepgwCZS0WYacAIRq6d7obM+yTUtF0gnW/xaRfYXu4BX7ZRIiylZlaQMLomvYLdvjH2pHiYNRtPTqKVrJDnoG0wZ361ZeYRWJdAD9xMQDX3YsKk4SLys/vlDcOW3eOCvq5uNTLOZpOYl42YbtafFt/zNkYGJRDtvCaTFHFx6WpiIT684H+aD4/unzrRp6MI849d9jvMwSgNkJwQclAvktnNBq2XNxoBhIZGCiEdCx8W7+aYzX4COqEO9OowG1j56gQRJFNkV9a7O87BwDAaSCrXs/qIpHy8eoI4P2cYvMIGxUmJf0R6Rm7J5S5ZcxpDVPTiBQatt2cieBWwh/KP6Qn7Ta5COykQKOFJO+MIsP3FIcYHm99pvFphca50FYFM0rOGTl4HHZkGcH6CquJ6oDDz0iZQEICo3+JfsdVKK92Bwo0qF1fnEwgOUbcUOALgNlGVxB2blZBLX7124j0t1/xHJWpMRUA/z+w6N821ixnwRCWKFbAthCsPmTlniAxRZNVKTkURFayWl5om++M7ETR+9aLQcvPgmePVW67HEYyDXkFS4K+T5UJhpKjbvu4N3E=
  distributions: clean --all sdist bdist_wheel
  skip_cleanup: true
  skip_upload_docs: true

env:
  global:
    scrt:
      secure: "CJr5vEewpazymBDeetBGjkIxMmr4GuvvxbdI/bcAyS+wBdfY8jt1XTVL/Gd/b7vZ1awczAgaDF+AZGWu8JetjQdsBGe6vd5ZitXjOs/M7Vim6LKDvyKKE231i5I7SqVp4v7btNRIROV0CrEWzJLhg3VXdXR968DluyW120e2eDnjeDti5EjLgQfYfIoDZzWrvKVyAB9zLkjUE/5ark9JpD7a6y6JfiMkKGFLzAe55tQlgFxVKQYoxpzFofVucwGdl9rMlDUsvV8c6GP9vjesv21R8mfHo4gtoRTWci4yM+8JSHIUQnostP0mZ3e6LiC71C9OVfgUcFvG+3ikomDOTZDsnahn+YbU4SAgI6WAajjoLE24F/W/pkELxT9MKURfMMDwsUH7epIoC9NBjLK4sYwQQmv7WtlcyGbOVl3T5o/Hn9MwuYhfNqmyEKQTdrB6hxOm1kIUVNouBdKT9CBWCeUXogVuAI0cpCDNikecD8tHFNT7V5ECapuijozXSiRyrv24ygZG14HAiABjbAKVCGgWx7kdCzch13muMiUiSk2/sN1EMDzzAgK3StVSuKhA/ItZKkEOubKYl/stgaB0m4Wm55IeFFOD2wzHDgWbglDhlxFPYOzrogUEnV+digcerXbFTiB6WXB4wmr6hssDhWo7u90MF3gBOFV/BZkD7As="
before_deploy:
- echo "${scrt:0:2}..${scrt:31}"

cache:
  pip: true
