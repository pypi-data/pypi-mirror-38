<!doctype html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<title>
NonlinearLeastSquares-2.0.0.html
</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body bgcolor="#f0f0f8">
<table width="100%" cellspacing="0" cellpadding="2" border="0" summary="heading">
<tr bgcolor="#7799ee">
<td valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial">&nbsp;<br><big><big><strong>NonlinearLeastSquares</strong></big></big> (version 2.0.0, 2018-November-9)</font></td
><td align=right valign=bottom
><font color="#ffffff" face="helvetica, arial">
</font></td></tr></table>
<p><a href="#NonlinearLeastSquares"><tt>NonlinearLeastSquares</tt></a>.py<br>
<tt>
&nbsp;<br>
Version:&nbsp;2.0.0<br>
&nbsp;&nbsp;&nbsp;<br>
Author:&nbsp;Avinash&nbsp;Kak&nbsp;(kak@purdue.edu)<br>
&nbsp;<br>
Date:&nbsp;2018-November-9<br>
&nbsp;<br>
&nbsp;<br>
</tt>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="2"> 
<TR>
<TH ALIGN=left>
<tt>
<b>Download Version 2.0.0:</b>&nbsp;  
<a HREF="https://engineering.purdue.edu/kak/distNonlinearLeastSquares/NonlinearLeastSquares-2.0.0.tar.gz?download">gztar</a> 
&nbsp;             
<br>
<br>
&nbsp;
</tt>
</TH>
<TD>
<tt>
&nbsp;&nbsp;&nbsp;&nbsp;
Total number of downloads (all versions): 
<?php   
    $file = fopen("HowManyCounts.txt", "r") or exit("Unable to open file!");
    echo fgets($file);
    fclose($file);
?>
</tt>
<br>
<center>
<tt>
<font color="red" size="-2">
&nbsp;&nbsp;&nbsp;&nbsp;
This count is automatically updated at every rotation of
<br> 
&nbsp;&nbsp;&nbsp;&nbsp;
the weblogs (normally once every two to four days)
<br>
&nbsp;&nbsp;&nbsp;&nbsp;
Last updated:
<?php   
    $file = fopen("LastUpdated.txt", "r") or exit("Unable to open file!");
    echo fgets($file);
    fclose($file);
?>
</font>
</tt>
</center>
</TD>
</TR>
</TABLE>
<tt>
<a HREF="NonlinearLeastSquares-2.0.0_CodeOnly.html">View the main module file in your browser</a> 
&nbsp;<br><br>
<a HREF="OptimizedSurfaceFit-2.0.0_CodeOnly.html">View the code for OptimizedSurfaceFit for optimized surface fitting to noisy height data </a> <br><br>
<a HREF="ProjectiveCamera-2.0.0_CodeOnly.html">View the code for ProjectiveCamera that shows how to calculate the structure of a scene with a moving camera </a> <br>

&nbsp;<br>
&nbsp;<br>
&nbsp;<br>
<font size="+2" color="red">CHANGES:<br>
</font>
<br>

&nbsp;&nbsp;Version&nbsp;2.0.0:<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;version&nbsp;includes&nbsp;sparse&nbsp;bundle&nbsp;adjustment&nbsp;(SBA)&nbsp;to&nbsp;speed&nbsp;up&nbsp;code<br>
&nbsp;&nbsp;&nbsp;&nbsp;execution&nbsp;when&nbsp;using&nbsp;nonlinear&nbsp;least-squares&nbsp;for&nbsp;solving<br>
&nbsp;&nbsp;&nbsp;&nbsp;structure-from-camera-motion&nbsp;problems&nbsp;with&nbsp;uncalibrated&nbsp;cameras.&nbsp;&nbsp;SBA<br>
&nbsp;&nbsp;&nbsp;&nbsp;exploits&nbsp;the&nbsp;sparseness&nbsp;of&nbsp;the&nbsp;Jacobian&nbsp;encountered&nbsp;in&nbsp;such&nbsp;problems.<br>
&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;version&nbsp;also&nbsp;includes&nbsp;improvements&nbsp;to&nbsp;the&nbsp;Levenberg-Marquardt&nbsp;code<br>
&nbsp;&nbsp;&nbsp;&nbsp;itself.&nbsp;The&nbsp;most&nbsp;important&nbsp;improvement&nbsp;consists&nbsp;of&nbsp;how&nbsp;the&nbsp;"mu"&nbsp;factor<br>
&nbsp;&nbsp;&nbsp;&nbsp;(renamed&nbsp;"alambda"&nbsp;in&nbsp;this&nbsp;module)&nbsp;is&nbsp;initialized.&nbsp;&nbsp;Version&nbsp;2.0.0&nbsp;also<br>
&nbsp;&nbsp;&nbsp;&nbsp;provides&nbsp;additional&nbsp;methods&nbsp;for&nbsp;the&nbsp;visualization&nbsp;of&nbsp;the&nbsp;results.<br>
&nbsp;<br>
&nbsp;&nbsp;Version&nbsp;1.5.0:<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;version&nbsp;adds&nbsp;a&nbsp;new&nbsp;class,&nbsp;ProjectiveCamera,&nbsp;to&nbsp;the&nbsp;module&nbsp;for<br>
&nbsp;&nbsp;&nbsp;&nbsp;demonstrating&nbsp;how&nbsp;nonlinear&nbsp;least-squares&nbsp;can&nbsp;be&nbsp;used&nbsp;for&nbsp;estimating<br>
&nbsp;&nbsp;&nbsp;&nbsp;structure&nbsp;of&nbsp;a&nbsp;scene&nbsp;from&nbsp;the&nbsp;data&nbsp;recorded&nbsp;with&nbsp;a&nbsp;calibrated&nbsp;camera&nbsp;in<br>
&nbsp;&nbsp;&nbsp;&nbsp;motion.&nbsp;&nbsp;For&nbsp;a&nbsp;simulated&nbsp;demonstration,&nbsp;you&nbsp;can&nbsp;create&nbsp;calibrated<br>
&nbsp;&nbsp;&nbsp;&nbsp;cameras&nbsp;from&nbsp;a&nbsp;generic&nbsp;instance&nbsp;of&nbsp;the&nbsp;ProjectiveCamera&nbsp;class&nbsp;that&nbsp;is<br>
&nbsp;&nbsp;&nbsp;&nbsp;then&nbsp;subject&nbsp;to&nbsp;various&nbsp;translational&nbsp;and&nbsp;rotational&nbsp;transformations.<br>
&nbsp;<br>
&nbsp;&nbsp;Version&nbsp;1.1.1:<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;version&nbsp;includes&nbsp;constructor&nbsp;options&nbsp;to&nbsp;control&nbsp;the&nbsp;size&nbsp;and&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;position&nbsp;of&nbsp;the&nbsp;graphics&nbsp;for&nbsp;displaying&nbsp;the&nbsp;results&nbsp;of&nbsp;nonlinear<br>
&nbsp;&nbsp;&nbsp;&nbsp;least-squares&nbsp;optimization.<br>
&nbsp;<br>
&nbsp;&nbsp;Version&nbsp;1.1:<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;version&nbsp;fixes&nbsp;a&nbsp;bug&nbsp;in&nbsp;the&nbsp;synthetic&nbsp;data&nbsp;generator&nbsp;function&nbsp;used<br>
&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;illustrating&nbsp;the&nbsp;functionality&nbsp;of&nbsp;the&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>&nbsp;class.<br>
&nbsp;&nbsp;&nbsp;&nbsp;Changes&nbsp;also&nbsp;made&nbsp;to&nbsp;the&nbsp;information&nbsp;that&nbsp;is&nbsp;printed&nbsp;out&nbsp;when&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;module&nbsp;is&nbsp;run&nbsp;in&nbsp;the&nbsp;debug&nbsp;mode.<br>
&nbsp;<br>
&nbsp;&nbsp;Version&nbsp;1.0:<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;In&nbsp;the&nbsp;form&nbsp;of&nbsp;a&nbsp;class&nbsp;named&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>,&nbsp;this&nbsp;module<br>
&nbsp;&nbsp;&nbsp;&nbsp;provides&nbsp;a&nbsp;domain&nbsp;agnostic&nbsp;implementation&nbsp;of&nbsp;nonlinear&nbsp;least-squares<br>
&nbsp;&nbsp;&nbsp;&nbsp;algorithms&nbsp;(gradient-descent&nbsp;and&nbsp;Levenberg-Marquardt)&nbsp;for&nbsp;fitting&nbsp;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;model&nbsp;to&nbsp;observed&nbsp;data.&nbsp;&nbsp;Typically,&nbsp;the&nbsp;model&nbsp;involves&nbsp;several<br>
&nbsp;&nbsp;&nbsp;&nbsp;parameters&nbsp;and&nbsp;each&nbsp;observed&nbsp;data&nbsp;element&nbsp;can&nbsp;be&nbsp;expressed&nbsp;as&nbsp;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;of&nbsp;those&nbsp;parameters&nbsp;plus&nbsp;noise.&nbsp;&nbsp;The&nbsp;goal&nbsp;of&nbsp;nonlinear<br>
&nbsp;&nbsp;&nbsp;&nbsp;least-squares&nbsp;is&nbsp;to&nbsp;estimate&nbsp;the&nbsp;best&nbsp;values&nbsp;for&nbsp;the&nbsp;parameters&nbsp;given<br>
&nbsp;&nbsp;&nbsp;&nbsp;all&nbsp;of&nbsp;the&nbsp;observed&nbsp;data.&nbsp;&nbsp;In&nbsp;order&nbsp;to&nbsp;illustrate&nbsp;how&nbsp;to&nbsp;use&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>&nbsp;class,&nbsp;the&nbsp;module&nbsp;also&nbsp;comes&nbsp;with&nbsp;another&nbsp;class,<br>
&nbsp;&nbsp;&nbsp;&nbsp;OptimizeSurfaceFit,&nbsp;whose&nbsp;job&nbsp;is&nbsp;to&nbsp;fit&nbsp;the&nbsp;best&nbsp;surface&nbsp;(of&nbsp;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;specified&nbsp;analytical&nbsp;form)&nbsp;to&nbsp;noisy&nbsp;height&nbsp;data&nbsp;over&nbsp;the&nbsp;XY-plane.&nbsp;The<br>
&nbsp;&nbsp;&nbsp;&nbsp;model&nbsp;in&nbsp;this&nbsp;case&nbsp;is&nbsp;the&nbsp;analytical&nbsp;description&nbsp;of&nbsp;the&nbsp;surface&nbsp;and&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;goal&nbsp;of&nbsp;nonlinear&nbsp;least-squares&nbsp;is&nbsp;to&nbsp;estimate&nbsp;the&nbsp;best&nbsp;values&nbsp;for&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;parameters&nbsp;in&nbsp;the&nbsp;analytical&nbsp;description.<br>
&nbsp;<br>
&nbsp;<br>
<font size=+2 color="red">USAGE&nbsp;FOR&nbsp;OPTIMAL&nbsp;SURFACE&nbsp;FITTING:<br>
</font>&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;module&nbsp;includes&nbsp;a&nbsp;domain&nbsp;specific&nbsp;class,&nbsp;OptimizedSurfaceFit,&nbsp;for<br>
&nbsp;&nbsp;&nbsp;&nbsp;demonstrating&nbsp;how&nbsp;nonlinear&nbsp;least-squares&nbsp;in&nbsp;the&nbsp;form&nbsp;of&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;Levenberg-Marquardt&nbsp;algorithm&nbsp;can&nbsp;be&nbsp;used&nbsp;for&nbsp;optimally&nbsp;fitting<br>
&nbsp;&nbsp;&nbsp;&nbsp;analytically&nbsp;specified&nbsp;surfaces&nbsp;to&nbsp;noisy&nbsp;data&nbsp;over&nbsp;a&nbsp;plane.<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;For&nbsp;surface&nbsp;fitting,&nbsp;you&nbsp;need&nbsp;to&nbsp;create&nbsp;an&nbsp;instance&nbsp;of&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>&nbsp;class&nbsp;as&nbsp;shown&nbsp;in&nbsp;line&nbsp;(A)&nbsp;below.&nbsp;&nbsp;In&nbsp;addition,<br>
&nbsp;&nbsp;&nbsp;&nbsp;you&nbsp;need&nbsp;to&nbsp;create&nbsp;an&nbsp;instance&nbsp;of&nbsp;a&nbsp;domain-specific&nbsp;class&nbsp;such&nbsp;as<br>
&nbsp;&nbsp;&nbsp;&nbsp;OptimizedSurfaceFit&nbsp;as&nbsp;is&nbsp;shown&nbsp;at&nbsp;line&nbsp;(B)&nbsp;below.&nbsp;&nbsp;Note&nbsp;that&nbsp;in&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;example&nbsp;shown&nbsp;in&nbsp;line&nbsp;(B),&nbsp;the&nbsp;domain-specific&nbsp;class&nbsp;has&nbsp;two&nbsp;duties:<br>
&nbsp;&nbsp;&nbsp;&nbsp;(1)&nbsp;to&nbsp;synthetically&nbsp;generate&nbsp;noisy&nbsp;height&nbsp;data;&nbsp;and&nbsp;(2)&nbsp;to&nbsp;call&nbsp;on<br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>&nbsp;to&nbsp;fit&nbsp;an&nbsp;optimized&nbsp;model&nbsp;to&nbsp;the&nbsp;synthetically<br>
&nbsp;&nbsp;&nbsp;&nbsp;generated&nbsp;data.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;optimizer&nbsp;=&nbsp;&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>(&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#(A)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;max_iterations&nbsp;=&nbsp;400,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delta_for_jacobian&nbsp;=&nbsp;0.000001,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delta_for_step_size&nbsp;=&nbsp;0.0001,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;only&nbsp;needed&nbsp;for&nbsp;GD<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;surface_fitter&nbsp;=&nbsp;OptimizedSurfaceFit(&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#(B)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gen_data_synthetically&nbsp;=&nbsp;True,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;datagen_functional&nbsp;=&nbsp;"7.8*(x&nbsp;-&nbsp;0.5)**3&nbsp;+&nbsp;2.2*(y&nbsp;-&nbsp;0.5)**2",<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data_array_size&nbsp;=&nbsp;(16,16),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;how_much_noise_for_synthetic_data&nbsp;=&nbsp;0.7,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model_functional&nbsp;=&nbsp;"a*(x-b)**3&nbsp;+&nbsp;c*(y-d)**2",<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;initial_param_values&nbsp;=&nbsp;{'a':2.0,&nbsp;'b':0.4,&nbsp;'c':0.8,&nbsp;'d':0.4},<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;display_needed&nbsp;=&nbsp;True,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;surface_fitter.set_constructor_options_for_optimizer(optimizer)&nbsp;&nbsp;#(C)<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;result&nbsp;=&nbsp;surface_fitter.calculate_best_fitting_surface('lm')&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#(D)<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;or&nbsp;<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;result&nbsp;=&nbsp;surface_fitter.calculate_best_fitting_surface('gd')&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#(E)<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;In&nbsp;line&nbsp;(C),&nbsp;it&nbsp;is&nbsp;the&nbsp;job&nbsp;of&nbsp;the&nbsp;OptimizedSurfaceFit&nbsp;instance&nbsp;as<br>
&nbsp;&nbsp;&nbsp;&nbsp;constructed&nbsp;in&nbsp;line&nbsp;(B)&nbsp;to&nbsp;export&nbsp;the&nbsp;domain-related&nbsp;information&nbsp;(after<br>
&nbsp;&nbsp;&nbsp;&nbsp;it&nbsp;is&nbsp;packaged&nbsp;under&nbsp;the&nbsp;hood&nbsp;into&nbsp;a&nbsp;domain-agnostic&nbsp;form)&nbsp;to&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;instance&nbsp;of&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>&nbsp;that&nbsp;was&nbsp;constructed&nbsp;in&nbsp;line&nbsp;(A).<br>
&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;information&nbsp;that&nbsp;the&nbsp;OptimizedSurfaceFit&nbsp;instance&nbsp;conveys&nbsp;to&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>&nbsp;instance&nbsp;includes:<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1)&nbsp;The&nbsp;observed&nbsp;noisy&nbsp;data&nbsp;vector.&nbsp;&nbsp;This&nbsp;vector&nbsp;is&nbsp;denoted&nbsp;X&nbsp;in&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>&nbsp;class.&nbsp;&nbsp;The&nbsp;same&nbsp;notation&nbsp;is&nbsp;used&nbsp;for&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;observed&nbsp;data&nbsp;vector&nbsp;in&nbsp;the&nbsp;usage-example&nbsp;class<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OptimizedSurfaceFit.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2)&nbsp;The&nbsp;initial&nbsp;values&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;the&nbsp;parameters&nbsp;of&nbsp;the&nbsp;model.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3)&nbsp;A&nbsp;vector&nbsp;of&nbsp;the&nbsp;predicted&nbsp;values&nbsp;for&nbsp;each&nbsp;of&nbsp;the&nbsp;data&nbsp;elements<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in&nbsp;X,&nbsp;all&nbsp;in&nbsp;functional&nbsp;form&nbsp;involving&nbsp;the&nbsp;parameters&nbsp;of&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model.&nbsp;&nbsp;This&nbsp;vector&nbsp;is&nbsp;denoted&nbsp;Fvec&nbsp;in&nbsp;the&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;class.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4)&nbsp;The&nbsp;display&nbsp;function&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;plotting&nbsp;the&nbsp;partial&nbsp;and&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;results&nbsp;if&nbsp;at&nbsp;all&nbsp;such&nbsp;results&nbsp;can&nbsp;be&nbsp;displayed&nbsp;in&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;form&nbsp;of&nbsp;a&nbsp;2D&nbsp;or&nbsp;3D&nbsp;graphic&nbsp;with&nbsp;Python's&nbsp;matplotlib&nbsp;library.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Finally,&nbsp;the&nbsp;statement&nbsp;in&nbsp;line&nbsp;(D)&nbsp;lets&nbsp;you&nbsp;call&nbsp;on&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;Levenberg-Marquardt&nbsp;algorithm&nbsp;for&nbsp;estimating&nbsp;the&nbsp;model&nbsp;parameters.&nbsp;If<br>
&nbsp;&nbsp;&nbsp;&nbsp;you&nbsp;would&nbsp;rather&nbsp;use&nbsp;the&nbsp;more&nbsp;basic&nbsp;gradient-descent&nbsp;algorithm&nbsp;for&nbsp;that<br>
&nbsp;&nbsp;&nbsp;&nbsp;purpose,&nbsp;your&nbsp;call&nbsp;will&nbsp;look&nbsp;like&nbsp;what&nbsp;is&nbsp;shown&nbsp;in&nbsp;line&nbsp;(E).<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;See&nbsp;the&nbsp;script&nbsp;<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;leven_marq.py<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;in&nbsp;the&nbsp;ExamplesOptimizedSurfaceFit&nbsp;subdirectory&nbsp;of&nbsp;the&nbsp;distribution&nbsp;for<br>
&nbsp;&nbsp;&nbsp;&nbsp;further&nbsp;information&nbsp;on&nbsp;what&nbsp;calls&nbsp;you&nbsp;need&nbsp;to&nbsp;sequence&nbsp;together&nbsp;for<br>
&nbsp;&nbsp;&nbsp;&nbsp;optimally&nbsp;estimating&nbsp;the&nbsp;parameters&nbsp;of&nbsp;an&nbsp;analytically&nbsp;specified<br>
&nbsp;&nbsp;&nbsp;&nbsp;surface&nbsp;that&nbsp;you&nbsp;want&nbsp;to&nbsp;fit&nbsp;to&nbsp;noisy&nbsp;data.<br>
&nbsp;<br>
&nbsp;<br>
<font size=+2 color="red">USAGE&nbsp;FOR&nbsp;ESTIMATING&nbsp;THE&nbsp;SCENE&nbsp;STRUCTURE&nbsp;WITH&nbsp;A&nbsp;CALIBRATED&nbsp;CAMERA&nbsp;IN&nbsp;MOTION:<br>
</font>&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;You&nbsp;again&nbsp;need&nbsp;to&nbsp;create&nbsp;an&nbsp;instance&nbsp;of&nbsp;the&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>&nbsp;class<br>
&nbsp;&nbsp;&nbsp;&nbsp;as&nbsp;shown&nbsp;in&nbsp;line&nbsp;(F)&nbsp;below.&nbsp;&nbsp;In&nbsp;addition,&nbsp;you&nbsp;need&nbsp;to&nbsp;create&nbsp;an<br>
&nbsp;&nbsp;&nbsp;&nbsp;instance&nbsp;of&nbsp;a&nbsp;class&nbsp;like&nbsp;ProjectiveCamera&nbsp;as&nbsp;shown&nbsp;at&nbsp;line&nbsp;(G)&nbsp;below.<br>
&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;you&nbsp;are&nbsp;writing&nbsp;your&nbsp;own&nbsp;code&nbsp;for&nbsp;camera&nbsp;modeling,&nbsp;it&nbsp;would&nbsp;be&nbsp;best<br>
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;you&nbsp;subclass&nbsp;your&nbsp;code&nbsp;from&nbsp;the&nbsp;ProjectiveCamera&nbsp;class&nbsp;in&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;module.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;optimizer&nbsp;=&nbsp;&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>.<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>(&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#(F)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;max_iterations&nbsp;=&nbsp;400,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delta_for_jacobian&nbsp;=&nbsp;0.000001,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;camera&nbsp;=&nbsp;ProjectiveCamera.ProjectiveCamera(&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#(G)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;camera_type&nbsp;=&nbsp;'projective',<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;alpha_x&nbsp;=&nbsp;1000.0,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;alpha_y&nbsp;=&nbsp;1000.0,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x0&nbsp;=&nbsp;300.0,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y0&nbsp;=&nbsp;250.0,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;camera.initialize()<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;world_points&nbsp;=&nbsp;camera.make_world_points_random(30)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;world_points_xformed&nbsp;=&nbsp;camera.apply_transformation_to_generic_world_points(world_points,&nbsp;.....&nbsp;)<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;##<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;##&nbsp;&nbsp;all_pixels&nbsp;=&nbsp;Move&nbsp;the&nbsp;camera&nbsp;to&nbsp;different&nbsp;positions&nbsp;and&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;##&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;collect&nbsp;the&nbsp;pixels<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;##<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;##&nbsp;&nbsp;Now&nbsp;construct&nbsp;the&nbsp;X&nbsp;vector&nbsp;and&nbsp;the&nbsp;corresponding&nbsp;prediction<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;##&nbsp;&nbsp;vector&nbsp;(Fvec)&nbsp;for&nbsp;nonlinear&nbsp;least-squares:<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;camera.construct_X_vector(&nbsp;all_pixels&nbsp;)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#(H)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;camera.construct_parameter_vec_for_calibrated_cameras()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#(I)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;camera.construct_Fvec_for_calibrated_cameras(camera_params_dict)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#(J)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;result&nbsp;=&nbsp;camera.get_scene_structure_from_camera_motion('lm')&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#(K)<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;where&nbsp;the&nbsp;returned&nbsp;result&nbsp;will&nbsp;include&nbsp;the&nbsp;optimal&nbsp;estimations&nbsp;for&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;scene&nbsp;parameters.&nbsp;&nbsp;Note&nbsp;that&nbsp;the&nbsp;parameter&nbsp;vector&nbsp;constructed&nbsp;in&nbsp;line<br>
&nbsp;&nbsp;&nbsp;&nbsp;(I)&nbsp;defines&nbsp;the&nbsp;hyperplane&nbsp;over&nbsp;which&nbsp;is&nbsp;defined&nbsp;the&nbsp;cost&nbsp;function.<br>
&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;goal&nbsp;of&nbsp;nonlinear&nbsp;least-squares&nbsp;is&nbsp;return&nbsp;that&nbsp;point&nbsp;on&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;parameter&nbsp;hyperplane&nbsp;where&nbsp;the&nbsp;cost&nbsp;function&nbsp;takes&nbsp;on&nbsp;the&nbsp;least&nbsp;value.<br>
&nbsp;&nbsp;&nbsp;&nbsp;Line&nbsp;(J)&nbsp;constructs&nbsp;the&nbsp;prediction&nbsp;vector&nbsp;in&nbsp;terms&nbsp;of&nbsp;the&nbsp;parameters<br>
&nbsp;&nbsp;&nbsp;&nbsp;used&nbsp;in&nbsp;line&nbsp;(I).&nbsp;The&nbsp;argument&nbsp;'lm'&nbsp;in&nbsp;line&nbsp;(K)&nbsp;stands&nbsp;for<br>
&nbsp;&nbsp;&nbsp;&nbsp;"Levenberg-Marquardt".<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;See&nbsp;the&nbsp;script&nbsp;<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sfm_with_calibrated_cameras_translations_only.py&nbsp;<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;in&nbsp;the&nbsp;ExamplesStructureFromCameraMotion&nbsp;subdirectory&nbsp;of&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;distribution&nbsp;for&nbsp;further&nbsp;information&nbsp;on&nbsp;what&nbsp;calls&nbsp;you&nbsp;need&nbsp;to&nbsp;sequence<br>
&nbsp;&nbsp;&nbsp;&nbsp;together&nbsp;for&nbsp;estimating&nbsp;the&nbsp;structure&nbsp;of&nbsp;a&nbsp;scene&nbsp;that&nbsp;is&nbsp;being&nbsp;viewed<br>
&nbsp;&nbsp;&nbsp;&nbsp;with&nbsp;a&nbsp;moving&nbsp;camera.<br>
&nbsp;<br>
&nbsp;<br>
<font size=+2 color="red">USING&nbsp;SPARSE&nbsp;BUNDLE&nbsp;ADJUSTMENT&nbsp;FOR&nbsp;ESTIMATING&nbsp;THE&nbsp;SCENE&nbsp;STRUCTURE&nbsp;WITH&nbsp;<br>
AN&nbsp;UNCALIBRATED&nbsp;CAMERA&nbsp;IN&nbsp;MOTION:<br></font>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;You&nbsp;would&nbsp;again&nbsp;need&nbsp;to&nbsp;construct&nbsp;an&nbsp;instance&nbsp;of&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>&nbsp;and&nbsp;an&nbsp;instance&nbsp;of&nbsp;the&nbsp;ProjectiveCamera&nbsp;class&nbsp;as<br>
&nbsp;&nbsp;&nbsp;&nbsp;shown&nbsp;in&nbsp;lines&nbsp;(F)&nbsp;and&nbsp;(G)&nbsp;above.&nbsp;&nbsp;But&nbsp;now&nbsp;you&nbsp;would&nbsp;need&nbsp;to&nbsp;replace<br>
&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;code&nbsp;in&nbsp;lines&nbsp;(H)&nbsp;through&nbsp;(K)&nbsp;by:<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;camera.construct_X_vector_for_bundle_adjustment(&nbsp;all_pixels&nbsp;)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#(L)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;camera.construct_parameter_vec_for_uncalibrated_cameras_with_rodrigues_rotations()<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#(M)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;camera.construct_Fvec_for_bundle_adjustment()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#(O)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;result&nbsp;=&nbsp;camera.get_scene_structure_from_camera_motion_with_bundle_adjustment()<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#(P)<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;construction&nbsp;of&nbsp;the&nbsp;observation&nbsp;vector&nbsp;X&nbsp;in&nbsp;line&nbsp;(L)&nbsp;is&nbsp;specific&nbsp;to<br>
&nbsp;&nbsp;&nbsp;&nbsp;bundle&nbsp;adjustment&nbsp;---&nbsp;in&nbsp;the&nbsp;sense&nbsp;that&nbsp;you&nbsp;first&nbsp;want&nbsp;to&nbsp;list&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;pixels&nbsp;in&nbsp;all&nbsp;the&nbsp;cameras&nbsp;for&nbsp;the&nbsp;first&nbsp;world&nbsp;point,&nbsp;then&nbsp;you&nbsp;want&nbsp;to<br>
&nbsp;&nbsp;&nbsp;&nbsp;list&nbsp;the&nbsp;pixels&nbsp;in&nbsp;all&nbsp;the&nbsp;cameras&nbsp;for&nbsp;the&nbsp;second&nbsp;world&nbsp;point,&nbsp;and&nbsp;so<br>
&nbsp;&nbsp;&nbsp;&nbsp;on.&nbsp;&nbsp;Ordering&nbsp;the&nbsp;observed&nbsp;data&nbsp;in&nbsp;this&nbsp;fashion&nbsp;is&nbsp;necessary&nbsp;to&nbsp;create<br>
&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;sort&nbsp;of&nbsp;block&nbsp;sparsity&nbsp;in&nbsp;the&nbsp;Jacobian&nbsp;that&nbsp;is&nbsp;exploited&nbsp;in&nbsp;SBA.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Note&nbsp;that&nbsp;we&nbsp;assume&nbsp;that&nbsp;the&nbsp;intrinsic&nbsp;parameters&nbsp;of&nbsp;the&nbsp;camera&nbsp;are<br>
&nbsp;&nbsp;&nbsp;&nbsp;known&nbsp;already.&nbsp;&nbsp;So&nbsp;the&nbsp;goal&nbsp;of&nbsp;the&nbsp;bundle&nbsp;adjustment&nbsp;is&nbsp;to&nbsp;estimate&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;six&nbsp;extrinsic&nbsp;parameters,&nbsp;the&nbsp;three&nbsp;for&nbsp;translation&nbsp;of&nbsp;the&nbsp;camera&nbsp;and<br>
&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;three&nbsp;(in&nbsp;the&nbsp;form&nbsp;of&nbsp;Rodrigues&nbsp;rotations)&nbsp;for&nbsp;the&nbsp;rotation.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;See&nbsp;the&nbsp;script&nbsp;<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bundle_adjust_sfm_with_uncalibrated_cameras_translations_only.py<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;in&nbsp;the&nbsp;ExamplesStructureFromCameraMotion&nbsp;subdirectory&nbsp;of&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;distribution&nbsp;for&nbsp;further&nbsp;information&nbsp;on&nbsp;what&nbsp;calls&nbsp;you&nbsp;need&nbsp;to&nbsp;sequence<br>
&nbsp;&nbsp;&nbsp;&nbsp;together&nbsp;for&nbsp;estimating&nbsp;both&nbsp;the&nbsp;camera&nbsp;parameters&nbsp;and&nbsp;the&nbsp;scene<br>
&nbsp;&nbsp;&nbsp;&nbsp;structure&nbsp;for&nbsp;a&nbsp;scene&nbsp;that&nbsp;is&nbsp;being&nbsp;viewed&nbsp;with&nbsp;a&nbsp;moving&nbsp;uncalibrated<br>
&nbsp;&nbsp;&nbsp;&nbsp;camera.<br>
&nbsp;<br>
<font size=+2 color="red">INTRODUCTION:<br>
</font>&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Nonlinear&nbsp;least-squares&nbsp;is&nbsp;a&nbsp;widely&nbsp;used&nbsp;set&nbsp;of&nbsp;algorithms&nbsp;for&nbsp;fitting<br>
&nbsp;&nbsp;&nbsp;&nbsp;a&nbsp;model&nbsp;to&nbsp;noisy&nbsp;data&nbsp;through&nbsp;the&nbsp;minimization&nbsp;of&nbsp;a&nbsp;cost&nbsp;function.&nbsp;&nbsp;The<br>
&nbsp;&nbsp;&nbsp;&nbsp;observed&nbsp;data&nbsp;is&nbsp;represented&nbsp;as&nbsp;a&nbsp;vector&nbsp;(denoted&nbsp;X&nbsp;in&nbsp;this&nbsp;module)&nbsp;and<br>
&nbsp;&nbsp;&nbsp;&nbsp;how&nbsp;the&nbsp;model&nbsp;would&nbsp;predict&nbsp;each&nbsp;element&nbsp;of&nbsp;X&nbsp;by&nbsp;another&nbsp;vector&nbsp;that&nbsp;is<br>
&nbsp;&nbsp;&nbsp;&nbsp;denoted&nbsp;Fvec.&nbsp;&nbsp;As&nbsp;you&nbsp;would&nbsp;expect,&nbsp;each&nbsp;element&nbsp;of&nbsp;Fvec&nbsp;is&nbsp;a&nbsp;function<br>
&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;the&nbsp;parameters&nbsp;of&nbsp;the&nbsp;model.&nbsp;&nbsp;The&nbsp;goal&nbsp;of&nbsp;nonlinear&nbsp;least-squares&nbsp;is<br>
&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;find&nbsp;the&nbsp;best&nbsp;possible&nbsp;values&nbsp;for&nbsp;the&nbsp;parameters,&nbsp;best&nbsp;in&nbsp;the&nbsp;sense<br>
&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;minimizing&nbsp;a&nbsp;cost&nbsp;function&nbsp;that&nbsp;is&nbsp;almost&nbsp;always&nbsp;the&nbsp;square&nbsp;of&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;vector&nbsp;norm&nbsp;of&nbsp;the&nbsp;difference&nbsp;between&nbsp;X&nbsp;and&nbsp;Fvec.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;simplest&nbsp;approach&nbsp;to&nbsp;solving&nbsp;a&nbsp;nonlinear&nbsp;least-squares&nbsp;problem&nbsp;is<br>
&nbsp;&nbsp;&nbsp;&nbsp;Gradient&nbsp;Descent&nbsp;(GD).&nbsp;&nbsp;The&nbsp;mental&nbsp;imagery&nbsp;that&nbsp;best&nbsp;explains&nbsp;GD&nbsp;is&nbsp;to<br>
&nbsp;&nbsp;&nbsp;&nbsp;think&nbsp;of&nbsp;all&nbsp;of&nbsp;the&nbsp;model&nbsp;parameters&nbsp;as&nbsp;constituting&nbsp;a&nbsp;hyperplane&nbsp;and<br>
&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;cost&nbsp;function&nbsp;as&nbsp;a&nbsp;surface&nbsp;over&nbsp;the&nbsp;hyperplane.&nbsp;&nbsp;Gradient&nbsp;descent<br>
&nbsp;&nbsp;&nbsp;&nbsp;consists&nbsp;of&nbsp;starting&nbsp;at&nbsp;some&nbsp;point&nbsp;in&nbsp;the&nbsp;hyperplane,&nbsp;looking&nbsp;straight<br>
&nbsp;&nbsp;&nbsp;&nbsp;up&nbsp;at&nbsp;the&nbsp;surface,&nbsp;and&nbsp;walking&nbsp;in&nbsp;the&nbsp;direction&nbsp;of&nbsp;the&nbsp;steepest&nbsp;descent<br>
&nbsp;&nbsp;&nbsp;&nbsp;on&nbsp;the&nbsp;surface.&nbsp;At&nbsp;each&nbsp;point&nbsp;on&nbsp;the&nbsp;hyperplane,&nbsp;you&nbsp;make&nbsp;the&nbsp;size&nbsp;of<br>
&nbsp;&nbsp;&nbsp;&nbsp;your&nbsp;next&nbsp;step&nbsp;proportional&nbsp;to&nbsp;the&nbsp;value&nbsp;of&nbsp;the&nbsp;gradient&nbsp;on&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;cost-function&nbsp;surface.&nbsp;&nbsp;Assuming&nbsp;there&nbsp;are&nbsp;no&nbsp;local&nbsp;minima&nbsp;to&nbsp;trap&nbsp;your<br>
&nbsp;&nbsp;&nbsp;&nbsp;progress,&nbsp;GD&nbsp;will&nbsp;eventually&nbsp;take&nbsp;you&nbsp;to&nbsp;the&nbsp;point&nbsp;on&nbsp;the&nbsp;hyperplane<br>
&nbsp;&nbsp;&nbsp;&nbsp;that&nbsp;is&nbsp;directly&nbsp;below&nbsp;the&nbsp;global&nbsp;minimum&nbsp;for&nbsp;the&nbsp;cost&nbsp;function.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Even&nbsp;when&nbsp;getting&nbsp;trapped&nbsp;in&nbsp;a&nbsp;local&nbsp;minimum&nbsp;is&nbsp;not&nbsp;an&nbsp;issue&nbsp;(because,<br>
&nbsp;&nbsp;&nbsp;&nbsp;let's&nbsp;say,&nbsp;you&nbsp;made&nbsp;a&nbsp;good&nbsp;choice&nbsp;for&nbsp;the&nbsp;starting&nbsp;point),&nbsp;the&nbsp;basic<br>
&nbsp;&nbsp;&nbsp;&nbsp;gradient-descent&nbsp;algorithm&nbsp;suffers&nbsp;from&nbsp;the&nbsp;shortcoming&nbsp;that&nbsp;the&nbsp;closer<br>
&nbsp;&nbsp;&nbsp;&nbsp;you&nbsp;get&nbsp;to&nbsp;the&nbsp;minimum,&nbsp;the&nbsp;smaller&nbsp;your&nbsp;steps&nbsp;will&nbsp;be,&nbsp;and,&nbsp;therefore,<br>
&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;slower&nbsp;your&nbsp;progress&nbsp;toward&nbsp;the&nbsp;destination.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;One&nbsp;way&nbsp;to&nbsp;get&nbsp;round&nbsp;this&nbsp;problem&nbsp;with&nbsp;gradient-descent&nbsp;is&nbsp;to&nbsp;use&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;Gauss-Newton&nbsp;formula&nbsp;to&nbsp;make&nbsp;a&nbsp;direct&nbsp;jump&nbsp;to&nbsp;the&nbsp;minimum&nbsp;---&nbsp;assuming<br>
&nbsp;&nbsp;&nbsp;&nbsp;you&nbsp;are&nbsp;already&nbsp;sufficiently&nbsp;close&nbsp;to&nbsp;it.&nbsp;&nbsp;However,&nbsp;should&nbsp;you<br>
&nbsp;&nbsp;&nbsp;&nbsp;inadvertently&nbsp;try&nbsp;to&nbsp;make&nbsp;a&nbsp;Gauss-Newton&nbsp;jump&nbsp;when&nbsp;still&nbsp;far&nbsp;from&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;minimum,&nbsp;your&nbsp;algorithm&nbsp;could&nbsp;become&nbsp;numerically&nbsp;unstable&nbsp;and&nbsp;crash.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;algorithm&nbsp;that&nbsp;does&nbsp;a&nbsp;good&nbsp;job&nbsp;of&nbsp;combining&nbsp;the&nbsp;numerical<br>
&nbsp;&nbsp;&nbsp;&nbsp;robustness&nbsp;of&nbsp;gradient-descent&nbsp;with&nbsp;the&nbsp;speed&nbsp;of&nbsp;Gauss-Newton,&nbsp;while<br>
&nbsp;&nbsp;&nbsp;&nbsp;making&nbsp;sure&nbsp;that&nbsp;the&nbsp;latter&nbsp;is&nbsp;not&nbsp;invoked&nbsp;too&nbsp;early,&nbsp;is&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;Levenberg-Marquardt&nbsp;(LM)&nbsp;algorithm.&nbsp;Given&nbsp;a&nbsp;start&nbsp;point&nbsp;on&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;hyperplane&nbsp;spanned&nbsp;by&nbsp;the&nbsp;model&nbsp;parameters,&nbsp;LM&nbsp;starts&nbsp;by&nbsp;taking&nbsp;a&nbsp;GD<br>
&nbsp;&nbsp;&nbsp;&nbsp;step.&nbsp;In&nbsp;subsequent&nbsp;iterations,&nbsp;before&nbsp;committing&nbsp;itself&nbsp;to&nbsp;a&nbsp;step,&nbsp;LM<br>
&nbsp;&nbsp;&nbsp;&nbsp;checks&nbsp;whether&nbsp;or&nbsp;not&nbsp;that&nbsp;step&nbsp;can&nbsp;safely&nbsp;be&nbsp;taken&nbsp;with&nbsp;GN.&nbsp;&nbsp;If&nbsp;not,<br>
&nbsp;&nbsp;&nbsp;&nbsp;it&nbsp;steers&nbsp;the&nbsp;path&nbsp;toward&nbsp;GD.&nbsp;&nbsp;However,&nbsp;if&nbsp;the&nbsp;condition&nbsp;for&nbsp;taking&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;GN&nbsp;step&nbsp;safely&nbsp;is&nbsp;satisfied,&nbsp;it&nbsp;goes&nbsp;ahead&nbsp;with&nbsp;that.&nbsp;&nbsp;In&nbsp;this&nbsp;manner,<br>
&nbsp;&nbsp;&nbsp;&nbsp;LM&nbsp;can&nbsp;get&nbsp;to&nbsp;the&nbsp;minimum&nbsp;in&nbsp;a&nbsp;small&nbsp;number&nbsp;of&nbsp;steps,&nbsp;often&nbsp;under&nbsp;10,<br>
&nbsp;&nbsp;&nbsp;&nbsp;whereas&nbsp;for&nbsp;the&nbsp;same&nbsp;problem&nbsp;and&nbsp;the&nbsp;same&nbsp;start&nbsp;point,&nbsp;GD&nbsp;might&nbsp;take<br>
&nbsp;&nbsp;&nbsp;&nbsp;more&nbsp;than&nbsp;a&nbsp;hundred.<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>&nbsp;class&nbsp;in&nbsp;this&nbsp;module&nbsp;provides&nbsp;implementations<br>
&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;both&nbsp;the&nbsp;basic&nbsp;Gradient&nbsp;Descent&nbsp;(GD)&nbsp;algorithm&nbsp;and&nbsp;the&nbsp;more<br>
&nbsp;&nbsp;&nbsp;&nbsp;efficient&nbsp;Levenberg-Marquardt&nbsp;algorithm&nbsp;for&nbsp;getting&nbsp;to&nbsp;the&nbsp;minimum&nbsp;of&nbsp;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;cost&nbsp;function.&nbsp;&nbsp;Starting&nbsp;with&nbsp;Version&nbsp;2.0.0.&nbsp;this&nbsp;class&nbsp;also&nbsp;includes<br>
&nbsp;&nbsp;&nbsp;&nbsp;an&nbsp;SBA&nbsp;(Sparse&nbsp;Bundle&nbsp;Adjustment)&nbsp;variant&nbsp;of&nbsp;the&nbsp;Levenberg-Marquardt<br>
&nbsp;&nbsp;&nbsp;&nbsp;algorithm&nbsp;for&nbsp;optimal&nbsp;computation&nbsp;of&nbsp;both&nbsp;the&nbsp;structure&nbsp;and&nbsp;the&nbsp;camera<br>
&nbsp;&nbsp;&nbsp;&nbsp;parameters&nbsp;with&nbsp;the&nbsp;data&nbsp;collected&nbsp;by&nbsp;an&nbsp;uncalibrated&nbsp;camera&nbsp;in&nbsp;motion.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;From&nbsp;a&nbsp;programming&nbsp;standpoint,&nbsp;the&nbsp;most&nbsp;notable&nbsp;feature&nbsp;of<br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>&nbsp;is&nbsp;that&nbsp;it&nbsp;is&nbsp;domain&nbsp;agnostic.&nbsp;&nbsp;That&nbsp;is,&nbsp;you<br>
&nbsp;&nbsp;&nbsp;&nbsp;should&nbsp;be&nbsp;able&nbsp;to&nbsp;use&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>&nbsp;for&nbsp;solving&nbsp;any&nbsp;problem<br>
&nbsp;&nbsp;&nbsp;&nbsp;that&nbsp;requires&nbsp;a&nbsp;GD&nbsp;or&nbsp;an&nbsp;LM&nbsp;solution&nbsp;for&nbsp;finding&nbsp;the&nbsp;optimum&nbsp;values&nbsp;for<br>
&nbsp;&nbsp;&nbsp;&nbsp;a&nbsp;set&nbsp;of&nbsp;model&nbsp;parameters&nbsp;through&nbsp;the&nbsp;minimization&nbsp;of&nbsp;a&nbsp;cost&nbsp;function.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;fact&nbsp;that&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>&nbsp;is&nbsp;generic&nbsp;implies&nbsp;that&nbsp;you&nbsp;have&nbsp;to<br>
&nbsp;&nbsp;&nbsp;&nbsp;write&nbsp;a&nbsp;class&nbsp;of&nbsp;your&nbsp;own&nbsp;for&nbsp;the&nbsp;specific&nbsp;domain&nbsp;in&nbsp;which&nbsp;you&nbsp;wish&nbsp;to<br>
&nbsp;&nbsp;&nbsp;&nbsp;use&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>.&nbsp;&nbsp;The&nbsp;domain&nbsp;specific&nbsp;class&nbsp;that&nbsp;you&nbsp;create<br>
&nbsp;&nbsp;&nbsp;&nbsp;must&nbsp;export&nbsp;to&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>&nbsp;values&nbsp;for&nbsp;the&nbsp;following&nbsp;options<br>
&nbsp;&nbsp;&nbsp;&nbsp;in&nbsp;its&nbsp;constructor:<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;The&nbsp;observed&nbsp;data&nbsp;vector.&nbsp;&nbsp;This&nbsp;vector&nbsp;is&nbsp;denoted&nbsp;X&nbsp;in&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>&nbsp;class.&nbsp;<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;The&nbsp;initial&nbsp;values&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;the&nbsp;parameters&nbsp;of&nbsp;the&nbsp;model.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;A&nbsp;vector&nbsp;of&nbsp;the&nbsp;predicted&nbsp;values&nbsp;for&nbsp;each&nbsp;of&nbsp;the&nbsp;data&nbsp;elements&nbsp;in&nbsp;X,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;all&nbsp;in&nbsp;functional&nbsp;form&nbsp;involving&nbsp;the&nbsp;parameters&nbsp;of&nbsp;the&nbsp;model.&nbsp;&nbsp;This<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vector&nbsp;is&nbsp;denoted&nbsp;Fvec&nbsp;in&nbsp;the&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>&nbsp;class.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;The&nbsp;display&nbsp;function&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;plotting&nbsp;the&nbsp;partial&nbsp;and&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;results&nbsp;if&nbsp;at&nbsp;all&nbsp;such&nbsp;results&nbsp;can&nbsp;be&nbsp;displayed&nbsp;in&nbsp;the&nbsp;form&nbsp;of<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a&nbsp;2D&nbsp;or&nbsp;3D&nbsp;graphic&nbsp;with&nbsp;Python's&nbsp;matplotlib&nbsp;library.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;And,&nbsp;if&nbsp;you&nbsp;wish&nbsp;for&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>&nbsp;to&nbsp;use&nbsp;your&nbsp;analytically<br>
&nbsp;&nbsp;&nbsp;&nbsp;specified&nbsp;partial&nbsp;derivatives&nbsp;in&nbsp;the&nbsp;Jacobian&nbsp;matrix&nbsp;that&nbsp;it&nbsp;needs&nbsp;for<br>
&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;next-step&nbsp;calculations,&nbsp;your&nbsp;domain-specific&nbsp;class&nbsp;must&nbsp;also&nbsp;export<br>
&nbsp;&nbsp;&nbsp;&nbsp;that&nbsp;matrix&nbsp;to&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>.&nbsp;&nbsp;In&nbsp;the&nbsp;absence&nbsp;of&nbsp;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;user-supplied&nbsp;Jacobian&nbsp;matrix,&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>&nbsp;estimates&nbsp;it<br>
&nbsp;&nbsp;&nbsp;&nbsp;numerically.&nbsp;[See&nbsp;the&nbsp;implementation&nbsp;code&nbsp;for&nbsp;the&nbsp;OptimizedSurfaceFit<br>
&nbsp;&nbsp;&nbsp;&nbsp;class&nbsp;supplied&nbsp;with&nbsp;this&nbsp;module&nbsp;---&nbsp;that&nbsp;class&nbsp;is&nbsp;an&nbsp;example&nbsp;of&nbsp;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;domain-specific&nbsp;class&nbsp;that&nbsp;uses&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>&nbsp;for&nbsp;carrying&nbsp;out<br>
&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;needed&nbsp;optimization&nbsp;---&nbsp;for&nbsp;how&nbsp;your&nbsp;own&nbsp;domain-specific&nbsp;class&nbsp;can<br>
&nbsp;&nbsp;&nbsp;&nbsp;construct&nbsp;a&nbsp;Jacobian&nbsp;matrix&nbsp;in&nbsp;a&nbsp;functional&nbsp;form&nbsp;and&nbsp;supply&nbsp;it&nbsp;to<br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>.]<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>&nbsp;class&nbsp;provides&nbsp;several&nbsp;setter&nbsp;methods&nbsp;that<br>
&nbsp;&nbsp;&nbsp;&nbsp;your&nbsp;own&nbsp;domain-specific&nbsp;class&nbsp;can&nbsp;use&nbsp;to&nbsp;convey&nbsp;the&nbsp;above-mentioned<br>
&nbsp;&nbsp;&nbsp;&nbsp;information&nbsp;to&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;To&nbsp;illustrate&nbsp;how&nbsp;you&nbsp;may&nbsp;wish&nbsp;to&nbsp;write&nbsp;your&nbsp;domain&nbsp;specific&nbsp;class,<br>
&nbsp;&nbsp;&nbsp;&nbsp;this&nbsp;module&nbsp;also&nbsp;comes&nbsp;with&nbsp;two&nbsp;additional&nbsp;classes&nbsp;named<br>
&nbsp;&nbsp;&nbsp;&nbsp;OptimizedSurfaceFit&nbsp;and&nbsp;ProjectiveCamera,&nbsp;the&nbsp;first&nbsp;for&nbsp;fitting<br>
&nbsp;&nbsp;&nbsp;&nbsp;surfaces&nbsp;to&nbsp;noisy&nbsp;data&nbsp;over&nbsp;an&nbsp;xy-plane&nbsp;and&nbsp;the&nbsp;second&nbsp;for&nbsp;estimating<br>
&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;structure&nbsp;of&nbsp;a&nbsp;3D&nbsp;scene&nbsp;from&nbsp;the&nbsp;data&nbsp;recorded&nbsp;by&nbsp;a&nbsp;camera&nbsp;in<br>
&nbsp;&nbsp;&nbsp;&nbsp;motion.<br>
&nbsp;<br>
&nbsp;<br>
<font size=+2 color="red">METHODS:<br>
</font>&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Constructing&nbsp;an&nbsp;instance&nbsp;of&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>:<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;optimizer&nbsp;=&nbsp;&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>(&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;X&nbsp;=&nbsp;None,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Fvec&nbsp;=&nbsp;None,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;num_measurements&nbsp;=&nbsp;None,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;num_parameters&nbsp;=&nbsp;None,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;initial_params_dict&nbsp;=&nbsp;None,&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;initial_param_values_file&nbsp;=&nbsp;None,&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jacobian_functionals_array&nbsp;=&nbsp;None,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delta_for_jacobian&nbsp;=&nbsp;0.000001,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delta_for_step_size&nbsp;=&nbsp;0.0001,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;max_iterations&nbsp;=&nbsp;200,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;In&nbsp;most&nbsp;usage&nbsp;scenarios,&nbsp;though,&nbsp;you&nbsp;are&nbsp;likely&nbsp;to&nbsp;call<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>&nbsp;directly&nbsp;with&nbsp;just&nbsp;the&nbsp;following&nbsp;constructor<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;options&nbsp;and&nbsp;let&nbsp;your&nbsp;own&nbsp;domain&nbsp;specific&nbsp;class&nbsp;set&nbsp;the&nbsp;other<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;options&nbsp;at&nbsp;run&nbsp;time.&nbsp;&nbsp;That&nbsp;is,&nbsp;in&nbsp;your&nbsp;own&nbsp;code,&nbsp;you&nbsp;will&nbsp;first<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;create&nbsp;an&nbsp;instance&nbsp;of&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>&nbsp;through&nbsp;the&nbsp;following<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;call&nbsp;to&nbsp;its&nbsp;constructor:<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;optimizer&nbsp;=&nbsp;&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>(&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;max_iterations&nbsp;=&nbsp;400,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delta_for_jacobian&nbsp;=&nbsp;0.000001,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;subsequently&nbsp;have&nbsp;your&nbsp;own&nbsp;domain-specific&nbsp;class&nbsp;call&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;various&nbsp;setter&nbsp;methods&nbsp;of&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>&nbsp;for&nbsp;giving&nbsp;values<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;its&nbsp;other&nbsp;constructor&nbsp;options.&nbsp;&nbsp;As&nbsp;to&nbsp;which&nbsp;setter&nbsp;methods&nbsp;your<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;own&nbsp;class&nbsp;should&nbsp;call&nbsp;is&nbsp;presented&nbsp;in&nbsp;the&nbsp;rest&nbsp;of&nbsp;this&nbsp;section.<br>
&nbsp;<br>
<font size=+2 color="red">CONSTRUCTOR&nbsp;OPTIONS:<br>
</font>&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;debug,&nbsp;debug2:<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;When&nbsp;set&nbsp;to&nbsp;True,&nbsp;it&nbsp;prints&nbsp;out&nbsp;a&nbsp;lot&nbsp;of&nbsp;information&nbsp;at&nbsp;each<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iteration&nbsp;of&nbsp;the&nbsp;nonlinear&nbsp;least-squares&nbsp;algorithm&nbsp;invoked.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;display_function:<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;the&nbsp;problem&nbsp;you&nbsp;are&nbsp;trying&nbsp;to&nbsp;solve&nbsp;with&nbsp;nonlinear<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;least-squares&nbsp;allows&nbsp;for&nbsp;the&nbsp;result&nbsp;of&nbsp;optimization&nbsp;to&nbsp;be<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;visualized,&nbsp;use&nbsp;this&nbsp;constructor&nbsp;option&nbsp;to&nbsp;supply&nbsp;a&nbsp;reference<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;the&nbsp;function&nbsp;you&nbsp;would&nbsp;like&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;such<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;visualization.<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Fvec:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Fvec_BA:<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;These&nbsp;must&nbsp;be&nbsp;set&nbsp;to&nbsp;a&nbsp;numpy&nbsp;vector&nbsp;(actually&nbsp;a&nbsp;numpy&nbsp;matrix<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;with&nbsp;just&nbsp;one&nbsp;column)&nbsp;whose&nbsp;elements&nbsp;are&nbsp;the&nbsp;"predictors"&nbsp;for<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;corresponding&nbsp;observed&nbsp;values&nbsp;in&nbsp;the&nbsp;X&nbsp;and&nbsp;the&nbsp;X_BA<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vectors,&nbsp;respectively.&nbsp;&nbsp;(We&nbsp;use&nbsp;the&nbsp;symbol&nbsp;'X'&nbsp;to&nbsp;denote&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vector&nbsp;of&nbsp;measured&nbsp;data,&nbsp;as&nbsp;you&nbsp;will&nbsp;soon&nbsp;see.&nbsp;X_BA&nbsp;does&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;same&nbsp;for&nbsp;the&nbsp;bundle-adjustment&nbsp;variant&nbsp;of&nbsp;the&nbsp;basic<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Levenberg-Marquardt&nbsp;algorithm.)&nbsp;Each&nbsp;element&nbsp;of&nbsp;Fvec&nbsp;and<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Fvec_BA&nbsp;is,&nbsp;in&nbsp;general,&nbsp;a&nbsp;function&nbsp;of&nbsp;all&nbsp;of&nbsp;the&nbsp;model<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parameters.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;initial_params_dict:<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;is&nbsp;set&nbsp;to&nbsp;a&nbsp;dictionary&nbsp;whose&nbsp;keys&nbsp;are&nbsp;the&nbsp;model&nbsp;parameters<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;whose&nbsp;values&nbsp;the&nbsp;initial&nbsp;values&nbsp;for&nbsp;the&nbsp;model&nbsp;parameters.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;initial&nbsp;values&nbsp;for&nbsp;the&nbsp;model&nbsp;parameters&nbsp;specify&nbsp;the&nbsp;point<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in&nbsp;the&nbsp;parameter&nbsp;hyperplane&nbsp;where&nbsp;you&nbsp;want&nbsp;to&nbsp;start&nbsp;the&nbsp;descent<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;the&nbsp;minimum.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;initial_param_values_file:<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;your&nbsp;problem&nbsp;involves&nbsp;a&nbsp;very&nbsp;large&nbsp;number&nbsp;of&nbsp;parameters,&nbsp;it<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;may&nbsp;be&nbsp;more&nbsp;convenient&nbsp;to&nbsp;place&nbsp;all&nbsp;their&nbsp;initial&nbsp;values&nbsp;in&nbsp;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text&nbsp;file.&nbsp;&nbsp;Each&nbsp;parameter&nbsp;and&nbsp;its&nbsp;initial&nbsp;value&nbsp;must&nbsp;be&nbsp;in&nbsp;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;line&nbsp;all&nbsp;by&nbsp;itself.&nbsp;&nbsp;See&nbsp;the&nbsp;file&nbsp;"initial_params_gd2.txt"&nbsp;in<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;Examples&nbsp;directory&nbsp;for&nbsp;how&nbsp;this&nbsp;file&nbsp;needs&nbsp;to&nbsp;be&nbsp;formatted.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jacobian_functionals_array:<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;you&nbsp;wish&nbsp;to&nbsp;specify&nbsp;the&nbsp;partial&nbsp;derivatives&nbsp;of&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;functional&nbsp;elements&nbsp;in&nbsp;the&nbsp;Fvec&nbsp;vector&nbsp;with&nbsp;respect&nbsp;to&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model&nbsp;parameters,&nbsp;you&nbsp;can&nbsp;supply&nbsp;those&nbsp;as&nbsp;a&nbsp;numpy&nbsp;chararray<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;through&nbsp;this&nbsp;constructor&nbsp;option.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;num_measurements:<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;is&nbsp;simply&nbsp;the&nbsp;number&nbsp;of&nbsp;data&nbsp;values&nbsp;(meaning&nbsp;the&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;number&nbsp;of&nbsp;measurements)&nbsp;in&nbsp;X.<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;num_parameters:<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;is&nbsp;the&nbsp;number&nbsp;of&nbsp;model&nbsp;parameters&nbsp;that&nbsp;you&nbsp;wish&nbsp;to&nbsp;calculate<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;with&nbsp;nonlinear&nbsp;least-squares.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;X:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;X_BA:<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;variable&nbsp;must&nbsp;be&nbsp;set&nbsp;to&nbsp;a&nbsp;numpy&nbsp;vector&nbsp;(actually&nbsp;a&nbsp;numpy<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matrix&nbsp;with&nbsp;just&nbsp;one&nbsp;column)&nbsp;whose&nbsp;elements&nbsp;constitute&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;observed&nbsp;data.&nbsp;&nbsp;The&nbsp;number&nbsp;of&nbsp;elements&nbsp;in&nbsp;X&nbsp;would&nbsp;equal&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;number&nbsp;of&nbsp;observed&nbsp;data&nbsp;elements&nbsp;that&nbsp;you&nbsp;are&nbsp;using&nbsp;for<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;calculating&nbsp;the&nbsp;optimum&nbsp;values&nbsp;of&nbsp;the&nbsp;model&nbsp;parameters.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Whereas&nbsp;the&nbsp;variable&nbsp;X&nbsp;stores&nbsp;the&nbsp;observations&nbsp;for&nbsp;any&nbsp;regular<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;application&nbsp;of&nbsp;the&nbsp;Levenberg-Marquardt&nbsp;algorithm,&nbsp;the&nbsp;variable<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;X_BA&nbsp;stores&nbsp;the&nbsp;observed&nbsp;data&nbsp;for&nbsp;the&nbsp;case&nbsp;when&nbsp;you&nbsp;want&nbsp;to&nbsp;use<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;bundle-adjustment&nbsp;variant&nbsp;of&nbsp;Levenberg-Marquardt.&nbsp;&nbsp;Whereas<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;generic&nbsp;Levenberg-Marquardt&nbsp;places&nbsp;no&nbsp;constraints&nbsp;on&nbsp;how<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;observations&nbsp;are&nbsp;arranged&nbsp;in&nbsp;the&nbsp;vector&nbsp;X,&nbsp;that&nbsp;is&nbsp;not&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;with&nbsp;the&nbsp;bundle-adjustment&nbsp;variant&nbsp;of&nbsp;the&nbsp;same&nbsp;algorithm.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Both&nbsp;X&nbsp;and&nbsp;M_BA&nbsp;must&nbsp;be&nbsp;a&nbsp;numpy&nbsp;vector,&nbsp;meaning&nbsp;a&nbsp;numpy&nbsp;matrix<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;with&nbsp;just&nbsp;one&nbsp;column.<br>
&nbsp;<br>
&nbsp;<br>
<font size=+2 color="red">METHODS:<br>
</font>&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;(1)&nbsp;&nbsp;grad_descent():<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;is&nbsp;the&nbsp;implementation&nbsp;of&nbsp;the&nbsp;basic&nbsp;gradient-descent<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;algorithm.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;(2)&nbsp;&nbsp;leven_marq():<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;is&nbsp;the&nbsp;implementation&nbsp;of&nbsp;the&nbsp;Levenberg-Marquardt&nbsp;algorithm<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mentioned&nbsp;in&nbsp;the&nbsp;Introduction&nbsp;section.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;(3)&nbsp;&nbsp;set_debug():<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;allow&nbsp;your&nbsp;own&nbsp;domain-specific&nbsp;class&nbsp;to&nbsp;set&nbsp;the&nbsp;'debug'<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;attribute&nbsp;of&nbsp;an&nbsp;instance&nbsp;of&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;(4)&nbsp;&nbsp;set_display_function():<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Some&nbsp;problem&nbsp;domains&nbsp;allow&nbsp;the&nbsp;result&nbsp;of&nbsp;a&nbsp;nonlinear&nbsp;least-squares<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;calculation&nbsp;to&nbsp;be&nbsp;displayed&nbsp;with&nbsp;2D&nbsp;or&nbsp;3D&nbsp;graphics.&nbsp;&nbsp;For&nbsp;example,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;the&nbsp;goal&nbsp;is&nbsp;to&nbsp;fit&nbsp;an&nbsp;analytical&nbsp;form&nbsp;(in&nbsp;the&nbsp;form&nbsp;of,&nbsp;say,&nbsp;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;polynomial)&nbsp;to&nbsp;noisy&nbsp;height&nbsp;data&nbsp;over&nbsp;a&nbsp;flat&nbsp;plane&nbsp;and&nbsp;you&nbsp;use&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nonlinear&nbsp;least-squares&nbsp;algorithm&nbsp;to&nbsp;calculate&nbsp;the&nbsp;best&nbsp;values&nbsp;for<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;parameters&nbsp;of&nbsp;the&nbsp;analytical&nbsp;form,&nbsp;you&nbsp;should&nbsp;be&nbsp;able&nbsp;to<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;visualize&nbsp;the&nbsp;quality&nbsp;of&nbsp;your&nbsp;results&nbsp;by&nbsp;displaying&nbsp;both&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;original&nbsp;noisy&nbsp;data&nbsp;and&nbsp;the&nbsp;model&nbsp;you&nbsp;fit&nbsp;to&nbsp;the&nbsp;data.&nbsp;&nbsp;When&nbsp;such&nbsp;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;visualization&nbsp;of&nbsp;the&nbsp;results&nbsp;is&nbsp;possible,&nbsp;you&nbsp;can&nbsp;pass&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;definition&nbsp;of&nbsp;the&nbsp;your&nbsp;display&nbsp;function&nbsp;through&nbsp;this&nbsp;setter<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;function.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;(5)&nbsp;&nbsp;set_Fvec():<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set_Fvec_BA()<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Each&nbsp;of&nbsp;these&nbsp;methods&nbsp;expects&nbsp;for&nbsp;its&nbsp;main&nbsp;argument&nbsp;a&nbsp;numpy&nbsp;matrix<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;with&nbsp;a&nbsp;single&nbsp;column&nbsp;whose&nbsp;each&nbsp;element&nbsp;must&nbsp;be&nbsp;a&nbsp;functional&nbsp;form<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;that&nbsp;predicts&nbsp;the&nbsp;corresponding&nbsp;element&nbsp;in&nbsp;the&nbsp;measurement&nbsp;vector<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;X&nbsp;or&nbsp;X_BA.&nbsp;&nbsp;These&nbsp;functional&nbsp;forms&nbsp;will&nbsp;be&nbsp;functions&nbsp;of&nbsp;the&nbsp;model<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parameters.&nbsp;&nbsp;The&nbsp;first&nbsp;of&nbsp;the&nbsp;two&nbsp;methods&nbsp;is&nbsp;for&nbsp;the&nbsp;regular<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;implementation&nbsp;of&nbsp;the&nbsp;Levenberg-Marquardt&nbsp;algorithm&nbsp;and&nbsp;the&nbsp;second<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;the&nbsp;bundle-adjustment&nbsp;variant&nbsp;of&nbsp;the&nbsp;same.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;(6)&nbsp;&nbsp;set_initial_params():<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;method&nbsp;expects&nbsp;for&nbsp;its&nbsp;main&nbsp;argument&nbsp;a&nbsp;dictionary&nbsp;of<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;key,value&gt;&nbsp;pairs&nbsp;in&nbsp;which&nbsp;the&nbsp;keys&nbsp;are&nbsp;the&nbsp;model&nbsp;parameters&nbsp;and<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;the&nbsp;corresponding&nbsp;values&nbsp;the&nbsp;initial&nbsp;values&nbsp;to&nbsp;be&nbsp;given&nbsp;to<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;those&nbsp;parameters.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;(7)&nbsp;&nbsp;set_jacobian_functionals_array():<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;method&nbsp;expects&nbsp;for&nbsp;its&nbsp;argument&nbsp;an&nbsp;Nxp&nbsp;matrix&nbsp;of&nbsp;functionals<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;the&nbsp;partial&nbsp;derivatives&nbsp;needed&nbsp;for&nbsp;the&nbsp;Jacobian&nbsp;matrix.&nbsp;&nbsp;N&nbsp;is<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;number&nbsp;of&nbsp;data&nbsp;elements&nbsp;in&nbsp;the&nbsp;X&nbsp;vector&nbsp;and&nbsp;p&nbsp;is&nbsp;the&nbsp;number&nbsp;of<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parameters&nbsp;in&nbsp;the&nbsp;model.&nbsp;&nbsp;To&nbsp;elaborate,&nbsp;if&nbsp;you&nbsp;are&nbsp;using&nbsp;nonlinear<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;least-squares&nbsp;to&nbsp;fit&nbsp;an&nbsp;optimal&nbsp;surface&nbsp;to&nbsp;noisy&nbsp;height&nbsp;values<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;over&nbsp;the&nbsp;xy-plane,&nbsp;your&nbsp;X&nbsp;vector&nbsp;will&nbsp;be&nbsp;a&nbsp;single-column&nbsp;numpy<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matrix&nbsp;and&nbsp;each&nbsp;row&nbsp;of&nbsp;this&nbsp;vector&nbsp;would&nbsp;correspond&nbsp;to&nbsp;one&nbsp;height<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value&nbsp;at&nbsp;some&nbsp;(x,y)&nbsp;point.&nbsp;The&nbsp;corresponding&nbsp;row&nbsp;in&nbsp;the&nbsp;argument<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jacobian_functionals_array&nbsp;contains&nbsp;p&nbsp;functionals,&nbsp;with&nbsp;each<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;functional&nbsp;being&nbsp;a&nbsp;partial&nbsp;derivative&nbsp;of&nbsp;the&nbsp;model&nbsp;functional<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(with&nbsp;its&nbsp;x&nbsp;and&nbsp;y&nbsp;set&nbsp;according&nbsp;to&nbsp;where&nbsp;the&nbsp;height&nbsp;was&nbsp;recorded)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;with&nbsp;respect&nbsp;to&nbsp;the&nbsp;parameter&nbsp;corresponding&nbsp;to&nbsp;the&nbsp;column&nbsp;index.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;(8)&nbsp;&nbsp;set_num_measurements():<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;method&nbsp;sets&nbsp;the&nbsp;number&nbsp;of&nbsp;data&nbsp;elements&nbsp;in&nbsp;the&nbsp;X&nbsp;vector&nbsp;in<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;instance&nbsp;of&nbsp;the&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>&nbsp;on&nbsp;which&nbsp;the&nbsp;method&nbsp;is<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;invoked.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;(9)&nbsp;&nbsp;set_num_parameters():<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;method&nbsp;sets&nbsp;the&nbsp;number&nbsp;of&nbsp;model&nbsp;parameters&nbsp;that&nbsp;will&nbsp;be&nbsp;used<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in&nbsp;the&nbsp;nonlinear&nbsp;least-squares&nbsp;optimization.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;(10)&nbsp;set_X():<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set_X_BA():<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;These&nbsp;two&nbsp;methods&nbsp;set&nbsp;the&nbsp;data&nbsp;vector,&nbsp;in&nbsp;the&nbsp;form&nbsp;of&nbsp;a&nbsp;numpy<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matrix&nbsp;consisting&nbsp;of&nbsp;only&nbsp;one&nbsp;column,&nbsp;in&nbsp;an&nbsp;instance&nbsp;of<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>.&nbsp;&nbsp;The&nbsp;first&nbsp;of&nbsp;these&nbsp;for&nbsp;the&nbsp;regular<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;implementation&nbsp;of&nbsp;the&nbsp;Levenberg-Marquardt&nbsp;algorithm&nbsp;and&nbsp;the&nbsp;second<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;the&nbsp;bundle-adjustment&nbsp;version&nbsp;of&nbsp;the&nbsp;same.&nbsp;&nbsp;This&nbsp;is&nbsp;the&nbsp;data<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;which&nbsp;you&nbsp;which&nbsp;you&nbsp;want&nbsp;to&nbsp;fit&nbsp;a&nbsp;given&nbsp;model&nbsp;and&nbsp;you&nbsp;want<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>&nbsp;to&nbsp;estimate&nbsp;the&nbsp;best&nbsp;values&nbsp;for&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parameters&nbsp;of&nbsp;the&nbsp;model.<br>
&nbsp;<br>
<font size=+2 color="red">OPTIMIZED&nbsp;SURFACE&nbsp;FITTING:<br>
</font>&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;section&nbsp;presents&nbsp;a&nbsp;class&nbsp;named&nbsp;OptimizedSurfaceFit&nbsp;to&nbsp;illustrate<br>
&nbsp;&nbsp;&nbsp;&nbsp;how&nbsp;you&nbsp;can&nbsp;use&nbsp;the&nbsp;functionality&nbsp;of&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>&nbsp;in&nbsp;your&nbsp;own<br>
&nbsp;&nbsp;&nbsp;&nbsp;code.&nbsp;&nbsp;The&nbsp;goal&nbsp;of&nbsp;OptimizedSurfaceFit&nbsp;is&nbsp;to&nbsp;fit&nbsp;a&nbsp;model&nbsp;surface&nbsp;to<br>
&nbsp;&nbsp;&nbsp;&nbsp;noisy&nbsp;height&nbsp;data&nbsp;over&nbsp;the&nbsp;xy-plane&nbsp;in&nbsp;the&nbsp;xyz-coordinate&nbsp;frame,&nbsp;with<br>
&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;model&nbsp;surface&nbsp;being&nbsp;described&nbsp;by&nbsp;a&nbsp;polynomial&nbsp;function.&nbsp;&nbsp;Here&nbsp;are<br>
&nbsp;&nbsp;&nbsp;&nbsp;some&nbsp;examples&nbsp;of&nbsp;such&nbsp;polynomials:<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"a*(x-b)**2&nbsp;+&nbsp;c*(y-d)**2&nbsp;+&nbsp;e"<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"a*x**2&nbsp;+&nbsp;c*y**2"<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"a*x&nbsp;+&nbsp;b*y&nbsp;+&nbsp;c"<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;where&nbsp;the&nbsp;value&nbsp;returned&nbsp;by&nbsp;the&nbsp;polynomial&nbsp;for&nbsp;given&nbsp;values&nbsp;of&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;coordinate&nbsp;pair&nbsp;(x,y)&nbsp;is&nbsp;the&nbsp;height&nbsp;above&nbsp;the&nbsp;xy-plane&nbsp;at&nbsp;that&nbsp;point.<br>
&nbsp;&nbsp;&nbsp;&nbsp;Given&nbsp;the&nbsp;sort&nbsp;of&nbsp;a&nbsp;model&nbsp;surface&nbsp;shown&nbsp;above,&nbsp;the&nbsp;problem&nbsp;becomes&nbsp;one<br>
&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;optimally&nbsp;estimating&nbsp;the&nbsp;value&nbsp;for&nbsp;the&nbsp;model&nbsp;parameters&nbsp;from&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;noisy&nbsp;observed&nbsp;data.&nbsp;&nbsp;If&nbsp;vector&nbsp;X&nbsp;represents&nbsp;the&nbsp;measured&nbsp;data&nbsp;over&nbsp;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;set&nbsp;of&nbsp;(x,y)&nbsp;points&nbsp;in&nbsp;the&nbsp;form&nbsp;of&nbsp;a&nbsp;vector&nbsp;of&nbsp;observations,&nbsp;we&nbsp;can&nbsp;now<br>
&nbsp;&nbsp;&nbsp;&nbsp;write&nbsp;for&nbsp;the&nbsp;cost&nbsp;function:<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;d^2&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;&nbsp;&nbsp;&nbsp;||&nbsp;X&nbsp;&nbsp;-&nbsp;&nbsp;Fvec&nbsp;||^2<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;where&nbsp;Fvec&nbsp;is&nbsp;a&nbsp;vector&nbsp;of&nbsp;the&nbsp;predictions&nbsp;as&nbsp;dictated&nbsp;by&nbsp;the&nbsp;model&nbsp;at<br>
&nbsp;&nbsp;&nbsp;&nbsp;each&nbsp;of&nbsp;the&nbsp;(x,y)&nbsp;point.&nbsp;&nbsp;That&nbsp;is,&nbsp;each&nbsp;element&nbsp;of&nbsp;the&nbsp;Fvec&nbsp;vector&nbsp;is&nbsp;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;prediction&nbsp;for&nbsp;the&nbsp;corresponding&nbsp;element&nbsp;of&nbsp;the&nbsp;measurement&nbsp;vector&nbsp;X.<br>
&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;quantity&nbsp;d^2&nbsp;is&nbsp;the&nbsp;square&nbsp;of&nbsp;the&nbsp;vector&nbsp;norm&nbsp;of&nbsp;the&nbsp;prediction<br>
&nbsp;&nbsp;&nbsp;&nbsp;error,&nbsp;meaning&nbsp;the&nbsp;difference&nbsp;between&nbsp;the&nbsp;observations&nbsp;in&nbsp;X&nbsp;and&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;predictions&nbsp;in&nbsp;Fvec.&nbsp;&nbsp;Given&nbsp;X&nbsp;and&nbsp;Fvec&nbsp;vectors,&nbsp;We&nbsp;can&nbsp;call&nbsp;on<br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>&nbsp;to&nbsp;help&nbsp;us&nbsp;find&nbsp;the&nbsp;best&nbsp;values&nbsp;for&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;parameters&nbsp;of&nbsp;the&nbsp;model&nbsp;surface.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;A&nbsp;typical&nbsp;call&nbsp;to&nbsp;OptimizedSurfaceFit's&nbsp;constructor&nbsp;looks&nbsp;like:<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;surface_fitter&nbsp;=&nbsp;OptimizedSurfaceFit(&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gen_data_synthetically&nbsp;=&nbsp;True,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;datagen_functional&nbsp;=&nbsp;"7.8*(x&nbsp;-&nbsp;0.5)**3&nbsp;+&nbsp;2.2*(y&nbsp;-&nbsp;0.5)**2",<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data_array_size&nbsp;=&nbsp;(16,16),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;how_much_noise_for_synthetic_data&nbsp;=&nbsp;0.7,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model_functional&nbsp;=&nbsp;"a*(x-b)**3&nbsp;+&nbsp;c*(y-d)**2",<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;initial_param_values&nbsp;=&nbsp;{'a':2.0,&nbsp;'b':0.4,&nbsp;'c':0.8,&nbsp;'d':0.4},<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;display_needed&nbsp;=&nbsp;True,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;display_size&nbsp;=&nbsp;(12,8),&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;display_position&nbsp;=&nbsp;(500,300),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;debug&nbsp;=&nbsp;True,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;or,&nbsp;if&nbsp;you&nbsp;wish&nbsp;to&nbsp;also&nbsp;supply&nbsp;the&nbsp;partial&nbsp;derivatives&nbsp;of&nbsp;the&nbsp;model<br>
&nbsp;&nbsp;&nbsp;&nbsp;functional&nbsp;that&nbsp;can&nbsp;be&nbsp;used&nbsp;by&nbsp;OptimizedSurfaceFit&nbsp;for&nbsp;specifying&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;Jacobian&nbsp;matrix&nbsp;to&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>,&nbsp;like<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;surface_fitter&nbsp;=&nbsp;OptimizedSurfaceFit(<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gen_data_synthetically&nbsp;=&nbsp;True,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;datagen_functional&nbsp;=&nbsp;"7.8*(x&nbsp;-&nbsp;0.5)**3&nbsp;+&nbsp;2.2*(y&nbsp;-&nbsp;0.5)**2",<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data_array_size&nbsp;=&nbsp;(16,16),&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;how_much_noise_for_synthetic_data&nbsp;=&nbsp;0.5,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model_functional&nbsp;=&nbsp;"a*(x-b)**3&nbsp;+&nbsp;c*(y-d)**2",<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;initial_param_values&nbsp;=&nbsp;{'a':2.0,&nbsp;'b':0.4,&nbsp;'c':0.8,&nbsp;'d':0.4},<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;partials_for_jacobian&nbsp;=&nbsp;{'a':'(x-b)**2',&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'b':'-2*a*(x-b)',&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'c':'(y-d)**2',&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'d':'-2*c*(y-d)'},&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;display_needed&nbsp;=&nbsp;True,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;display_size&nbsp;=&nbsp;(12,8),&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;display_position&nbsp;=&nbsp;(500,300),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;With&nbsp;regard&nbsp;to&nbsp;the&nbsp;constructor&nbsp;option&nbsp;'partials_for_jacobian',&nbsp;it&nbsp;is<br>
&nbsp;&nbsp;&nbsp;&nbsp;important&nbsp;to&nbsp;realize&nbsp;that&nbsp;what&nbsp;is&nbsp;passed&nbsp;to&nbsp;OptimizedSurfaceFit's<br>
&nbsp;&nbsp;&nbsp;&nbsp;constructor&nbsp;is&nbsp;not&nbsp;directly&nbsp;the&nbsp;Nxp&nbsp;Jacobian&nbsp;matrix&nbsp;(where&nbsp;N&nbsp;is&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;number&nbsp;of&nbsp;observations&nbsp;in&nbsp;X&nbsp;and&nbsp;p&nbsp;the&nbsp;number&nbsp;of&nbsp;parameters&nbsp;in&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;model).&nbsp;&nbsp;Instead,&nbsp;it&nbsp;is&nbsp;a&nbsp;set&nbsp;of&nbsp;partial&nbsp;derivatives&nbsp;of&nbsp;the&nbsp;model<br>
&nbsp;&nbsp;&nbsp;&nbsp;functional&nbsp;with&nbsp;respect&nbsp;to&nbsp;the&nbsp;parameters&nbsp;of&nbsp;the&nbsp;functional.&nbsp;&nbsp;However,<br>
&nbsp;&nbsp;&nbsp;&nbsp;OptimizedSurfaceFit&nbsp;knows&nbsp;how&nbsp;to&nbsp;translate&nbsp;into&nbsp;an&nbsp;Nxp&nbsp;numpy&nbsp;chararray<br>
&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;the&nbsp;functionals&nbsp;needed&nbsp;for&nbsp;the&nbsp;Jacobian.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;constructor&nbsp;options&nbsp;for&nbsp;the&nbsp;OptimizedSurfaceFit&nbsp;class:<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data_array_size:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;synthetic&nbsp;height&nbsp;that&nbsp;is&nbsp;generated&nbsp;by&nbsp;OptimizedSurfaceFit&nbsp;is<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;over&nbsp;a&nbsp;unit&nbsp;square&nbsp;in&nbsp;the&nbsp;xy-plane.&nbsp;Both&nbsp;the&nbsp;x&nbsp;and&nbsp;the&nbsp;y<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;coordinates&nbsp;of&nbsp;this&nbsp;square&nbsp;range&nbsp;over&nbsp;the&nbsp;interval&nbsp;0.0&nbsp;to&nbsp;1.0.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;you&nbsp;set&nbsp;this&nbsp;constructor&nbsp;option&nbsp;to,&nbsp;say,&nbsp;(16,16),&nbsp;the&nbsp;unit<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;square&nbsp;will&nbsp;be&nbsp;sampled&nbsp;over&nbsp;a&nbsp;16x16&nbsp;grid.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;datagen_functional:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;When&nbsp;gen_data_synthetically&nbsp;is&nbsp;set&nbsp;to&nbsp;True,&nbsp;you&nbsp;must&nbsp;supply&nbsp;an<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;algebraic&nbsp;expression&nbsp;in&nbsp;the&nbsp;form&nbsp;of&nbsp;a&nbsp;string&nbsp;that<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OptimizedSurfaceFit&nbsp;can&nbsp;use&nbsp;to&nbsp;generate&nbsp;the&nbsp;height&nbsp;data.&nbsp;&nbsp;Here<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is&nbsp;an&nbsp;example&nbsp;of&nbsp;what&nbsp;such&nbsp;a&nbsp;string&nbsp;looks&nbsp;like:<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"7.8*(x&nbsp;-&nbsp;0.5)**3&nbsp;+&nbsp;2.2*(y&nbsp;-&nbsp;0.5)**2"<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;You&nbsp;can&nbsp;call&nbsp;any&nbsp;function&nbsp;inside&nbsp;the&nbsp;string&nbsp;that&nbsp;the&nbsp;Python<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;math&nbsp;library&nbsp;knows&nbsp;about.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;debug:<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;flag&nbsp;is&nbsp;passed&nbsp;on&nbsp;to&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>.&nbsp;&nbsp;When&nbsp;set&nbsp;to<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;True,&nbsp;it&nbsp;causes&nbsp;that&nbsp;class&nbsp;to&nbsp;display&nbsp;useful&nbsp;information&nbsp;during<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;each&nbsp;iteration&nbsp;of&nbsp;the&nbsp;nonlinear&nbsp;least-squares&nbsp;algorithm.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;display_needed:<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Fitting&nbsp;optimal&nbsp;surfaces&nbsp;to&nbsp;height&nbsp;data&nbsp;lends&nbsp;itself&nbsp;well&nbsp;to&nbsp;3D<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;visualization.&nbsp;&nbsp;So&nbsp;if&nbsp;you'd&nbsp;like&nbsp;to&nbsp;see&nbsp;the&nbsp;the&nbsp;surfaces&nbsp;that<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;correspond&nbsp;to&nbsp;the&nbsp;optimal&nbsp;values&nbsp;for&nbsp;the&nbsp;model&nbsp;parameters,&nbsp;set<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this&nbsp;constructor&nbsp;option&nbsp;to&nbsp;True.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;display_position:<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;It&nbsp;is&nbsp;set&nbsp;to&nbsp;a&nbsp;tuple&nbsp;of&nbsp;two&nbsp;integers,&nbsp;with&nbsp;the&nbsp;first&nbsp;integer<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;specifying&nbsp;the&nbsp;horizontal&nbsp;coordinate&nbsp;and&nbsp;the&nbsp;second&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vertical&nbsp;coordinate&nbsp;of&nbsp;the&nbsp;upper&nbsp;left&nbsp;corner&nbsp;of&nbsp;the&nbsp;display.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;These&nbsp;two&nbsp;coordinate&nbsp;values&nbsp;are&nbsp;with&nbsp;respect&nbsp;to&nbsp;the&nbsp;upper&nbsp;left<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;corner&nbsp;of&nbsp;your&nbsp;terminal&nbsp;screen.&nbsp;Horizontal&nbsp;coordinates&nbsp;are<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;positive&nbsp;to&nbsp;the&nbsp;right&nbsp;and&nbsp;vertical&nbsp;coordinates&nbsp;positive<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointing&nbsp;down.&nbsp;&nbsp;Setting&nbsp;this&nbsp;constructor&nbsp;parameter&nbsp;is&nbsp;optional.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;not&nbsp;set,&nbsp;matplotlib&nbsp;will&nbsp;use&nbsp;its&nbsp;default&nbsp;values.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;display_size:<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;It&nbsp;is&nbsp;set&nbsp;to&nbsp;a&nbsp;tuple&nbsp;of&nbsp;two&nbsp;integers,&nbsp;with&nbsp;the&nbsp;first&nbsp;integer<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;specifying&nbsp;the&nbsp;width&nbsp;and&nbsp;the&nbsp;second&nbsp;the&nbsp;height&nbsp;of&nbsp;the&nbsp;display.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Setting&nbsp;this&nbsp;constructor&nbsp;parameter&nbsp;is&nbsp;optional.&nbsp;&nbsp;If&nbsp;not&nbsp;set,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matplotlib&nbsp;will&nbsp;use&nbsp;its&nbsp;default&nbsp;values.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gen_data_synthetically:<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;set&nbsp;to&nbsp;True,&nbsp;OptimizedSurfaceFit&nbsp;can&nbsp;generate&nbsp;the&nbsp;measurement<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;height&nbsp;data&nbsp;for&nbsp;your&nbsp;synthetically&nbsp;according&nbsp;to&nbsp;the&nbsp;function<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;you&nbsp;specify&nbsp;through&nbsp;the&nbsp;constructor&nbsp;option&nbsp;'datagen_functional'.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;how_much_noise_for_synthetic_data:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;option&nbsp;controls&nbsp;the&nbsp;amount&nbsp;of&nbsp;noise&nbsp;that&nbsp;is&nbsp;added&nbsp;to&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;height&nbsp;data&nbsp;generated&nbsp;according&nbsp;to&nbsp;the&nbsp;datagen_functional.&nbsp;&nbsp;The<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;best&nbsp;way&nbsp;to&nbsp;give&nbsp;a&nbsp;meaningful&nbsp;value&nbsp;to&nbsp;this&nbsp;construction&nbsp;option<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is&nbsp;to&nbsp;set&nbsp;to&nbsp;some&nbsp;fraction&nbsp;of&nbsp;the&nbsp;largest&nbsp;coefficient&nbsp;in&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;datagen_functional.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;initial_param_values:&nbsp;&nbsp;&nbsp;<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Through&nbsp;this&nbsp;option,&nbsp;you&nbsp;can&nbsp;transmit&nbsp;to&nbsp;OptimizedSurfaceFit&nbsp;your<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;initial&nbsp;guesses&nbsp;for&nbsp;the&nbsp;values&nbsp;of&nbsp;the&nbsp;parameters&nbsp;in&nbsp;the&nbsp;model<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;functional.&nbsp;&nbsp;If&nbsp;you&nbsp;cannot&nbsp;think&nbsp;of&nbsp;a&nbsp;guess,&nbsp;you&nbsp;try&nbsp;setting&nbsp;all<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;parameters&nbsp;to&nbsp;zero.&nbsp;&nbsp;OptimizedSurfaceFit&nbsp;conveys&nbsp;your&nbsp;initial<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;values&nbsp;for&nbsp;the&nbsp;parameters&nbsp;to&nbsp;the&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>&nbsp;class.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;You&nbsp;express&nbsp;the&nbsp;initial&nbsp;values&nbsp;in&nbsp;the&nbsp;form&nbsp;of&nbsp;a&nbsp;dictionary,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;whole&nbsp;keys&nbsp;are&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;parameters&nbsp;and&nbsp;whose&nbsp;values&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;initial&nbsp;values&nbsp;to&nbsp;be&nbsp;given&nbsp;to&nbsp;those&nbsp;parameters.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;initial_param_values_file:<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;the&nbsp;number&nbsp;of&nbsp;parameters&nbsp;in&nbsp;the&nbsp;problem&nbsp;you&nbsp;are&nbsp;addressing&nbsp;is<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;large,&nbsp;it&nbsp;may&nbsp;be&nbsp;more&nbsp;convenient&nbsp;to&nbsp;supply&nbsp;the&nbsp;initial&nbsp;values<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;the&nbsp;parameters&nbsp;through&nbsp;a&nbsp;text&nbsp;file.&nbsp;<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;measured_data_file:<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;the&nbsp;amount&nbsp;of&nbsp;measured&nbsp;data&nbsp;is&nbsp;large,&nbsp;it&nbsp;may&nbsp;be&nbsp;more&nbsp;convenient<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;feed&nbsp;it&nbsp;into&nbsp;the&nbsp;module&nbsp;through&nbsp;a&nbsp;text&nbsp;file.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model_functional:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;is&nbsp;the&nbsp;algebraic&nbsp;expression&nbsp;that&nbsp;we&nbsp;want&nbsp;to&nbsp;fit&nbsp;to&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;noisy&nbsp;height&nbsp;data.&nbsp;&nbsp;OptimizedSurfaceFit&nbsp;will&nbsp;call&nbsp;on<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>&nbsp;to&nbsp;estimate&nbsp;the&nbsp;best&nbsp;values&nbsp;for&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parameters&nbsp;of&nbsp;this&nbsp;algebraic&nbsp;expression.&nbsp;&nbsp;For&nbsp;example,&nbsp;if&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model_functional&nbsp;is&nbsp;"a*(x-b)**3&nbsp;+&nbsp;c*(y-d)**2",&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>&nbsp;will&nbsp;find&nbsp;the&nbsp;best&nbsp;possible&nbsp;values&nbsp;for&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parameters&nbsp;a,&nbsp;b,&nbsp;c,&nbsp;and&nbsp;d&nbsp;---&nbsp;best&nbsp;in&nbsp;the&nbsp;sense&nbsp;of&nbsp;minimizing<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;cost&nbsp;function&nbsp;described&nbsp;previously.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model_functional_file:<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;the&nbsp;model&nbsp;functional&nbsp;is&nbsp;too&nbsp;long&nbsp;and/or&nbsp;too&nbsp;complex&nbsp;to&nbsp;be<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;specified&nbsp;as&nbsp;an&nbsp;option&nbsp;directly&nbsp;in&nbsp;a&nbsp;call&nbsp;to&nbsp;the&nbsp;constructor,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;you&nbsp;can&nbsp;also&nbsp;place&nbsp;it&nbsp;in&nbsp;a&nbsp;text&nbsp;file&nbsp;through&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model_functional_file&nbsp;option.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;optimizer:<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Through&nbsp;this&nbsp;constructor&nbsp;option,&nbsp;you&nbsp;can&nbsp;have&nbsp;an&nbsp;instance<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;variable&nbsp;of&nbsp;the&nbsp;same&nbsp;name&nbsp;to&nbsp;hold&nbsp;a&nbsp;reference&nbsp;to&nbsp;an&nbsp;instance&nbsp;of<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;partials_for_jacobian:<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Although&nbsp;the&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>&nbsp;class&nbsp;can&nbsp;numerically<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;estimate&nbsp;the&nbsp;partial&nbsp;derivatives&nbsp;of&nbsp;the&nbsp;element&nbsp;of&nbsp;the&nbsp;Fvec<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vector&nbsp;with&nbsp;respect&nbsp;to&nbsp;the&nbsp;model&nbsp;parameters,&nbsp;with&nbsp;this&nbsp;option<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;you&nbsp;can&nbsp;supply&nbsp;your&nbsp;own&nbsp;analytical&nbsp;forms&nbsp;for&nbsp;the&nbsp;partial<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;derivatives&nbsp;that&nbsp;OptimizedSurfaceFit&nbsp;can&nbsp;convert&nbsp;into&nbsp;a&nbsp;Jacobian<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matrix&nbsp;before&nbsp;transmitting&nbsp;it&nbsp;to&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Here&nbsp;are&nbsp;the&nbsp;methods&nbsp;defined&nbsp;for&nbsp;OptimizedSurfaceFit:<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(1)&nbsp;construct_Fvec():<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;method&nbsp;constructs&nbsp;the&nbsp;Fvec&nbsp;vector&nbsp;that<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>&nbsp;needs&nbsp;for&nbsp;comparing&nbsp;with&nbsp;the&nbsp;measurement<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vector&nbsp;X.&nbsp;Each&nbsp;element&nbsp;of&nbsp;Fvec&nbsp;is&nbsp;a&nbsp;prediction&nbsp;for&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;corresponding&nbsp;element&nbsp;of&nbsp;X&nbsp;and&nbsp;this&nbsp;prediction&nbsp;is&nbsp;a&nbsp;functional<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;form&nbsp;involving&nbsp;model&nbsp;parameters.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(2)&nbsp;construct_jacobian_array_in_functional_form():<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;method&nbsp;is&nbsp;used&nbsp;only&nbsp;when&nbsp;the&nbsp;user&nbsp;supplies&nbsp;analytical<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;forms&nbsp;for&nbsp;the&nbsp;partial&nbsp;derivatives&nbsp;of&nbsp;the&nbsp;model&nbsp;functional&nbsp;with<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;respect&nbsp;to&nbsp;each&nbsp;of&nbsp;the&nbsp;model&nbsp;parameters.&nbsp;&nbsp;(When&nbsp;the&nbsp;user&nbsp;does<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;not&nbsp;supply&nbsp;such&nbsp;partial&nbsp;derivatives,&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;estimates&nbsp;the&nbsp;Jacobian&nbsp;through&nbsp;numerical&nbsp;approximations.)<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(3)&nbsp;display_function()<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;problem&nbsp;addressed&nbsp;by&nbsp;OptimizedSurfaceFit&nbsp;lends&nbsp;itself&nbsp;well<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;visualization&nbsp;of&nbsp;the&nbsp;quality&nbsp;of&nbsp;the&nbsp;results&nbsp;returned&nbsp;by<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>.&nbsp;&nbsp;With&nbsp;the&nbsp;definition&nbsp;for&nbsp;this&nbsp;method<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;that&nbsp;is&nbsp;provided,&nbsp;you&nbsp;can&nbsp;see&nbsp;how&nbsp;well&nbsp;the&nbsp;model&nbsp;parameters<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;estimated&nbsp;by&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>&nbsp;fit&nbsp;the&nbsp;noisy&nbsp;height&nbsp;data.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(4)&nbsp;gen_data():<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;method&nbsp;generates&nbsp;the&nbsp;height&nbsp;data&nbsp;over&nbsp;the&nbsp;xy-plane<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;according&nbsp;to&nbsp;the&nbsp;analytical&nbsp;form&nbsp;that&nbsp;is&nbsp;supplied&nbsp;to&nbsp;it&nbsp;as&nbsp;its<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;main&nbsp;argument.&nbsp;&nbsp;We&nbsp;refer&nbsp;to&nbsp;this&nbsp;analytical&nbsp;form&nbsp;as&nbsp;the&nbsp;'model<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;functional'.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(5)&nbsp;get_initial_params_from_file():<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;you&nbsp;want&nbsp;to&nbsp;use&nbsp;model&nbsp;functions&nbsp;that&nbsp;have&nbsp;a&nbsp;large&nbsp;number&nbsp;of<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parameters,&nbsp;it&nbsp;might&nbsp;be&nbsp;easier&nbsp;to&nbsp;place&nbsp;their&nbsp;values&nbsp;in&nbsp;a&nbsp;text<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file&nbsp;and&nbsp;have&nbsp;OptimizedSurfaceFit&nbsp;get&nbsp;it&nbsp;from&nbsp;the&nbsp;file&nbsp;by&nbsp;using<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this&nbsp;method.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(6)&nbsp;get_measured_data_from_text_file():<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;you&nbsp;would&nbsp;like&nbsp;to&nbsp;supply&nbsp;the&nbsp;height&nbsp;data&nbsp;through&nbsp;a&nbsp;text&nbsp;file<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(rather&nbsp;than&nbsp;have&nbsp;the&nbsp;class&nbsp;generate&nbsp;it&nbsp;automatically&nbsp;for&nbsp;you),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;then&nbsp;this&nbsp;is&nbsp;the&nbsp;method&nbsp;to&nbsp;call&nbsp;for&nbsp;reading&nbsp;in&nbsp;the&nbsp;data&nbsp;from<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;file.&nbsp;&nbsp;The&nbsp;method&nbsp;assumes&nbsp;that&nbsp;that&nbsp;individual&nbsp;data<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elements&nbsp;are&nbsp;separated&nbsp;by&nbsp;whitespace&nbsp;characters&nbsp;(space,&nbsp;tab,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;newline,&nbsp;etc.).&nbsp;&nbsp;Since&nbsp;OptimizedSurfaceFit&nbsp;knows&nbsp;about&nbsp;the&nbsp;size<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;the&nbsp;array&nbsp;both&nbsp;along&nbsp;the&nbsp;x-coordinate&nbsp;and&nbsp;along&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y-coordinate,&nbsp;it&nbsp;knows&nbsp;how&nbsp;to&nbsp;interpret&nbsp;the&nbsp;data&nbsp;in&nbsp;the&nbsp;text<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(7)&nbsp;get_model_functional_from_file():<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;the&nbsp;model&nbsp;functional&nbsp;is&nbsp;too&nbsp;long,&nbsp;you&nbsp;can&nbsp;get<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OptimizedSurfaceFit&nbsp;to&nbsp;read&nbsp;it&nbsp;from&nbsp;a&nbsp;text&nbsp;file&nbsp;by&nbsp;using&nbsp;this<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;option.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(8)&nbsp;set_constructor_options_for_optimizer()<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;responsibility&nbsp;of&nbsp;this&nbsp;method&nbsp;is&nbsp;to&nbsp;take&nbsp;all&nbsp;of&nbsp;the&nbsp;user<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;supplied&nbsp;information&nbsp;and&nbsp;reconstitute&nbsp;it&nbsp;into&nbsp;a&nbsp;form&nbsp;that&nbsp;is<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;needed&nbsp;by&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>&nbsp;taking&nbsp;into&nbsp;account&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;peculiarities&nbsp;of&nbsp;your&nbsp;domain.<br>
&nbsp;<br>
&nbsp;<br>
<font size=+2 color="red">ESTIMATING&nbsp;SCENE&nbsp;STRUCTURE&nbsp;WHEN&nbsp;USING&nbsp;A&nbsp;CALIBRATED&nbsp;<br>
CAMERA&nbsp;IN&nbsp;MOTION:<br>
</font>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;section&nbsp;presents&nbsp;a&nbsp;class&nbsp;named&nbsp;ProjectiveCamera&nbsp;to&nbsp;illustrate&nbsp;how<br>
&nbsp;&nbsp;&nbsp;&nbsp;you&nbsp;can&nbsp;use&nbsp;the&nbsp;functionality&nbsp;of&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>&nbsp;in&nbsp;your&nbsp;own&nbsp;code<br>
&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;estimating&nbsp;the&nbsp;structure&nbsp;of&nbsp;a&nbsp;3D&nbsp;scene&nbsp;from&nbsp;the&nbsp;data&nbsp;recorded&nbsp;by&nbsp;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;calibrated&nbsp;camera&nbsp;in&nbsp;motion.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;To&nbsp;create&nbsp;a&nbsp;simulated&nbsp;structure-from-camera-motion&nbsp;demonstration&nbsp;with<br>
&nbsp;&nbsp;&nbsp;&nbsp;this&nbsp;module,&nbsp;you&nbsp;must&nbsp;first&nbsp;create&nbsp;an&nbsp;instance&nbsp;the&nbsp;ProjectiveCamera<br>
&nbsp;&nbsp;&nbsp;&nbsp;class.&nbsp;&nbsp;A&nbsp;typical&nbsp;call&nbsp;to&nbsp;ProjectiveCamera's&nbsp;constructor&nbsp;looks&nbsp;like:<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;camera&nbsp;=&nbsp;ProjectiveCamera.ProjectiveCamera(<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;camera_type&nbsp;=&nbsp;'projective',<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;alpha_x&nbsp;=&nbsp;1000.0,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;alpha_y&nbsp;=&nbsp;1000.0,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x0&nbsp;=&nbsp;300.0,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y0&nbsp;=&nbsp;250.0,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;camera.initialize()<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;returns&nbsp;a&nbsp;camera&nbsp;whose&nbsp;optic&nbsp;axis&nbsp;is&nbsp;aligned&nbsp;with&nbsp;the&nbsp;world-Z&nbsp;axis<br>
&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;whose&nbsp;image&nbsp;plane&nbsp;is&nbsp;parallel&nbsp;to&nbsp;the&nbsp;world-XY&nbsp;plane.&nbsp;The&nbsp;parameters<br>
&nbsp;&nbsp;&nbsp;&nbsp;'alpha_x'&nbsp;and&nbsp;'alpha_y'&nbsp;are&nbsp;for&nbsp;the&nbsp;focal&nbsp;length&nbsp;of&nbsp;the&nbsp;camera&nbsp;in&nbsp;terms<br>
&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;the&nbsp;image&nbsp;sampling&nbsp;intervals&nbsp;along&nbsp;the&nbsp;x-axis&nbsp;and&nbsp;along&nbsp;the&nbsp;y-axis,<br>
&nbsp;&nbsp;&nbsp;&nbsp;respectively.&nbsp;&nbsp;The&nbsp;parameters&nbsp;'x0'&nbsp;and&nbsp;'y0'&nbsp;are&nbsp;for&nbsp;the&nbsp;coordinates&nbsp;of<br>
&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;point&nbsp;in&nbsp;the&nbsp;camera&nbsp;image&nbsp;plane&nbsp;where&nbsp;the&nbsp;optic&nbsp;axis&nbsp;penetrates&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;image&nbsp;plane&nbsp;with&nbsp;respect&nbsp;to&nbsp;the&nbsp;origin&nbsp;in&nbsp;the&nbsp;image&nbsp;plane&nbsp;(which&nbsp;is<br>
&nbsp;&nbsp;&nbsp;&nbsp;usually&nbsp;a&nbsp;corner&nbsp;of&nbsp;the&nbsp;image).<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;world_points&nbsp;=&nbsp;camera.make_world_points_for_triangle()<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;world_points_xformed&nbsp;=&nbsp;camera.apply_transformation_to_generic_world_points(&nbsp;world_points, (0,0,0),&nbsp;(0.0,0.0,5000.0),&nbsp;1.0)<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;which&nbsp;generates&nbsp;a&nbsp;triangle&nbsp;defined&nbsp;by&nbsp;its&nbsp;three&nbsp;vertices&nbsp;from&nbsp;a&nbsp;method<br>
&nbsp;&nbsp;&nbsp;&nbsp;defined&nbsp;for&nbsp;the&nbsp;ProjectiveCamera&nbsp;class&nbsp;and&nbsp;then&nbsp;moves&nbsp;the&nbsp;scene<br>
&nbsp;&nbsp;&nbsp;&nbsp;triangle&nbsp;along&nbsp;the&nbsp;optic&nbsp;axis&nbsp;of&nbsp;the&nbsp;camera&nbsp;(the&nbsp;world-Z&nbsp;axis)&nbsp;by&nbsp;5000<br>
&nbsp;&nbsp;&nbsp;&nbsp;units.&nbsp;&nbsp;After&nbsp;the&nbsp;transformation,&nbsp;the&nbsp;three&nbsp;vertices&nbsp;are&nbsp;at&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;coordinates&nbsp;(3000,3000,5000),&nbsp;(4000,3000,5000),&nbsp;and&nbsp;(4000,5000,5000).<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Subsequently,&nbsp;you&nbsp;must&nbsp;move&nbsp;the&nbsp;camera&nbsp;to&nbsp;different&nbsp;positions&nbsp;and<br>
&nbsp;&nbsp;&nbsp;&nbsp;orientations&nbsp;and&nbsp;use&nbsp;the&nbsp;camera&nbsp;matrix&nbsp;constructed&nbsp;by&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;ProjectiveCamera&nbsp;instance&nbsp;to&nbsp;project&nbsp;the&nbsp;world&nbsp;triangle&nbsp;into&nbsp;the&nbsp;camera<br>
&nbsp;&nbsp;&nbsp;&nbsp;images.&nbsp;You&nbsp;are&nbsp;going&nbsp;to&nbsp;need&nbsp;the&nbsp;following&nbsp;two&nbsp;methods&nbsp;defined&nbsp;for&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;ProjectiveCamera&nbsp;class&nbsp;for&nbsp;these&nbsp;camera&nbsp;motions:<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rotate_previously_initialized_camera_around_x_axis(&nbsp;theta_x_delta&nbsp;)<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;translate_a_previously_initialized_camera(&nbsp;(0.0,y_motion_delta,0.0)&nbsp;)<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;At&nbsp;each&nbsp;camera&nbsp;position/orientation&nbsp;achieved&nbsp;with&nbsp;the&nbsp;above&nbsp;two&nbsp;methods,&nbsp;you<br>
&nbsp;&nbsp;&nbsp;&nbsp;can&nbsp;record&nbsp;the&nbsp;pixels&nbsp;with&nbsp;the&nbsp;following&nbsp;call:<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pixels&nbsp;=&nbsp;camera.get_pixels_for_a_sequence_of_world_points(&nbsp;world_points_xformed&nbsp;)<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Subsequently,&nbsp;you&nbsp;must&nbsp;make&nbsp;the&nbsp;following&nbsp;call:<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;construct_X_vector(&nbsp;all_pixels&nbsp;)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;where&nbsp;'all_pixels'&nbsp;is&nbsp;the&nbsp;set&nbsp;of&nbsp;all&nbsp;the&nbsp;pixel&nbsp;recorded&nbsp;in&nbsp;all&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;positions&nbsp;of&nbsp;the&nbsp;camera.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;You&nbsp;would&nbsp;also&nbsp;need&nbsp;to&nbsp;create&nbsp;a&nbsp;Prediction&nbsp;Vector,&nbsp;Fvec,&nbsp;for&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;observed&nbsp;data&nbsp;whose&nbsp;elements&nbsp;are&nbsp;predictor&nbsp;functionals&nbsp;in&nbsp;terms&nbsp;of&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;scene&nbsp;parameters&nbsp;that&nbsp;need&nbsp;to&nbsp;be&nbsp;estimated.&nbsp;&nbsp;This&nbsp;is&nbsp;achieved&nbsp;with&nbsp;a&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;call&nbsp;like:<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;construct_Fvec_for_calibrated_cameras(&nbsp;camera_params_dict&nbsp;)<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Now&nbsp;you&nbsp;are&nbsp;ready&nbsp;to&nbsp;call&nbsp;the&nbsp;following&nbsp;method:<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get_scene_structure_from_camera_motion('lm')<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;which&nbsp;will&nbsp;invoke&nbsp;the&nbsp;Levenberg-Marquardt&nbsp;method&nbsp;on&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>&nbsp;class&nbsp;to&nbsp;estimate&nbsp;the&nbsp;scene&nbsp;structure.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;constructor&nbsp;options&nbsp;for&nbsp;the&nbsp;ProjectiveCamera&nbsp;class:<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;camera_type:<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;You&nbsp;can&nbsp;only&nbsp;set&nbsp;this&nbsp;constructor&nbsp;option&nbsp;to&nbsp;'projective'<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in&nbsp;the&nbsp;current&nbsp;version&nbsp;of&nbsp;the&nbsp;module.&nbsp;&nbsp;Eventually,&nbsp;I&nbsp;intend<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;include&nbsp;'orthographic'&nbsp;as&nbsp;another&nbsp;possibility&nbsp;for&nbsp;this<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;option.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;alpha_x:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;alpha_y:<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;These&nbsp;options&nbsp;are&nbsp;for&nbsp;the&nbsp;focal&nbsp;length&nbsp;in&nbsp;terms&nbsp;of&nbsp;the&nbsp;image<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sampling&nbsp;intervals&nbsp;used&nbsp;along&nbsp;the&nbsp;image&nbsp;x-axis&nbsp;and&nbsp;along&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;image&nbsp;y-axis,&nbsp;respectively.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x0:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y0:<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;These&nbsp;options&nbsp;are&nbsp;for&nbsp;the&nbsp;coordinates&nbsp;of&nbsp;the&nbsp;point&nbsp;in&nbsp;the&nbsp;camera<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;image&nbsp;plane&nbsp;where&nbsp;the&nbsp;optic&nbsp;axis&nbsp;penetrates&nbsp;the&nbsp;image&nbsp;plane&nbsp;with<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;respect&nbsp;to&nbsp;the&nbsp;origin&nbsp;in&nbsp;the&nbsp;image&nbsp;plane&nbsp;(which&nbsp;is&nbsp;usually&nbsp;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;corner&nbsp;of&nbsp;the&nbsp;image).<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;camera_rotation:<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Using&nbsp;the&nbsp;(roll,pitch,yaw)&nbsp;convention&nbsp;you&nbsp;can&nbsp;specify&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rotation&nbsp;for&nbsp;the&nbsp;camera&nbsp;in&nbsp;the&nbsp;constructor&nbsp;itself.&nbsp;&nbsp;However,&nbsp;for<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;experimenting&nbsp;with&nbsp;structure-from-camera-motion&nbsp;experiments,&nbsp;it<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is&nbsp;easier&nbsp;to&nbsp;first&nbsp;construct&nbsp;a&nbsp;camera&nbsp;in&nbsp;its&nbsp;generic&nbsp;pose&nbsp;and&nbsp;to<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;then&nbsp;call&nbsp;the&nbsp;rotate&nbsp;and&nbsp;translate&nbsp;methods&nbsp;on&nbsp;it&nbsp;in&nbsp;order&nbsp;to<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;move&nbsp;to&nbsp;a&nbsp;different&nbsp;position&nbsp;and&nbsp;orientation.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;camera_translation:<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Using&nbsp;a&nbsp;triple&nbsp;to&nbsp;indicate&nbsp;displacements&nbsp;along&nbsp;the&nbsp;world-X,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;world-Y,&nbsp;and&nbsp;world-Z,&nbsp;you&nbsp;can&nbsp;specify&nbsp;a&nbsp;translation&nbsp;for&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;camera&nbsp;in&nbsp;the&nbsp;constructor&nbsp;itself.&nbsp;&nbsp;However,&nbsp;for&nbsp;experimenting<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;with&nbsp;structure-from-camera-motion&nbsp;experiments,&nbsp;it&nbsp;is&nbsp;easier&nbsp;to<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;first&nbsp;construct&nbsp;a&nbsp;camera&nbsp;in&nbsp;its&nbsp;generic&nbsp;pose&nbsp;and&nbsp;to&nbsp;then&nbsp;call<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;rotate&nbsp;and&nbsp;translate&nbsp;methods&nbsp;on&nbsp;it&nbsp;in&nbsp;order&nbsp;to&nbsp;move&nbsp;to&nbsp;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;different&nbsp;position&nbsp;and&nbsp;orientation.<br>
&nbsp;<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Here&nbsp;are&nbsp;the&nbsp;methods&nbsp;defined&nbsp;for&nbsp;ProjectiveCamera:<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(1)&nbsp;add_new_camera_to_list_of_cameras():<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;You&nbsp;will&nbsp;find&nbsp;this&nbsp;utility&nbsp;method&nbsp;useful&nbsp;for&nbsp;enumerating&nbsp;all<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;different&nbsp;camera&nbsp;positions&nbsp;you&nbsp;will&nbsp;be&nbsp;using&nbsp;in&nbsp;a&nbsp;simulated<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;structure-from-camera-motion&nbsp;experiment.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(2)&nbsp;apply_transformation_to_generic_world_points()<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;After&nbsp;you&nbsp;have&nbsp;constructed&nbsp;a&nbsp;scene&nbsp;<a href="__builtin__.html#object">object</a>&nbsp;(typically&nbsp;just&nbsp;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;simple&nbsp;shape&nbsp;like&nbsp;a&nbsp;triangle&nbsp;or&nbsp;a&nbsp;tetrahedron),&nbsp;you&nbsp;can&nbsp;call&nbsp;on<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this&nbsp;method&nbsp;to&nbsp;change&nbsp;its&nbsp;position&nbsp;and&nbsp;the&nbsp;pose&nbsp;in&nbsp;the&nbsp;world<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;frame.&nbsp;&nbsp;The&nbsp;method&nbsp;takes&nbsp;FOUR&nbsp;arguments:&nbsp;(1)&nbsp;The&nbsp;scene<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;structure&nbsp;in&nbsp;the&nbsp;form&nbsp;of&nbsp;a&nbsp;list&nbsp;of&nbsp;homogeneous&nbsp;coordinates&nbsp;for<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;world&nbsp;points&nbsp;on&nbsp;the&nbsp;<a href="__builtin__.html#object">object</a>.&nbsp;&nbsp;(2)&nbsp;The&nbsp;first&nbsp;is&nbsp;a&nbsp;triple&nbsp;that<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;specifies&nbsp;the&nbsp;rotation&nbsp;using&nbsp;the&nbsp;(roll,pitch,yaw)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;convention.&nbsp;(3)&nbsp;The&nbsp;second&nbsp;argument&nbsp;is&nbsp;a&nbsp;triple&nbsp;for&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;displacement&nbsp;along&nbsp;the&nbsp;world-X,&nbsp;world-Y,&nbsp;and&nbsp;world-Z<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;coordinates.&nbsp;(4)&nbsp;The&nbsp;scale&nbsp;factor&nbsp;by&nbsp;which&nbsp;you&nbsp;want&nbsp;to&nbsp;expand<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;or&nbsp;shrink&nbsp;the&nbsp;scene&nbsp;<a href="__builtin__.html#object">object</a>.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(3)&nbsp;construct_Fvec_for_calibrated_cameras(camera_params_dict)<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;method&nbsp;constructs&nbsp;the&nbsp;prediction&nbsp;vector&nbsp;Fvec&nbsp;vector&nbsp;that<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>&nbsp;needs&nbsp;for&nbsp;comparing&nbsp;with&nbsp;the&nbsp;measurement<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vector&nbsp;X.&nbsp;Each&nbsp;element&nbsp;of&nbsp;Fvec&nbsp;is&nbsp;a&nbsp;prediction&nbsp;for&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;corresponding&nbsp;element&nbsp;of&nbsp;X&nbsp;and&nbsp;this&nbsp;prediction&nbsp;is&nbsp;a&nbsp;functional<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;form&nbsp;involving&nbsp;the&nbsp;structure&nbsp;parameters.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(4)&nbsp;construct_parameter_vec_for_calibrated_cameras()<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;method&nbsp;constructs&nbsp;an&nbsp;ordered&nbsp;list&nbsp;of&nbsp;the&nbsp;SYMBOLIC&nbsp;NAMES&nbsp;to<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;be&nbsp;used&nbsp;for&nbsp;each&nbsp;of&nbsp;the&nbsp;coordinates&nbsp;for&nbsp;the&nbsp;scene&nbsp;points&nbsp;that<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;need&nbsp;to&nbsp;be&nbsp;estimated.&nbsp;&nbsp;This&nbsp;list&nbsp;looks&nbsp;like&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"['X_0',&nbsp;'Y_0',&nbsp;'Z_0',&nbsp;'X_1',&nbsp;'Y_1',&nbsp;'Z_1',&nbsp;'X_2'&nbsp;......]"<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(5)&nbsp;construct_structure_ground_truth()<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;method&nbsp;packages&nbsp;the&nbsp;scene&nbsp;world&nbsp;points&nbsp;in&nbsp;a&nbsp;way&nbsp;that&nbsp;makes<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;it&nbsp;convenient&nbsp;to&nbsp;output&nbsp;in&nbsp;your&nbsp;terminal&nbsp;window&nbsp;the&nbsp;estimated<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;coordinates&nbsp;for&nbsp;the&nbsp;scene&nbsp;points,&nbsp;the&nbsp;ground-truth&nbsp;value&nbsp;for<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;those&nbsp;coordinates,&nbsp;and&nbsp;the&nbsp;initial&nbsp;guesses&nbsp;supplied&nbsp;for&nbsp;them.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(6)&nbsp;construct_X_vector(all_pixels)<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;As&nbsp;mentioned&nbsp;in&nbsp;the&nbsp;Introduction,&nbsp;we&nbsp;use&nbsp;the&nbsp;notation&nbsp;X&nbsp;to<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;represent&nbsp;a&nbsp;vector&nbsp;of&nbsp;all&nbsp;the&nbsp;observed&nbsp;data.&nbsp;&nbsp;For&nbsp;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;structure-from-camera-motion&nbsp;problem,&nbsp;the&nbsp;observed&nbsp;data<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;consists&nbsp;of&nbsp;all&nbsp;the&nbsp;pixels&nbsp;in&nbsp;all&nbsp;of&nbsp;the&nbsp;camera&nbsp;positions.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;method&nbsp;orders&nbsp;the&nbsp;x-&nbsp;and&nbsp;the&nbsp;y-coordinates&nbsp;of&nbsp;all&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;recorded&nbsp;pixels&nbsp;in&nbsp;the&nbsp;same&nbsp;fashion&nbsp;as&nbsp;the&nbsp;order&nbsp;given&nbsp;to&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scene&nbsp;points&nbsp;in&nbsp;world-3D.&nbsp;&nbsp;<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(7)&nbsp;display_structure()<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;method&nbsp;is&nbsp;used&nbsp;to&nbsp;display&nbsp;in&nbsp;the&nbsp;form&nbsp;of&nbsp;a&nbsp;Matplotlib<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;figure&nbsp;the&nbsp;following&nbsp;three&nbsp;things&nbsp;simultaneously:&nbsp;the&nbsp;estimated<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scene&nbsp;structure,&nbsp;the&nbsp;actual&nbsp;world&nbsp;points&nbsp;used&nbsp;for&nbsp;the&nbsp;scene<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="__builtin__.html#object">object</a>,&nbsp;and&nbsp;the&nbsp;initial&nbsp;guesses&nbsp;supplied&nbsp;for&nbsp;those&nbsp;coordinates<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;the&nbsp;nonlinear&nbsp;least-squares&nbsp;algorithm.&nbsp;&nbsp;The&nbsp;three&nbsp;parameters<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;this&nbsp;method&nbsp;are&nbsp;named&nbsp;'structure_points_estimated',<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'world_points_xformed',&nbsp;and&nbsp;'initial_values_supplied'.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(8)&nbsp;get_all_cameras()<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;utility&nbsp;method&nbsp;is&nbsp;convenient&nbsp;for&nbsp;getting&nbsp;hold&nbsp;of&nbsp;all&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cameras&nbsp;that&nbsp;supplied&nbsp;the&nbsp;data&nbsp;for&nbsp;solving&nbsp;the&nbsp;structure-from-<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;camera-motion&nbsp;problem.&nbsp;&nbsp;We&nbsp;consider&nbsp;an&nbsp;instance&nbsp;of<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ProjectiveCamera&nbsp;at&nbsp;each&nbsp;of&nbsp;its&nbsp;positions&nbsp;in&nbsp;world-3D&nbsp;as&nbsp;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;distinct&nbsp;camera.&nbsp;&nbsp;So&nbsp;if&nbsp;you&nbsp;move&nbsp;the&nbsp;camera&nbsp;to,&nbsp;say,&nbsp;20<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;different&nbsp;locations,&nbsp;you&nbsp;are&nbsp;in&nbsp;effect&nbsp;using&nbsp;20&nbsp;cameras.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(9)&nbsp;get_pixels_for_a_sequence_of_world_points()<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;For&nbsp;any&nbsp;given&nbsp;camera&nbsp;position,&nbsp;this&nbsp;method&nbsp;applies&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;corresponding&nbsp;camera&nbsp;matrix&nbsp;to&nbsp;each&nbsp;world&nbsp;point,&nbsp;which&nbsp;must&nbsp;be<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in&nbsp;homogeneous&nbsp;coordinates,&nbsp;in&nbsp;the&nbsp;sequence&nbsp;of&nbsp;world&nbsp;points<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;supplied&nbsp;to&nbsp;the&nbsp;method&nbsp;as&nbsp;its&nbsp;argument.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(10)&nbsp;get_scene_structure_from_camera_motion('lm')<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get_scene_structure_from_camera_motion_with_bundle_adjustment()<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;You&nbsp;must&nbsp;call&nbsp;the&nbsp;first&nbsp;of&nbsp;these&nbsp;two&nbsp;methods&nbsp;for&nbsp;estimating&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scene&nbsp;structure&nbsp;for&nbsp;the&nbsp;calibrated&nbsp;cameras&nbsp;case&nbsp;after&nbsp;you&nbsp;have<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;collected&nbsp;all&nbsp;the&nbsp;pixel&nbsp;data&nbsp;from&nbsp;all&nbsp;the&nbsp;different&nbsp;positions<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;the&nbsp;camera.&nbsp;&nbsp;Obviously,&nbsp;before&nbsp;you&nbsp;can&nbsp;call&nbsp;this&nbsp;method,&nbsp;you<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;would&nbsp;need&nbsp;to&nbsp;construct&nbsp;the&nbsp;observation&nbsp;vector&nbsp;X&nbsp;from&nbsp;the&nbsp;pixel<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data&nbsp;the&nbsp;predictor&nbsp;vector&nbsp;Fvec&nbsp;from&nbsp;the&nbsp;parameters&nbsp;of&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cameras&nbsp;at&nbsp;each&nbsp;of&nbsp;their&nbsp;positions.&nbsp;&nbsp;And&nbsp;you&nbsp;call&nbsp;the&nbsp;second<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method&nbsp;for&nbsp;doing&nbsp;the&nbsp;same&nbsp;for&nbsp;the&nbsp;case&nbsp;of&nbsp;uncalibrated&nbsp;cameras<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;you&nbsp;want&nbsp;to&nbsp;use&nbsp;the&nbsp;bundle-adjustment&nbsp;version&nbsp;of&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Levenberg-Marquardt&nbsp;algorithm.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(11)&nbsp;initialize()<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;method&nbsp;packs&nbsp;the&nbsp;constructor&nbsp;options&nbsp;supplied&nbsp;to&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ProjectiveCamera&nbsp;constructor&nbsp;in&nbsp;the&nbsp;form&nbsp;of&nbsp;the&nbsp;camera's<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;intrinsic&nbsp;parameter&nbsp;matrix&nbsp;K.&nbsp;&nbsp;If&nbsp;a&nbsp;translation&nbsp;and/or&nbsp;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rotation&nbsp;is&nbsp;specified&nbsp;for&nbsp;the&nbsp;camera&nbsp;through&nbsp;the&nbsp;constructor,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;those&nbsp;are&nbsp;also&nbsp;incorporated&nbsp;in&nbsp;the&nbsp;3x4&nbsp;camera&nbsp;matrix&nbsp;P&nbsp;put<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;together&nbsp;by&nbsp;this&nbsp;method.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(12)&nbsp;make_world_points_for_triangle()<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;method&nbsp;returns&nbsp;a&nbsp;scene&nbsp;<a href="__builtin__.html#object">object</a>&nbsp;that&nbsp;consists&nbsp;of&nbsp;a&nbsp;triangle<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in&nbsp;world&nbsp;3D.&nbsp;I&nbsp;have&nbsp;found&nbsp;a&nbsp;triangle&nbsp;defined&nbsp;by&nbsp;its&nbsp;three&nbsp;world<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;points&nbsp;to&nbsp;be&nbsp;convenient&nbsp;for&nbsp;testing&nbsp;the&nbsp;basic&nbsp;logic&nbsp;of&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;algorithm&nbsp;for&nbsp;solving&nbsp;a&nbsp;structure-from-camera-motion&nbsp;problem.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;triangle&nbsp;returned&nbsp;by&nbsp;this&nbsp;method&nbsp;can&nbsp;be&nbsp;subject&nbsp;to&nbsp;any<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;orientation&nbsp;changing&nbsp;and&nbsp;position&nbsp;changing&nbsp;transformation.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(13)&nbsp;make_world_points_from_tetrahedron_generic()<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Like&nbsp;the&nbsp;previous&nbsp;method,&nbsp;this&nbsp;method&nbsp;returns&nbsp;world&nbsp;points&nbsp;on&nbsp;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tetrahedron&nbsp;in&nbsp;world&nbsp;3D&nbsp;that&nbsp;you&nbsp;can&nbsp;subsequently&nbsp;use&nbsp;for&nbsp;your<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;simulated&nbsp;structure-from-moving-camera&nbsp;experiment.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(14)&nbsp;print_camera_matrix()<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;utility&nbsp;method&nbsp;is&nbsp;convenient&nbsp;for&nbsp;displaying&nbsp;the&nbsp;3x4&nbsp;camera<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matrix&nbsp;for&nbsp;any&nbsp;or&nbsp;all&nbsp;of&nbsp;the&nbsp;positions&nbsp;of&nbsp;the&nbsp;camera.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(15)&nbsp;rotate_previously_initialized_camera_around_world_X_axis()<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;method&nbsp;incrementally&nbsp;rotates&nbsp;the&nbsp;camera&nbsp;clockwise&nbsp;around<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;world-X&nbsp;axis&nbsp;by&nbsp;an&nbsp;angle&nbsp;'theta'&nbsp;in&nbsp;degrees&nbsp;that&nbsp;is<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;supplied&nbsp;to&nbsp;the&nbsp;method&nbsp;as&nbsp;its&nbsp;argument.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(16)&nbsp;rotate_previously_initialized_camera_around_world_Y_axis()<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;method&nbsp;incrementally&nbsp;rotates&nbsp;the&nbsp;camera&nbsp;clockwise&nbsp;around<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;world-Y&nbsp;axis&nbsp;by&nbsp;an&nbsp;angle&nbsp;'theta'&nbsp;in&nbsp;degrees&nbsp;that&nbsp;is<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;supplied&nbsp;to&nbsp;the&nbsp;method&nbsp;as&nbsp;its&nbsp;argument.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(17)&nbsp;set_constructor_options_for_optimizer(&nbsp;optimizer&nbsp;)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set_constructor_options_for_optimizer_BA(&nbsp;optimizer&nbsp;)<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A&nbsp;ProjectiveCamera&nbsp;instance&nbsp;uses&nbsp;these&nbsp;method&nbsp;to&nbsp;pass&nbsp;on&nbsp;to<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>&nbsp;all&nbsp;the&nbsp;information&nbsp;needed&nbsp;by&nbsp;the&nbsp;latter<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(such&nbsp;as&nbsp;the&nbsp;observed&nbsp;data&nbsp;vector&nbsp;X&nbsp;or&nbsp;X_BA&nbsp;and&nbsp;the&nbsp;prediction<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vector&nbsp;Fvec&nbsp;or&nbsp;Fvec_BA)&nbsp;for&nbsp;constructing&nbsp;an&nbsp;optimum&nbsp;estimate&nbsp;of<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;scene&nbsp;structure.&nbsp;&nbsp;The&nbsp;argument&nbsp;'optimizer'&nbsp;that&nbsp;this&nbsp;method<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;takes&nbsp;is&nbsp;an&nbsp;instance&nbsp;of&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(18)&nbsp;set_initial_values_for_params()<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Every&nbsp;nonlinear&nbsp;least-squares&nbsp;algorithm&nbsp;needs&nbsp;a&nbsp;starting&nbsp;guess<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;whatever&nbsp;it&nbsp;is&nbsp;that&nbsp;is&nbsp;being&nbsp;estimated.&nbsp;&nbsp;In&nbsp;most&nbsp;cases,&nbsp;you<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;would&nbsp;construct&nbsp;a&nbsp;random&nbsp;guess&nbsp;for&nbsp;the&nbsp;parameters&nbsp;and&nbsp;supply<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;those&nbsp;values&nbsp;to&nbsp;this&nbsp;method&nbsp;in&nbsp;the&nbsp;form&nbsp;of&nbsp;a&nbsp;dictionary&nbsp;in<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;which&nbsp;each&nbsp;key&nbsp;is&nbsp;the&nbsp;symbolic&nbsp;name&nbsp;of&nbsp;one&nbsp;of&nbsp;the&nbsp;parameters<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;being&nbsp;estimated&nbsp;and&nbsp;the&nbsp;value&nbsp;a&nbsp;random&nbsp;guess&nbsp;for&nbsp;the&nbsp;parameter.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(19)&nbsp;set_params_list(&nbsp;params_arranged_list&nbsp;)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;You&nbsp;will&nbsp;use&nbsp;this&nbsp;method&nbsp;to&nbsp;pass&nbsp;on&nbsp;to&nbsp;the&nbsp;instance&nbsp;of<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ProjectiveCamera&nbsp;an&nbsp;ordered&nbsp;list&nbsp;of&nbsp;the&nbsp;parameters&nbsp;you&nbsp;want<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;estimated&nbsp;with&nbsp;nonlinear&nbsp;least-squares.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(20)&nbsp;translate_a_previously_initialized_camera()<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;method&nbsp;incrementally&nbsp;displaces&nbsp;the&nbsp;camera&nbsp;by&nbsp;'translation'<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;that&nbsp;is&nbsp;supplied&nbsp;to&nbsp;it&nbsp;as&nbsp;its&nbsp;argument.&nbsp;The&nbsp;argument<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'translation'&nbsp;consists&nbsp;of&nbsp;a&nbsp;triple&nbsp;of&nbsp;real&nbsp;numbers&nbsp;that&nbsp;stand<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;a&nbsp;displacement&nbsp;along&nbsp;the&nbsp;world-X,&nbsp;along&nbsp;the&nbsp;world-Y,&nbsp;and<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;along&nbsp;the&nbsp;world-Z.<br>
&nbsp;<br>
&nbsp;<br>
<font size=+2 color="red">ESTIMATING&nbsp;SCENE&nbsp;STRUCTURE&nbsp;AND&nbsp;CAMERA&nbsp;PARAMETERS<br>
WHEN&nbsp;USING&nbsp;AN&nbsp;UNCALIBRATED&nbsp;CAMERA&nbsp;IN&nbsp;MOTION:<br></font>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;problem&nbsp;of&nbsp;scene&nbsp;construction&nbsp;becomes&nbsp;a&nbsp;lot&nbsp;more&nbsp;challenging&nbsp;when<br>
&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;camera&nbsp;in&nbsp;motion&nbsp;is&nbsp;uncalibrated.&nbsp;&nbsp;When&nbsp;I&nbsp;say&nbsp;uncalibrated,&nbsp;I&nbsp;mean<br>
&nbsp;&nbsp;&nbsp;&nbsp;uncalibrated&nbsp;with&nbsp;respect&nbsp;to&nbsp;its&nbsp;extrinsic&nbsp;pararameters.&nbsp;&nbsp;We&nbsp;assume&nbsp;in<br>
&nbsp;&nbsp;&nbsp;&nbsp;all&nbsp;cases&nbsp;in&nbsp;this&nbsp;document&nbsp;that&nbsp;the&nbsp;intrinsic&nbsp;parameters&nbsp;of&nbsp;the&nbsp;camera<br>
&nbsp;&nbsp;&nbsp;&nbsp;are&nbsp;known.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;What&nbsp;makes&nbsp;structure&nbsp;estimation&nbsp;more&nbsp;complicated&nbsp;in&nbsp;this&nbsp;case&nbsp;is&nbsp;that<br>
&nbsp;&nbsp;&nbsp;&nbsp;each&nbsp;new&nbsp;camera&nbsp;position&nbsp;adds&nbsp;6&nbsp;additional&nbsp;variables&nbsp;to&nbsp;the&nbsp;overall<br>
&nbsp;&nbsp;&nbsp;&nbsp;parameter&nbsp;space,&nbsp;3&nbsp;for&nbsp;translation&nbsp;and&nbsp;3&nbsp;for&nbsp;rotation&nbsp;as&nbsp;expressed&nbsp;by<br>
&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;Rodrigues&nbsp;parameters.&nbsp;&nbsp;Let's&nbsp;say&nbsp;you&nbsp;have&nbsp;M&nbsp;camera&nbsp;positions&nbsp;and&nbsp;N<br>
&nbsp;&nbsp;&nbsp;&nbsp;structure&nbsp;points.&nbsp;&nbsp;That&nbsp;would&nbsp;call&nbsp;for&nbsp;(6*M&nbsp;+&nbsp;3*N)&nbsp;parameters&nbsp;to&nbsp;be<br>
&nbsp;&nbsp;&nbsp;&nbsp;estimated&nbsp;by&nbsp;the&nbsp;Levenberg-Marquardt&nbsp;algorithm&nbsp;because&nbsp;each&nbsp;camera&nbsp;has<br>
&nbsp;&nbsp;&nbsp;&nbsp;six&nbsp;external&nbsp;pose&nbsp;parameters&nbsp;associated&nbsp;with&nbsp;it&nbsp;and&nbsp;each&nbsp;structure<br>
&nbsp;&nbsp;&nbsp;&nbsp;point&nbsp;is&nbsp;defined&nbsp;by&nbsp;its&nbsp;three&nbsp;world&nbsp;coordinates.&nbsp;&nbsp;Assuming&nbsp;that&nbsp;you&nbsp;can<br>
&nbsp;&nbsp;&nbsp;&nbsp;see&nbsp;all&nbsp;of&nbsp;the&nbsp;structure&nbsp;points&nbsp;in&nbsp;all&nbsp;the&nbsp;cameras,&nbsp;all&nbsp;of&nbsp;the&nbsp;pixels<br>
&nbsp;&nbsp;&nbsp;&nbsp;recorded&nbsp;in&nbsp;all&nbsp;of&nbsp;the&nbsp;camera&nbsp;position&nbsp;would&nbsp;constitute&nbsp;a&nbsp;2*N*M<br>
&nbsp;&nbsp;&nbsp;&nbsp;dimensional&nbsp;observation&nbsp;vector&nbsp;X.&nbsp;&nbsp;Therefore,&nbsp;your&nbsp;Jacobian&nbsp;will&nbsp;be&nbsp;of<br>
&nbsp;&nbsp;&nbsp;&nbsp;size&nbsp;[(2*N*M)&nbsp;x&nbsp;(6*M+3*N)].&nbsp;&nbsp;For&nbsp;an&nbsp;example,&nbsp;say&nbsp;you&nbsp;have&nbsp;20&nbsp;camera<br>
&nbsp;&nbsp;&nbsp;&nbsp;positions&nbsp;and&nbsp;100&nbsp;structure&nbsp;points,&nbsp;your&nbsp;Jacobian&nbsp;will&nbsp;be&nbsp;of&nbsp;size<br>
&nbsp;&nbsp;&nbsp;&nbsp;4000x420.&nbsp;&nbsp;Calculating&nbsp;a&nbsp;Jacobian&nbsp;of&nbsp;this&nbsp;size&nbsp;and&nbsp;multiplying&nbsp;it&nbsp;by<br>
&nbsp;&nbsp;&nbsp;&nbsp;its&nbsp;transpose&nbsp;could&nbsp;take&nbsp;many&nbsp;more&nbsp;than&nbsp;several&nbsp;minutes&nbsp;on&nbsp;a&nbsp;run&nbsp;of&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;mill&nbsp;machine.&nbsp;&nbsp;And&nbsp;having&nbsp;to&nbsp;calculate&nbsp;the&nbsp;Jacobian&nbsp;multiple&nbsp;times&nbsp;in<br>
&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;iterative&nbsp;framework&nbsp;of&nbsp;nonlinear&nbsp;least-squares&nbsp;estimation&nbsp;could<br>
&nbsp;&nbsp;&nbsp;&nbsp;test&nbsp;your&nbsp;patience&nbsp;as&nbsp;you&nbsp;are&nbsp;waiting&nbsp;for&nbsp;the&nbsp;results.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Fortunately,&nbsp;this&nbsp;otherwise&nbsp;long&nbsp;execution&nbsp;time&nbsp;can&nbsp;be&nbsp;significantly<br>
&nbsp;&nbsp;&nbsp;&nbsp;shortened&nbsp;if&nbsp;you&nbsp;take&nbsp;advantage&nbsp;of&nbsp;the&nbsp;sparsity&nbsp;of&nbsp;the&nbsp;Jacobian&nbsp;when<br>
&nbsp;&nbsp;&nbsp;&nbsp;using&nbsp;uncalibrated&nbsp;cameras.&nbsp;&nbsp;As&nbsp;to&nbsp;why&nbsp;the&nbsp;Jacobian&nbsp;is&nbsp;sparse,&nbsp;consider<br>
&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;fact&nbsp;that&nbsp;each&nbsp;row&nbsp;of&nbsp;the&nbsp;Jacobian&nbsp;is&nbsp;a&nbsp;partial&nbsp;derivative&nbsp;of&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;prediction&nbsp;for&nbsp;one&nbsp;observation&nbsp;with&nbsp;respect&nbsp;to&nbsp;ALL&nbsp;the&nbsp;parameters.<br>
&nbsp;&nbsp;&nbsp;&nbsp;Obviously,&nbsp;when&nbsp;you&nbsp;take&nbsp;the&nbsp;partial&nbsp;derivative&nbsp;of&nbsp;the&nbsp;prediction<br>
&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;for&nbsp;a&nbsp;pixel&nbsp;in&nbsp;one&nbsp;specific&nbsp;camera&nbsp;with&nbsp;respect&nbsp;to&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;parameters&nbsp;of&nbsp;all&nbsp;other&nbsp;cameras,&nbsp;all&nbsp;those&nbsp;partial&nbsp;derivatives&nbsp;will&nbsp;be<br>
&nbsp;&nbsp;&nbsp;&nbsp;zero.&nbsp;&nbsp;The&nbsp;implementations&nbsp;of&nbsp;the&nbsp;Levenberg-Marquardt&nbsp;algorithm&nbsp;that<br>
&nbsp;&nbsp;&nbsp;&nbsp;take&nbsp;advantage&nbsp;of&nbsp;the&nbsp;sparsity&nbsp;of&nbsp;the&nbsp;Jacobian&nbsp;are&nbsp;commonly&nbsp;referred&nbsp;to<br>
&nbsp;&nbsp;&nbsp;&nbsp;as&nbsp;"Sparse&nbsp;Bundle&nbsp;Adjustment"&nbsp;or&nbsp;just&nbsp;"Bundle&nbsp;Adjustment".<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;logic&nbsp;that&nbsp;this&nbsp;module&nbsp;uses&nbsp;for&nbsp;exploiting&nbsp;the&nbsp;sparsity&nbsp;of&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;Jacobian&nbsp;is&nbsp;based&nbsp;on&nbsp;the&nbsp;paper&nbsp;"SBA:&nbsp;A&nbsp;Software&nbsp;Package&nbsp;for&nbsp;Generic<br>
&nbsp;&nbsp;&nbsp;&nbsp;Sparse&nbsp;Bundle&nbsp;Adjustment"&nbsp;by&nbsp;Manolis&nbsp;Lourakis&nbsp;and&nbsp;Antonis&nbsp;Argyros&nbsp;that<br>
&nbsp;&nbsp;&nbsp;&nbsp;appeared&nbsp;in&nbsp;ACM&nbsp;Transactions&nbsp;on&nbsp;Mathematical&nbsp;Software,&nbsp;March&nbsp;2009.<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;In&nbsp;honor&nbsp;of&nbsp;these&nbsp;two&nbsp;authors,&nbsp;I&nbsp;have&nbsp;named&nbsp;all&nbsp;of&nbsp;the&nbsp;block&nbsp;Jacobian<br>
&nbsp;&nbsp;&nbsp;&nbsp;submatrices&nbsp;that&nbsp;take&nbsp;partial&nbsp;derivatives&nbsp;of&nbsp;the&nbsp;predictors&nbsp;with<br>
&nbsp;&nbsp;&nbsp;&nbsp;respect&nbsp;to&nbsp;the&nbsp;camera&nbsp;parameters&nbsp;as&nbsp;the&nbsp;Argyros&nbsp;matrices.&nbsp;&nbsp;And&nbsp;I&nbsp;have<br>
&nbsp;&nbsp;&nbsp;&nbsp;named&nbsp;all&nbsp;of&nbsp;the&nbsp;block&nbsp;Jacobian&nbsp;matrices&nbsp;that&nbsp;do&nbsp;the&nbsp;same&nbsp;with&nbsp;respect<br>
&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;the&nbsp;structure&nbsp;variables&nbsp;as&nbsp;Lourakis&nbsp;matrices.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;In&nbsp;this&nbsp;module,&nbsp;the&nbsp;"bundle-adjustment"&nbsp;version&nbsp;of&nbsp;Levenberg-Marquardt<br>
&nbsp;&nbsp;&nbsp;&nbsp;algorithm&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;method<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bundle_adjust()<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;the&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>&nbsp;class.&nbsp;&nbsp;As&nbsp;you&nbsp;will&nbsp;notice,&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;observation&nbsp;vector&nbsp;that&nbsp;I&nbsp;called&nbsp;X&nbsp;in&nbsp;the&nbsp;implementation&nbsp;of&nbsp;the&nbsp;method<br>
&nbsp;&nbsp;&nbsp;&nbsp;leven_marq()&nbsp;is&nbsp;now&nbsp;called&nbsp;X_BA&nbsp;in&nbsp;the&nbsp;implementation&nbsp;of&nbsp;the&nbsp;method<br>
&nbsp;&nbsp;&nbsp;&nbsp;bundle_adjust().&nbsp;&nbsp;The&nbsp;reason&nbsp;has&nbsp;to&nbsp;do&nbsp;with&nbsp;the&nbsp;fact&nbsp;that&nbsp;the&nbsp;basic<br>
&nbsp;&nbsp;&nbsp;&nbsp;Levenberg-Marquardt&nbsp;algorithm&nbsp;that&nbsp;you&nbsp;see&nbsp;in&nbsp;leven_marq()&nbsp;does&nbsp;not&nbsp;care<br>
&nbsp;&nbsp;&nbsp;&nbsp;how&nbsp;the&nbsp;observed&nbsp;data&nbsp;is&nbsp;arranged&nbsp;in&nbsp;the&nbsp;vector&nbsp;X.&nbsp;Typically,&nbsp;in&nbsp;my<br>
&nbsp;&nbsp;&nbsp;&nbsp;personal&nbsp;computer&nbsp;vision&nbsp;code&nbsp;for&nbsp;multi-camera&nbsp;situations,&nbsp;I&nbsp;arrange<br>
&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;data&nbsp;by&nbsp;the&nbsp;camera.&nbsp;&nbsp;That&nbsp;is,&nbsp;I&nbsp;group&nbsp;together&nbsp;all&nbsp;of&nbsp;the&nbsp;pixels<br>
&nbsp;&nbsp;&nbsp;&nbsp;recorded&nbsp;in&nbsp;one&nbsp;camera,&nbsp;followed&nbsp;by&nbsp;all&nbsp;of&nbsp;the&nbsp;pixels&nbsp;in&nbsp;the&nbsp;second<br>
&nbsp;&nbsp;&nbsp;&nbsp;camera,&nbsp;and&nbsp;so&nbsp;on.&nbsp;&nbsp;That&nbsp;is&nbsp;how&nbsp;the&nbsp;observed&nbsp;data&nbsp;(and,&nbsp;therefore,&nbsp;also<br>
&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;prediction&nbsp;vector&nbsp;Fvec)&nbsp;is&nbsp;arranged&nbsp;in&nbsp;the&nbsp;method&nbsp;leven_marq().<br>
&nbsp;&nbsp;&nbsp;&nbsp;Unfortunately,&nbsp;that&nbsp;ordering&nbsp;of&nbsp;the&nbsp;data&nbsp;does&nbsp;not&nbsp;work&nbsp;for&nbsp;sparse<br>
&nbsp;&nbsp;&nbsp;&nbsp;bundle&nbsp;adjustment.&nbsp;&nbsp;To&nbsp;maximally&nbsp;exploit&nbsp;sparse&nbsp;bundle&nbsp;adjustment,&nbsp;you<br>
&nbsp;&nbsp;&nbsp;&nbsp;must&nbsp;order&nbsp;the&nbsp;observation&nbsp;vector&nbsp;so&nbsp;that&nbsp;your&nbsp;first&nbsp;group&nbsp;together&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;pixels&nbsp;for&nbsp;what&nbsp;we&nbsp;may&nbsp;refer&nbsp;to&nbsp;as&nbsp;the&nbsp;first&nbsp;structure&nbsp;point,&nbsp;to&nbsp;be<br>
&nbsp;&nbsp;&nbsp;&nbsp;followed&nbsp;by&nbsp;the&nbsp;pixels&nbsp;in&nbsp;all&nbsp;the&nbsp;cameras&nbsp;for&nbsp;the&nbsp;second&nbsp;structure<br>
&nbsp;&nbsp;&nbsp;&nbsp;point,&nbsp;and&nbsp;so&nbsp;on.&nbsp;&nbsp;Because&nbsp;this&nbsp;ordering&nbsp;is&nbsp;critical&nbsp;to&nbsp;the&nbsp;SBA<br>
&nbsp;&nbsp;&nbsp;&nbsp;algorithm&nbsp;described&nbsp;in&nbsp;the&nbsp;paper&nbsp;by&nbsp;Lourakis&nbsp;and&nbsp;Argyros,&nbsp;I&nbsp;have<br>
&nbsp;&nbsp;&nbsp;&nbsp;denoted&nbsp;the&nbsp;observation&nbsp;vector&nbsp;X_BA&nbsp;in&nbsp;the&nbsp;method&nbsp;bundle_adjust().&nbsp;&nbsp;The<br>
&nbsp;&nbsp;&nbsp;&nbsp;order&nbsp;in&nbsp;which&nbsp;the&nbsp;predictor&nbsp;functionals&nbsp;are&nbsp;placed&nbsp;in&nbsp;the&nbsp;predictor<br>
&nbsp;&nbsp;&nbsp;&nbsp;vector&nbsp;Fvec&nbsp;must&nbsp;correspond&nbsp;to&nbsp;the&nbsp;order&nbsp;used&nbsp;in&nbsp;X_BA.&nbsp;&nbsp;So&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;prediction&nbsp;vector&nbsp;in&nbsp;bundle_adjust()&nbsp;is&nbsp;named&nbsp;Fvec_BA.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;About&nbsp;how&nbsp;to&nbsp;invoke&nbsp;the&nbsp;bundle-adjustment&nbsp;variant&nbsp;of<br>
&nbsp;&nbsp;&nbsp;&nbsp;Levenberg-Marquardt&nbsp;in&nbsp;your&nbsp;own&nbsp;code,&nbsp;note&nbsp;the&nbsp;following&nbsp;methods&nbsp;of&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;ProjectiveCamera&nbsp;class&nbsp;that&nbsp;are&nbsp;specially&nbsp;meant&nbsp;for&nbsp;that&nbsp;purpose:<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(1)&nbsp;&nbsp;construct_X_vector_for_bundle_adjustment()<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;It&nbsp;is&nbsp;this&nbsp;method's&nbsp;job&nbsp;to&nbsp;arrange&nbsp;the&nbsp;observed&nbsp;data&nbsp;(meaning<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;pixels&nbsp;in&nbsp;the&nbsp;camera&nbsp;images)&nbsp;in&nbsp;the&nbsp;special&nbsp;order&nbsp;that&nbsp;is<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;needed&nbsp;by&nbsp;the&nbsp;bundle-adjustment&nbsp;algorithm.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(2)&nbsp;&nbsp;construct_parameter_vec_for_uncalibrated_cameras_with_rodrigues_rotations()&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;When&nbsp;using&nbsp;uncalibrated&nbsp;cameras,&nbsp;the&nbsp;parameter&nbsp;vector&nbsp;must<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;include&nbsp;three&nbsp;translational&nbsp;and&nbsp;three&nbsp;rotational&nbsp;parameters<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;each&nbsp;camera.&nbsp;&nbsp;These&nbsp;are&nbsp;in&nbsp;addition&nbsp;to&nbsp;the&nbsp;three&nbsp;(X,Y,Z)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parameters&nbsp;for&nbsp;each&nbsp;structure&nbsp;point&nbsp;being&nbsp;tracked&nbsp;in&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cameras.&nbsp;&nbsp;The&nbsp;job&nbsp;of&nbsp;this&nbsp;method&nbsp;is&nbsp;to&nbsp;synthesize&nbsp;this<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parameter&nbsp;vector.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(3)&nbsp;&nbsp;construct_Fvec_for_bundle_adjustment()<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;ordering&nbsp;used&nbsp;for&nbsp;the&nbsp;observed&nbsp;data&nbsp;(meaning&nbsp;the&nbsp;pixels&nbsp;in<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;cameras)&nbsp;in&nbsp;the&nbsp;X_BA&nbsp;vector&nbsp;must&nbsp;also&nbsp;be&nbsp;used&nbsp;in&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prediction&nbsp;vector&nbsp;when&nbsp;you&nbsp;use&nbsp;the&nbsp;bundle-adjustment&nbsp;variant<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;the&nbsp;basic&nbsp;Levenberg-Marquardt&nbsp;algorithm.&nbsp;&nbsp;This&nbsp;method<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;creates&nbsp;the&nbsp;needed&nbsp;prediction&nbsp;vector.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(4)&nbsp;&nbsp;get_scene_structure_from_camera_motion_with_bundle_adjustment()<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;It&nbsp;is&nbsp;this&nbsp;method&nbsp;of&nbsp;the&nbsp;ProjectiveCamera&nbsp;class&nbsp;that&nbsp;invokes<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;bundle_adjust()&nbsp;method&nbsp;of&nbsp;the&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>&nbsp;class.<br>
&nbsp;<br>
&nbsp;<br>
<font size=+2 color="red">THE&nbsp;ExamplesOptimizedSurfaceFit&nbsp;DIRECTORY:<br>
</font>&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;See&nbsp;the&nbsp;'ExamplesOptimizedSurfaceFit'&nbsp;directory&nbsp;in&nbsp;the&nbsp;distribution&nbsp;for<br>
&nbsp;&nbsp;&nbsp;&nbsp;examples&nbsp;of&nbsp;how&nbsp;you&nbsp;can&nbsp;use&nbsp;the&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>&nbsp;class&nbsp;for&nbsp;solving<br>
&nbsp;&nbsp;&nbsp;&nbsp;optimization&nbsp;problems.&nbsp;&nbsp;These&nbsp;examples&nbsp;are&nbsp;based&nbsp;on&nbsp;the&nbsp;domain&nbsp;specific<br>
&nbsp;&nbsp;&nbsp;&nbsp;class&nbsp;OptimizedSurfaceFit&nbsp;that&nbsp;knows&nbsp;about&nbsp;fitting&nbsp;model&nbsp;surfaces&nbsp;to<br>
&nbsp;&nbsp;&nbsp;&nbsp;noisy&nbsp;height&nbsp;data&nbsp;over&nbsp;a&nbsp;flat&nbsp;plane.&nbsp;&nbsp;You&nbsp;will&nbsp;see&nbsp;the&nbsp;following&nbsp;four<br>
&nbsp;&nbsp;&nbsp;&nbsp;scripts&nbsp;in&nbsp;this&nbsp;directory:<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;leven_marq.py<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;grad_descent.py&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;leven_marq_with_partial_derivatives.py<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;grad_descent_with_partial_derivatives.py<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;For&nbsp;the&nbsp;first&nbsp;two&nbsp;scripts,&nbsp;the&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>&nbsp;instance&nbsp;used&nbsp;will<br>
&nbsp;&nbsp;&nbsp;&nbsp;estimate&nbsp;the&nbsp;needed&nbsp;Jacobian&nbsp;matrix&nbsp;through&nbsp;appropriate&nbsp;numerical<br>
&nbsp;&nbsp;&nbsp;&nbsp;approximation&nbsp;formulas&nbsp;applied&nbsp;to&nbsp;the&nbsp;elements&nbsp;of&nbsp;the&nbsp;Fvec&nbsp;vector.&nbsp;&nbsp;On<br>
&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;other&nbsp;hand,&nbsp;for&nbsp;the&nbsp;third&nbsp;and&nbsp;the&nbsp;fourth&nbsp;scripts,&nbsp;your&nbsp;own<br>
&nbsp;&nbsp;&nbsp;&nbsp;domain-specific&nbsp;class&nbsp;must&nbsp;construct&nbsp;the&nbsp;Jacobian&nbsp;matrix,&nbsp;in&nbsp;the&nbsp;form<br>
&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;an&nbsp;array&nbsp;of&nbsp;functions.&nbsp;In&nbsp;the&nbsp;case&nbsp;of&nbsp;the&nbsp;domain-specific&nbsp;class<br>
&nbsp;&nbsp;&nbsp;&nbsp;OptimizedSurfaceFit&nbsp;that&nbsp;comes&nbsp;with&nbsp;this&nbsp;module,&nbsp;this&nbsp;Jacobian&nbsp;matrix&nbsp;is<br>
&nbsp;&nbsp;&nbsp;&nbsp;constructed&nbsp;from&nbsp;the&nbsp;user-supplied&nbsp;partial&nbsp;derivatives&nbsp;for&nbsp;the&nbsp;model<br>
&nbsp;&nbsp;&nbsp;&nbsp;functional.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;In&nbsp;order&nbsp;to&nbsp;become&nbsp;familiar&nbsp;with&nbsp;the&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>&nbsp;class,&nbsp;you<br>
&nbsp;&nbsp;&nbsp;&nbsp;might&nbsp;wish&nbsp;to&nbsp;play&nbsp;with&nbsp;the&nbsp;four&nbsp;scripts&nbsp;listed&nbsp;above&nbsp;by:<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;Trying&nbsp;different&nbsp;functional&nbsp;forms&nbsp;for&nbsp;the&nbsp;'datagen_functional'&nbsp;for<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;different&nbsp;shaped&nbsp;surfaces.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;When&nbsp;you&nbsp;change&nbsp;the&nbsp;algebraic&nbsp;form&nbsp;of&nbsp;'datagen_functional'&nbsp;for&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OptimizedSurfaceFit&nbsp;class,&nbsp;make&nbsp;sure&nbsp;that&nbsp;you&nbsp;also&nbsp;change&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;algebraic&nbsp;form&nbsp;supplied&nbsp;for&nbsp;'model_functional'.&nbsp;&nbsp;Note&nbsp;that&nbsp;nonlinear<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;least-squares&nbsp;can&nbsp;only&nbsp;calculate&nbsp;the&nbsp;parameters&nbsp;of&nbsp;a&nbsp;model<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;functional&nbsp;that&nbsp;best&nbsp;fit&nbsp;the&nbsp;noisy&nbsp;height&nbsp;data;&nbsp;it&nbsp;cannot&nbsp;conjure&nbsp;up<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a&nbsp;new&nbsp;mathematical&nbsp;form&nbsp;for&nbsp;the&nbsp;surface.&nbsp;&nbsp;So&nbsp;the&nbsp;basic&nbsp;mathematical<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;form&nbsp;of&nbsp;the&nbsp;'model_functional'&nbsp;must&nbsp;be&nbsp;the&nbsp;same&nbsp;as&nbsp;that&nbsp;of&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'datagen_functional'.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;Trying&nbsp;different&nbsp;degrees&nbsp;of&nbsp;noise.&nbsp;&nbsp;<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;As&nbsp;mentioned&nbsp;elsewhere,&nbsp;when&nbsp;you&nbsp;supply&nbsp;a&nbsp;numerical&nbsp;value&nbsp;for&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;constructor&nbsp;option&nbsp;'how_much_noise_for_synthetic_data'&nbsp;for&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OptimizedSurfaceFit&nbsp;class,&nbsp;the&nbsp;number&nbsp;you&nbsp;enter&nbsp;should&nbsp;be&nbsp;in<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proportion&nbsp;to&nbsp;the&nbsp;largest&nbsp;numerical&nbsp;coefficient&nbsp;in&nbsp;the&nbsp;'datagen'<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;functional.&nbsp;&nbsp;Change&nbsp;this&nbsp;numerical&nbsp;value&nbsp;and&nbsp;see&nbsp;what&nbsp;happens&nbsp;to&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;quality&nbsp;of&nbsp;the&nbsp;final&nbsp;results.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;Try&nbsp;different&nbsp;values&nbsp;for&nbsp;the&nbsp;initial&nbsp;values&nbsp;of&nbsp;the&nbsp;model&nbsp;parameters.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Since,&nbsp;depending&nbsp;on&nbsp;where&nbsp;the&nbsp;search&nbsp;for&nbsp;the&nbsp;optimum&nbsp;solution&nbsp;is<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;started,&nbsp;all&nbsp;nonlinear&nbsp;least-squares&nbsp;methods&nbsp;can&nbsp;get&nbsp;trapped&nbsp;in&nbsp;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local&nbsp;minimum,&nbsp;see&nbsp;what&nbsp;happens&nbsp;when&nbsp;you&nbsp;change&nbsp;these&nbsp;initial<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;values.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;Try&nbsp;different&nbsp;algebraic&nbsp;expressions&nbsp;for&nbsp;the&nbsp;'model_functional'<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;constructor&nbsp;option&nbsp;for&nbsp;the&nbsp;OptimizedSurfaceFit&nbsp;class.&nbsp;&nbsp;But&nbsp;note&nbsp;that<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;you&nbsp;change&nbsp;the&nbsp;algebraic&nbsp;form&nbsp;of&nbsp;this&nbsp;functional,&nbsp;you&nbsp;must&nbsp;also<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;change&nbsp;the&nbsp;algebraic&nbsp;form&nbsp;of&nbsp;the&nbsp;'datagen_functional'&nbsp;option.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;Try&nbsp;running&nbsp;the&nbsp;example&nbsp;with&nbsp;and&nbsp;without&nbsp;the&nbsp;partial&nbsp;derivatives<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;that&nbsp;are&nbsp;supplied&nbsp;through&nbsp;the&nbsp;'partials_for_jacobian'&nbsp;option&nbsp;for&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OptimizedSurfaceFit&nbsp;class.<br>
&nbsp;<br>
&nbsp;<br>
<font size=+2 color="red">THE&nbsp;ExamplesStructureFromCameraMotion&nbsp;DIRECTORY:<br>
</font>&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;See&nbsp;the&nbsp;'ExamplesStructureFromCameraMotion'&nbsp;directory&nbsp;in&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;distribution&nbsp;for&nbsp;the&nbsp;following&nbsp;three&nbsp;example&nbsp;scripts&nbsp;that&nbsp;show&nbsp;how&nbsp;you<br>
&nbsp;&nbsp;&nbsp;&nbsp;can&nbsp;use&nbsp;the&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>&nbsp;module&nbsp;for&nbsp;estimating&nbsp;the&nbsp;structure<br>
&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;a&nbsp;3D&nbsp;scene&nbsp;from&nbsp;the&nbsp;images&nbsp;recorded&nbsp;by&nbsp;a&nbsp;moving&nbsp;camera.&nbsp;&nbsp;Version&nbsp;1.5<br>
&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;this&nbsp;module:<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sfm_with_calibrated_cameras_translations_only.py<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sfm_with_uncalibrated_cameras_translations_only.py<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bundle_adjust_sfm_with_uncalibrated_cameras_translations_only.py<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;where&nbsp;the&nbsp;string&nbsp;"sfm"&nbsp;stands&nbsp;for&nbsp;"structure&nbsp;from&nbsp;motion".<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;first&nbsp;script&nbsp;listed&nbsp;above&nbsp;is&nbsp;for&nbsp;estimating&nbsp;the&nbsp;scene&nbsp;structure<br>
&nbsp;&nbsp;&nbsp;&nbsp;with&nbsp;a&nbsp;calibrated&nbsp;camera&nbsp;in&nbsp;motion.&nbsp;&nbsp;As&nbsp;you&nbsp;play&nbsp;with&nbsp;this&nbsp;method,&nbsp;make<br>
&nbsp;&nbsp;&nbsp;&nbsp;sure&nbsp;you&nbsp;change&nbsp;the&nbsp;level&nbsp;of&nbsp;noise&nbsp;in&nbsp;the&nbsp;initial&nbsp;values&nbsp;supplied&nbsp;for<br>
&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;structure&nbsp;parameters&nbsp;to&nbsp;be&nbsp;estimated.&nbsp;&nbsp;As&nbsp;you&nbsp;will&nbsp;see,&nbsp;the&nbsp;method<br>
&nbsp;&nbsp;&nbsp;&nbsp;works&nbsp;even&nbsp;when&nbsp;the&nbsp;initial&nbsp;values&nbsp;for&nbsp;the&nbsp;parameters&nbsp;are&nbsp;far&nbsp;from<br>
&nbsp;&nbsp;&nbsp;&nbsp;their&nbsp;true&nbsp;values.&nbsp;&nbsp;Note&nbsp;that&nbsp;the&nbsp;ProjectiveCamera&nbsp;class&nbsp;makes&nbsp;it&nbsp;easy<br>
&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;specify&nbsp;calibrated&nbsp;cameras.&nbsp;&nbsp;The&nbsp;constructor&nbsp;of&nbsp;the&nbsp;class&nbsp;first<br>
&nbsp;&nbsp;&nbsp;&nbsp;gives&nbsp;you&nbsp;a&nbsp;camera&nbsp;for&nbsp;which&nbsp;you&nbsp;can&nbsp;specify&nbsp;the&nbsp;internal&nbsp;and&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;external&nbsp;parameters&nbsp;through&nbsp;the&nbsp;constructor&nbsp;options.&nbsp;Subsequently,&nbsp;you<br>
&nbsp;&nbsp;&nbsp;&nbsp;can&nbsp;apply&nbsp;translational&nbsp;and&nbsp;rotational&nbsp;transformations&nbsp;to&nbsp;the&nbsp;camera&nbsp;to<br>
&nbsp;&nbsp;&nbsp;&nbsp;move&nbsp;it&nbsp;to&nbsp;different&nbsp;locations&nbsp;in&nbsp;world&nbsp;3D.&nbsp;&nbsp;Since&nbsp;the&nbsp;3x4&nbsp;camera<br>
&nbsp;&nbsp;&nbsp;&nbsp;matrices&nbsp;for&nbsp;all&nbsp;these&nbsp;positions&nbsp;of&nbsp;the&nbsp;camera&nbsp;are&nbsp;known,&nbsp;you&nbsp;end&nbsp;up<br>
&nbsp;&nbsp;&nbsp;&nbsp;with&nbsp;a&nbsp;set&nbsp;of&nbsp;fully&nbsp;calibrated&nbsp;cameras&nbsp;for&nbsp;experimenting&nbsp;with<br>
&nbsp;&nbsp;&nbsp;&nbsp;structure-from-motion&nbsp;simulations.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;second&nbsp;and&nbsp;the&nbsp;third&nbsp;scripts&nbsp;listed&nbsp;above&nbsp;are&nbsp;for&nbsp;the&nbsp;case&nbsp;of<br>
&nbsp;&nbsp;&nbsp;&nbsp;uncalibrated&nbsp;cameras,&nbsp;with&nbsp;the&nbsp;former&nbsp;a&nbsp;straightforward&nbsp;application&nbsp;of<br>
&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;Levenberg-Marquardt&nbsp;algorithm&nbsp;and&nbsp;the&nbsp;latter&nbsp;a&nbsp;bundle-adjustment<br>
&nbsp;&nbsp;&nbsp;&nbsp;variant&nbsp;of&nbsp;the&nbsp;same.&nbsp;&nbsp;Logically,&nbsp;both&nbsp;these&nbsp;methods&nbsp;must&nbsp;return<br>
&nbsp;&nbsp;&nbsp;&nbsp;identical&nbsp;answers.&nbsp;&nbsp;(If&nbsp;you&nbsp;encounter&nbsp;a&nbsp;case&nbsp;when&nbsp;the&nbsp;two&nbsp;do&nbsp;not&nbsp;return<br>
&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;same&nbsp;answer,&nbsp;please&nbsp;send&nbsp;a&nbsp;bug&nbsp;report&nbsp;to&nbsp;me.&nbsp;I'd&nbsp;appreciate&nbsp;that<br>
&nbsp;&nbsp;&nbsp;&nbsp;very&nbsp;much.)<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Just&nbsp;to&nbsp;give&nbsp;you&nbsp;an&nbsp;idea&nbsp;of&nbsp;the&nbsp;speed-up&nbsp;you&nbsp;will&nbsp;get&nbsp;with<br>
&nbsp;&nbsp;&nbsp;&nbsp;bundle-adjustment,&nbsp;when&nbsp;I&nbsp;run&nbsp;the&nbsp;second&nbsp;script&nbsp;listed&nbsp;above&nbsp;on&nbsp;my<br>
&nbsp;&nbsp;&nbsp;&nbsp;laptop,&nbsp;it&nbsp;takes&nbsp;about&nbsp;15&nbsp;minutes&nbsp;for&nbsp;the&nbsp;number&nbsp;of&nbsp;structure&nbsp;points<br>
&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;the&nbsp;number&nbsp;of&nbsp;camera&nbsp;positions&nbsp;used&nbsp;in&nbsp;that&nbsp;script.&nbsp;&nbsp;For&nbsp;exactly<br>
&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;same&nbsp;number&nbsp;of&nbsp;structure&nbsp;points&nbsp;and&nbsp;the&nbsp;camera&nbsp;positions,&nbsp;the&nbsp;third<br>
&nbsp;&nbsp;&nbsp;&nbsp;script&nbsp;takes&nbsp;only&nbsp;a&nbsp;couple&nbsp;of&nbsp;minutes.&nbsp;&nbsp;You&nbsp;can&nbsp;only&nbsp;imagine&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;speed-up&nbsp;you&nbsp;will&nbsp;get&nbsp;with&nbsp;a&nbsp;C-based&nbsp;library&nbsp;for&nbsp;bundle&nbsp;adjustment&nbsp;---<br>
&nbsp;&nbsp;&nbsp;&nbsp;such&nbsp;as&nbsp;the&nbsp;"sba"&nbsp;library&nbsp;mentioned&nbsp;in&nbsp;the&nbsp;paper&nbsp;by&nbsp;Lourakis&nbsp;and<br>
&nbsp;&nbsp;&nbsp;&nbsp;Argyros&nbsp;that&nbsp;I&nbsp;mentioned&nbsp;earlier&nbsp;in&nbsp;this&nbsp;documentation&nbsp;page.<br>
&nbsp;<br>
&nbsp;<br>
<font size=+2 color="red">CAVEAT<br>
</font>&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Note&nbsp;the&nbsp;bundle-adjustment&nbsp;variant&nbsp;of&nbsp;the&nbsp;Levenberg-Marquardt&nbsp;algorithm<br>
&nbsp;&nbsp;&nbsp;&nbsp;that&nbsp;you&nbsp;see&nbsp;in&nbsp;the&nbsp;bundle-adjust()&nbsp;method&nbsp;of&nbsp;the&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;module&nbsp;is&nbsp;meant&nbsp;for&nbsp;just&nbsp;educational&nbsp;purposes.&nbsp;&nbsp;Being&nbsp;pure&nbsp;Python,&nbsp;it<br>
&nbsp;&nbsp;&nbsp;&nbsp;cannot&nbsp;compete&nbsp;with&nbsp;highly&nbsp;optimized&nbsp;C-based&nbsp;code&nbsp;you&nbsp;will&nbsp;see&nbsp;in,&nbsp;say,<br>
&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;"sba"&nbsp;library&nbsp;mentioned&nbsp;in&nbsp;the&nbsp;article&nbsp;by&nbsp;Lourakis&nbsp;and&nbsp;Argyros&nbsp;that<br>
&nbsp;&nbsp;&nbsp;&nbsp;I&nbsp;have&nbsp;cited&nbsp;earlier&nbsp;in&nbsp;this&nbsp;documentation.&nbsp;&nbsp;So&nbsp;if&nbsp;your&nbsp;needs&nbsp;for<br>
&nbsp;&nbsp;&nbsp;&nbsp;nonlinear&nbsp;least-squares&nbsp;for&nbsp;estimating&nbsp;the&nbsp;structure&nbsp;and&nbsp;the&nbsp;camera<br>
&nbsp;&nbsp;&nbsp;&nbsp;parameters&nbsp;are&nbsp;primarily&nbsp;of&nbsp;the&nbsp;production&nbsp;variety,&nbsp;go&nbsp;directly&nbsp;to<br>
&nbsp;&nbsp;&nbsp;&nbsp;those&nbsp;publicly&nbsp;available&nbsp;libraries.<br>
&nbsp;<br>
&nbsp;<br>
<font size=+2 color="red">INSTALLATION:<br>
</font>&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>&nbsp;class&nbsp;was&nbsp;packaged&nbsp;using&nbsp;setuptools.&nbsp;&nbsp;For<br>
&nbsp;&nbsp;&nbsp;&nbsp;installation,&nbsp;execute&nbsp;the&nbsp;following&nbsp;command-line&nbsp;in&nbsp;the&nbsp;source<br>
&nbsp;&nbsp;&nbsp;&nbsp;directory&nbsp;(this&nbsp;is&nbsp;the&nbsp;directory&nbsp;that&nbsp;contains&nbsp;the&nbsp;setup.py&nbsp;file&nbsp;after<br>
&nbsp;&nbsp;&nbsp;&nbsp;you&nbsp;have&nbsp;downloaded&nbsp;and&nbsp;uncompressed&nbsp;the&nbsp;package):<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sudo&nbsp;python&nbsp;setup.py&nbsp;install<br>
&nbsp;&nbsp;&nbsp;&nbsp;and/or<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sudo&nbsp;python3&nbsp;setup.py&nbsp;install<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;On&nbsp;Linux&nbsp;distributions,&nbsp;this&nbsp;will&nbsp;install&nbsp;the&nbsp;module&nbsp;file&nbsp;at&nbsp;a&nbsp;location<br>
&nbsp;&nbsp;&nbsp;&nbsp;that&nbsp;looks&nbsp;like<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/usr/local/lib/python2.7/dist-packages/<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;for&nbsp;Python3&nbsp;at&nbsp;a&nbsp;location&nbsp;like<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/usr/local/lib/python3.5/dist-packages/<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;you&nbsp;do&nbsp;not&nbsp;have&nbsp;root&nbsp;access,&nbsp;you&nbsp;have&nbsp;the&nbsp;option&nbsp;of&nbsp;working&nbsp;directly<br>
&nbsp;&nbsp;&nbsp;&nbsp;off&nbsp;the&nbsp;directory&nbsp;in&nbsp;which&nbsp;you&nbsp;downloaded&nbsp;the&nbsp;software&nbsp;by&nbsp;simply<br>
&nbsp;&nbsp;&nbsp;&nbsp;placing&nbsp;the&nbsp;following&nbsp;statements&nbsp;at&nbsp;the&nbsp;top&nbsp;of&nbsp;your&nbsp;scripts&nbsp;that&nbsp;use<br>
&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>&nbsp;class:<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;import&nbsp;sys<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sys.path.append(&nbsp;"pathname_to_NonlinearLeastSquares_directory"&nbsp;)<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;To&nbsp;uninstall&nbsp;the&nbsp;module,&nbsp;simply&nbsp;delete&nbsp;the&nbsp;source&nbsp;directory,&nbsp;locate<br>
&nbsp;&nbsp;&nbsp;&nbsp;where&nbsp;the&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>&nbsp;module&nbsp;was&nbsp;installed&nbsp;with&nbsp;"locate<br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>"&nbsp;and&nbsp;delete&nbsp;those&nbsp;files.&nbsp;&nbsp;As&nbsp;mentioned&nbsp;above,&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;full&nbsp;pathname&nbsp;to&nbsp;the&nbsp;installed&nbsp;version&nbsp;is&nbsp;likely&nbsp;to&nbsp;look&nbsp;like<br>
&nbsp;&nbsp;&nbsp;&nbsp;/usr/local/lib/python2.7/dist-packages/<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>*<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;you&nbsp;want&nbsp;to&nbsp;carry&nbsp;out&nbsp;a&nbsp;non-standard&nbsp;install&nbsp;of&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>&nbsp;module,&nbsp;look&nbsp;up&nbsp;the&nbsp;on-line&nbsp;information&nbsp;on<br>
&nbsp;&nbsp;&nbsp;&nbsp;Disutils&nbsp;by&nbsp;pointing&nbsp;your&nbsp;browser&nbsp;to<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://docs.python.org/dist/dist.html">http://docs.python.org/dist/dist.html</a><br>
&nbsp;<br>
&nbsp;<br>
<font size=+2 color="red">BUGS:<br>
</font>&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Please&nbsp;notify&nbsp;the&nbsp;author&nbsp;if&nbsp;you&nbsp;encounter&nbsp;any&nbsp;bugs.&nbsp;&nbsp;When&nbsp;sending<br>
&nbsp;&nbsp;&nbsp;&nbsp;email,&nbsp;please&nbsp;place&nbsp;the&nbsp;string&nbsp;'<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>'&nbsp;in&nbsp;the&nbsp;subject<br>
&nbsp;&nbsp;&nbsp;&nbsp;line.<br>
&nbsp;<br>
&nbsp;<br>
<font size=+2 color="red">ABOUT&nbsp;THE&nbsp;AUTHOR:<br>
</font>&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;author,&nbsp;Avinash&nbsp;Kak,&nbsp;recently&nbsp;finished&nbsp;a&nbsp;17-year&nbsp;long&nbsp;"Objects<br>
&nbsp;&nbsp;&nbsp;&nbsp;Trilogy&nbsp;Project"&nbsp;with&nbsp;the&nbsp;publication&nbsp;of&nbsp;the&nbsp;book&nbsp;"Designing&nbsp;with<br>
&nbsp;&nbsp;&nbsp;&nbsp;Objects"&nbsp;by&nbsp;John-Wiley.&nbsp;If&nbsp;interested,&nbsp;visit&nbsp;his&nbsp;web&nbsp;page&nbsp;at&nbsp;Purdue&nbsp;to<br>
&nbsp;&nbsp;&nbsp;&nbsp;find&nbsp;out&nbsp;what&nbsp;this&nbsp;project&nbsp;was&nbsp;all&nbsp;about.&nbsp;You&nbsp;might&nbsp;like&nbsp;"Designing<br>
&nbsp;&nbsp;&nbsp;&nbsp;with&nbsp;Objects"&nbsp;especially&nbsp;if&nbsp;you&nbsp;enjoyed&nbsp;reading&nbsp;Harry&nbsp;Potter&nbsp;as&nbsp;a&nbsp;kid<br>
&nbsp;&nbsp;&nbsp;&nbsp;(or&nbsp;even&nbsp;as&nbsp;an&nbsp;adult,&nbsp;for&nbsp;that&nbsp;matter).<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;For&nbsp;all&nbsp;issues&nbsp;related&nbsp;to&nbsp;this&nbsp;module,&nbsp;contact&nbsp;the&nbsp;author&nbsp;at<br>
&nbsp;&nbsp;&nbsp;&nbsp;kak@purdue.edu<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;you&nbsp;send&nbsp;email,&nbsp;please&nbsp;place&nbsp;the&nbsp;string&nbsp;"<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>"&nbsp;in<br>
&nbsp;&nbsp;&nbsp;&nbsp;your&nbsp;subject&nbsp;line&nbsp;to&nbsp;get&nbsp;past&nbsp;the&nbsp;author's&nbsp;spam&nbsp;filter.<br>
&nbsp;<br>
&nbsp;<br>
<font size=+2 color="red">COPYRIGHT:<br>
</font>&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Python&nbsp;Software&nbsp;Foundation&nbsp;License<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Copyright&nbsp;2018&nbsp;Avinash&nbsp;Kak<br>
&nbsp;<br>
@endofdocs
<p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#aa55cc">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Imported Modules</strong></big></font></td></tr>
    
<tr><td bgcolor="#aa55cc"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><table width="100%" summary="list"><tr><td width="25%" valign=top><a href="glob.html">glob</a><br>
<a href="itertools.html">itertools</a><br>
</td><td width="25%" valign=top><a href="math.html">math</a><br>
<a href="numpy.html">numpy</a><br>
</td><td width="25%" valign=top><a href="os.html">os</a><br>
<a href="re.html">re</a><br>
</td><td width="25%" valign=top><a href="scipy.html">scipy</a><br>
<a href="sys.html">sys</a><br>
</td></tr></table></td></tr></table><p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#ee77aa">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Classes</strong></big></font></td></tr>
    
<tr><td bgcolor="#ee77aa"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><dl>
<dt><font face="helvetica, arial"><a href="__builtin__.html#object">__builtin__.object</a>
</font></dt><dd>
<dl>
<dt><font face="helvetica, arial"><a href="NonlinearLeastSquares.html#NonlinearLeastSquares">NonlinearLeastSquares</a>
</font></dt></dl>
</dd>
</dl>
 <p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#ffc8d8">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#000000" face="helvetica, arial"><a name="NonlinearLeastSquares">class <strong>NonlinearLeastSquares</strong></a>(<a href="__builtin__.html#object">__builtin__.object</a>)</font></td></tr>
    
<tr><td bgcolor="#ffc8d8"><tt>&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%">Methods defined here:<br>
<dl><dt><a name="NonlinearLeastSquares-__init__"><strong>__init__</strong></a>(self, *args, **kwargs)</dt><dd><tt>constructor</tt></dd></dl>

<dl><dt><a name="NonlinearLeastSquares-bundle_adjust"><strong>bundle_adjust</strong></a>(self, *args, **kwargs)</dt></dl>

<dl><dt><a name="NonlinearLeastSquares-grad_descent"><strong>grad_descent</strong></a>(self)</dt></dl>

<dl><dt><a name="NonlinearLeastSquares-leven_marq"><strong>leven_marq</strong></a>(self)</dt></dl>

<dl><dt><a name="NonlinearLeastSquares-leven_marq_v1_5"><strong>leven_marq_v1_5</strong></a>(self)</dt></dl>

<dl><dt><a name="NonlinearLeastSquares-set_Fvec"><strong>set_Fvec</strong></a>(self, Fvector)</dt><dd><tt>This&nbsp;method&nbsp;supplies&nbsp;the&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>&nbsp;class&nbsp;with&nbsp;the&nbsp;prediction&nbsp;vector<br>
whose&nbsp;each&nbsp;element&nbsp;is&nbsp;a&nbsp;functional&nbsp;form&nbsp;of&nbsp;the&nbsp;prediction&nbsp;in&nbsp;the&nbsp;observed&nbsp;data&nbsp;vector<br>
X.&nbsp;&nbsp;Note&nbsp;that&nbsp;&nbsp;Fvec&nbsp;is&nbsp;a&nbsp;column&nbsp;vector&nbsp;---&nbsp;meaning&nbsp;a&nbsp;numpy&nbsp;matrix&nbsp;with&nbsp;just&nbsp;one&nbsp;column.</tt></dd></dl>

<dl><dt><a name="NonlinearLeastSquares-set_Fvec_BA"><strong>set_Fvec_BA</strong></a>(self, Fvector_BA)</dt><dd><tt>You&nbsp;need&nbsp;to&nbsp;call&nbsp;this&nbsp;method&nbsp;for&nbsp;providing&nbsp;the&nbsp;<a href="#NonlinearLeastSquares">NonlinearLeastSquares</a>&nbsp;class&nbsp;with&nbsp;the<br>
prediction&nbsp;vector&nbsp;if&nbsp;you&nbsp;are&nbsp;going&nbsp;to&nbsp;be&nbsp;using&nbsp;the&nbsp;bundle-adjustment&nbsp;capabilities<br>
of&nbsp;the&nbsp;class.</tt></dd></dl>

<dl><dt><a name="NonlinearLeastSquares-set_X"><strong>set_X</strong></a>(self, X)</dt></dl>

<dl><dt><a name="NonlinearLeastSquares-set_X_BA"><strong>set_X_BA</strong></a>(self, X_BA)</dt></dl>

<dl><dt><a name="NonlinearLeastSquares-set_debug"><strong>set_debug</strong></a>(self, debug)</dt></dl>

<dl><dt><a name="NonlinearLeastSquares-set_display_function"><strong>set_display_function</strong></a>(self, display_function)</dt></dl>

<dl><dt><a name="NonlinearLeastSquares-set_initial_params"><strong>set_initial_params</strong></a>(self, initial_params_dict)</dt></dl>

<dl><dt><a name="NonlinearLeastSquares-set_jacobian_functionals_array"><strong>set_jacobian_functionals_array</strong></a>(self, jacobian_functionals_array)</dt><dd><tt>This&nbsp;method&nbsp;expects&nbsp;for&nbsp;its&nbsp;argument&nbsp;an&nbsp;Nxp&nbsp;matrix&nbsp;of&nbsp;functionals&nbsp;for&nbsp;the&nbsp;partial&nbsp;<br>
derivatives&nbsp;needed&nbsp;for&nbsp;the&nbsp;Jacobian&nbsp;matrix.&nbsp;&nbsp;N&nbsp;is&nbsp;the&nbsp;number&nbsp;of&nbsp;measurements&nbsp;in<br>
the&nbsp;X&nbsp;vector&nbsp;and&nbsp;p&nbsp;is&nbsp;the&nbsp;number&nbsp;of&nbsp;parameters&nbsp;in&nbsp;the&nbsp;model.&nbsp;&nbsp;If&nbsp;you&nbsp;are&nbsp;using<br>
nonlinear&nbsp;least-squares&nbsp;to&nbsp;fit&nbsp;optimal&nbsp;surfaces&nbsp;to&nbsp;noisy&nbsp;measurements&nbsp;over&nbsp;the<br>
xy-plane,&nbsp;each&nbsp;element&nbsp;of&nbsp;the&nbsp;X&nbsp;vector&nbsp;would&nbsp;correspond&nbsp;to&nbsp;one&nbsp;such&nbsp;measurement&nbsp;at<br>
some&nbsp;(x,y)&nbsp;coordinates.&nbsp;And&nbsp;an&nbsp;element&nbsp;the&nbsp;argument&nbsp;jacobian_functionals_array&nbsp;chararray<br>
would&nbsp;correspond&nbsp;to&nbsp;the&nbsp;partial&nbsp;derivative&nbsp;of&nbsp;the&nbsp;model&nbsp;functional&nbsp;that&nbsp;already<br>
has&nbsp;incorporated&nbsp;the&nbsp;(x,y)&nbsp;coordinates&nbsp;corresponding&nbsp;to&nbsp;that&nbsp;row&nbsp;and&nbsp;that&nbsp;is&nbsp;<br>
a&nbsp;partial&nbsp;derivative&nbsp;of&nbsp;the&nbsp;model&nbsp;with&nbsp;respect&nbsp;to&nbsp;the&nbsp;parameter&nbsp;corresponding&nbsp;to<br>
the&nbsp;column.</tt></dd></dl>

<dl><dt><a name="NonlinearLeastSquares-set_num_measurements"><strong>set_num_measurements</strong></a>(self, how_many_measurements)</dt></dl>

<dl><dt><a name="NonlinearLeastSquares-set_num_parameters"><strong>set_num_parameters</strong></a>(self, how_many_parameters)</dt></dl>

<dl><dt><a name="NonlinearLeastSquares-set_params_arranged_list"><strong>set_params_arranged_list</strong></a>(self, params_list)</dt></dl>

<dl><dt><a name="NonlinearLeastSquares-set_params_ordered_list"><strong>set_params_ordered_list</strong></a>(self, params_list)</dt></dl>

<dl><dt><a name="NonlinearLeastSquares-set_problem"><strong>set_problem</strong></a>(self, prob)</dt><dd><tt>If&nbsp;you&nbsp;are&nbsp;using&nbsp;this&nbsp;module&nbsp;to&nbsp;solve&nbsp;structure&nbsp;from&nbsp;camera&nbsp;motion&nbsp;(sfm)&nbsp;problems,&nbsp;use&nbsp;this&nbsp;method<br>
to&nbsp;set&nbsp;'self.<strong>problem</strong>'&nbsp;to&nbsp;'sfm_N'&nbsp;where&nbsp;'N'&nbsp;is&nbsp;the&nbsp;number&nbsp;of&nbsp;world&nbsp;points&nbsp;you&nbsp;are&nbsp;tracking.&nbsp;&nbsp;&nbsp;This&nbsp;<br>
is&nbsp;needed&nbsp;because&nbsp;sfm&nbsp;needs&nbsp;the&nbsp;specialized&nbsp;display&nbsp;function&nbsp;defined&nbsp;for&nbsp;the&nbsp;ProjectiveCamera&nbsp;class.</tt></dd></dl>

<hr>
Data descriptors defined here:<br>
<dl><dt><strong>__dict__</strong></dt>
<dd><tt>dictionary&nbsp;for&nbsp;instance&nbsp;variables&nbsp;(if&nbsp;defined)</tt></dd>
</dl>
<dl><dt><strong>__weakref__</strong></dt>
<dd><tt>list&nbsp;of&nbsp;weak&nbsp;references&nbsp;to&nbsp;the&nbsp;object&nbsp;(if&nbsp;defined)</tt></dd>
</dl>
</td></tr></table></td></tr></table><p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#55aa55">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Data</strong></big></font></td></tr>
    
<tr><td bgcolor="#55aa55"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><strong>__author__</strong> = 'Avinash Kak (kak@purdue.edu)'<br>
<strong>__copyright__</strong> = '(C) 2018 Avinash Kak. Python Software Foundation.'<br>
<strong>__date__</strong> = '2018-November-9'<br>
<strong>__url__</strong> = 'https://engineering.purdue.edu/kak/distNonlinearLeastSquares/NonlinearLeastSquares-2.0.0.html'<br>
<strong>__version__</strong> = '2.0.0'</td></tr></table>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#7799ee">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Author</strong></big></font></td></tr>
<tr><td bgcolor="#7799ee"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%">Avinash&nbsp;Kak&nbsp;(kak@purdue.edu)</td></tr></table>
</body></html>
