import os, logging

from tweak import Config as _Config

class HCAConfig(_Config):
    default_config_file = os.path.join(os.path.dirname(__file__), "default_config.json")

    def __init__(self, *args, **kwargs):
        super(HCAConfig, self).__init__(name="hca", *args, **kwargs)

    @property
    def config_files(self):
        return [self.default_config_file] + _Config.config_files.fget(self)

    @property
    def user_config_dir(self):
        return os.path.join(self._user_config_home, self._name)


_config = None
def get_config():
    global _config
    if _config is None:
        _config = HCAConfig()
    return _config


logger = logging.getLogger("hca")


{"requests": {"GET_/v1/swagger.json": {"request_type": "GET", "num_requests": 1, "min_response_time": 61, "median_response_time": 61, "avg_response_time": 61.0, "max_response_time": 61, "response_times": {"61": 1}, "response_time_percentiles": {"55": 61, "65": 61, "75": 61, "85": 61, "95": 61}, "total_rps": 0.024726339379098235, "total_rpm": 1.483580362745894}, "put_put file: s3://org-humancellatlas-upload-dev/01ed0b2c-30c8-4a79-a564-e5f7c1e131f9/R1.fastq.gz": {"request_type": "put", "num_requests": 150, "min_response_time": 937, "median_response_time": 4700, "avg_response_time": 4958.08, "max_response_time": 10155, "response_times": {"1200": 3, "1300": 1, "1100": 2, "1000": 3, "990": 1, "950": 1, "940": 1, "2400": 4, "1500": 2, "1400": 1, "1600": 4, "1800": 3, "4400": 1, "4600": 2, "1900": 4, "4900": 6, "5500": 5, "4800": 1, "4700": 4, "2200": 2, "2000": 5, "2100": 2, "5100": 1, "6500": 4, "1700": 1, "2300": 1, "2600": 2, "2800": 2, "3000": 2, "3100": 3, "2900": 1, "3400": 4, "3500": 2, "3800": 1, "3700": 2, "3900": 2, "4100": 1, "4300": 4, "4500": 2, "5300": 1, "5400": 1, "6000": 2, "5900": 2, "5800": 1, "6300": 2, "6900": 2, "6600": 1, "7200": 1, "7000": 5, "7100": 1, "7300": 2, "7500": 3, "7400": 1, "7700": 4, "8000": 2, "7800": 1, "8200": 2, "8400": 4, "8600": 2, "8800": 2, "8900": 2, "9300": 1, "9000": 1, "9200": 1, "9500": 2, "9800": 2, "10000": 5, "9900": 1}, "response_time_percentiles": {"55": 4900, "65": 6300, "75": 7300, "85": 8400, "95": 9800}, "total_rps": 3.708950906864735, "total_rpm": 222.5370544118841}, "put_put file: s3://org-humancellatlas-upload-dev/01ed0b2c-30c8-4a79-a564-e5f7c1e131f9/R2.fastq.gz": {"request_type": "put", "num_requests": 128, "min_response_time": 1115, "median_response_time": 3000, "avg_response_time": 3284.0546875, "max_response_time": 6384, "response_times": {"1100": 2, "1300": 3, "1400": 3, "1200": 1, "1700": 4, "1800": 11, "1600": 2, "2100": 6, "2000": 5, "1900": 6, "5400": 4, "1500": 4, "2500": 2, "2300": 4, "2200": 1, "2400": 1, "2600": 2, "2700": 2, "2900": 3, "2800": 1, "3000": 3, "3500": 2, "3300": 3, "3400": 4, "3600": 2, "3800": 3, "4000": 2, "3900": 1, "4200": 5, "4100": 2, "4300": 4, "4500": 3, "4600": 1, "4700": 1, "4900": 4, "4800": 1, "5000": 2, "5200": 1, "5100": 1, "5300": 3, "5500": 2, "5900": 6, "5700": 1, "6200": 1, "6000": 2, "6400": 1}, "response_time_percentiles": {"55": 3400, "65": 4100, "75": 4500, "85": 5300, "95": 5900}, "total_rps": 3.164971440524574, "total_rpm": 189.89828643147445}, "put_put file: s3://org-humancellatlas-upload-dev/01ed0b2c-30c8-4a79-a564-e5f7c1e131f9/analysis_file_0.json": {"request_type": "put", "num_requests": 109, "min_response_time": 1454, "median_response_time": 3200, "avg_response_time": 3421.119266055046, "max_response_time": 7616, "response_times": {"1700": 7, "2100": 6, "1800": 8, "1900": 3, "1600": 5, "1500": 4, "6300": 1, "2000": 2, "7600": 2, "2300": 6, "2200": 3, "2500": 2, "2700": 1, "2600": 1, "3000": 3, "2800": 1, "2900": 1, "3100": 1, "3300": 3, "3200": 3, "3400": 2, "3600": 2, "3800": 4, "4000": 1, "4200": 8, "4500": 3, "4400": 1, "4300": 1, "4800": 1, "4600": 1, "4700": 1, "5000": 3, "5700": 4, "5100": 2, "5200": 1, "5400": 3, "5900": 2, "6700": 1, "6000": 3, "6100": 2}, "response_time_percentiles": {"55": 3300, "65": 4200, "75": 4500, "85": 5400, "95": 6100}, "total_rps": 2.6951709923217075, "total_rpm": 161.71025953930246}, "put_put file: s3://org-humancellatlas-upload-dev/01ed0b2c-30c8-4a79-a564-e5f7c1e131f9/analysis_file_1.json": {"request_type": "put", "num_requests": 95, "min_response_time": 1437, "median_response_time": 2900, "avg_response_time": 3337.5789473684213, "max_response_time": 6156, "response_times": {"2000": 5, "2100": 6, "1800": 9, "1900": 4, "1400": 2, "1600": 2, "2300": 10, "2200": 3, "2600": 1, "2400": 1, "2500": 2, "2700": 1, "2800": 1, "2900": 1, "3000": 2, "3200": 4, "3300": 1, "3600": 2, "3800": 2, "4200": 5, "4000": 3, "4400": 1, "4100": 1, "4300": 2, "4600": 3, "4700": 1, "4900": 2, "5000": 2, "5100": 2, "5300": 1, "5500": 4, "5900": 1, "6100": 3, "6000": 2, "5800": 2, "6200": 1}, "response_time_percentiles": {"55": 3200, "65": 4000, "75": 4600, "85": 5100, "95": 6000}, "total_rps": 2.349002241014332, "total_rpm": 140.94013446085992}, "put_put file: s3://org-humancellatlas-upload-dev/01ed0b2c-30c8-4a79-a564-e5f7c1e131f9/analysis_file_10.json": {"request_type": "put", "num_requests": 81, "min_response_time": 1420, "median_response_time": 2900, "avg_response_time": 3381.4691358024693, "max_response_time": 6132, "response_times": {"1800": 5, "1500": 1, "1700": 1, "1400": 1, "1600": 2, "1900": 1, "2100": 4, "2300": 11, "2200": 2, "2400": 4, "2600": 3, "2500": 2, "2900": 2, "2800": 3, "3200": 3, "3100": 1, "3400": 2, "3600": 2, "3800": 1, "4000": 2, "4200": 3, "4100": 1, "4400": 1, "4300": 3, "4500": 1, "4600": 2, "4700": 2, "4900": 1, "5300": 3, "5400": 2, "5600": 1, "5500": 1, "5900": 1, "5800": 1, "6000": 2, "6100": 3}, "response_time_percentiles": {"55": 3200, "65": 4000, "75": 4400, "85": 5300, "95": 6000}, "total_rps": 2.002833489706957, "total_rpm": 120.17000938241742}, "put_put file: s3://org-humancellatlas-upload-dev/01ed0b2c-30c8-4a79-a564-e5f7c1e131f9/analysis_file_11.json": {"request_type": "put", "num_requests": 67, "min_response_time": 1598, "median_response_time": 3000, "avg_response_time": 3387.5522388059703, "max_response_time": 5944, "response_times": {"1600": 2, "1800": 3, "1900": 3, "2300": 4, "2200": 2, "2100": 1, "2400": 1, "2500": 4, "2600": 3, "2700": 3, "2800": 4, "2900": 3, "3000": 1, "3200": 4, "3500": 2, "3400": 3, "3600": 1, "3800": 1, "4000": 1, "4200": 4, "4100": 2, "4300": 1, "4600": 2, "4900": 2, "5100": 1, "5400": 3, "5500": 1, "5900": 4, "5700": 1}, "response_time_percentiles": {"55": 3200, "65": 3600, "75": 4200, "85": 4900, "95": 5900}, "total_rps": 1.6566647383995816, "total_rpm": 99.3998843039749}, "put_put file: s3://org-humancellatlas-upload-dev/01ed0b2c-30c8-4a79-a564-e5f7c1e131f9/analysis_file_12.json": {"request_type": "put", "num_requests": 58, "min_response_time": 1845, "median_response_time": 3400, "avg_response_time": 3650.448275862069, "max_response_time": 6147, "response_times": {"1800": 1, "1900": 1, "2300": 4, "2400": 1, "2600": 5, "2800": 3, "3000": 3, "3100": 1, "3200": 3, "3300": 6, "3400": 7, "3700": 1, "3800": 1, "4000": 1, "4200": 5, "4400": 1, "4300": 2, "4600": 2, "5000": 2, "5200": 1, "5500": 1, "5900": 2, "5400": 1, "5300": 1, "6100": 2}, "response_time_percentiles": {"55": 3400, "65": 4000, "75": 4300, "85": 5000, "95": 5900}, "total_rps": 1.4341276839876975, "total_rpm": 86.04766103926185}, "put_put file: s3://org-humancellatlas-upload-dev/01ed0b2c-30c8-4a79-a564-e5f7c1e131f9/analysis_file_13.json": {"request_type": "put", "num_requests": 51, "min_response_time": 2196, "median_response_time": 4000, "avg_response_time": 3997.470588235294, "max_response_time": 6165, "response_times": {"2200": 1, "2300": 1, "2700": 1, "2500": 2, "2600": 1, "2800": 2, "2900": 1, "3200": 4, "3400": 2, "3300": 2, "3600": 1, "3700": 3, "4000": 4, "3800": 2, "4200": 7, "4400": 2, "4300": 2, "4600": 2, "4700": 1, "4900": 1, "5000": 1, "5500": 2, "5300": 2, "5700": 1, "6000": 1, "6200": 1, "6100": 1}, "response_time_percentiles": {"55": 4200, "65": 4200, "75": 4600, "85": 5300, "95": 6000}, "total_rps": 1.26104330833401, "total_rpm": 75.6625985000406}, "put_put file: s3://org-humancellatlas-upload-dev/01ed0b2c-30c8-4a79-a564-e5f7c1e131f9/analysis_file_14.json": {"request_type": "put", "num_requests": 45, "min_response_time": 2540, "median_response_time": 4300, "avg_response_time": 4364.8, "max_response_time": 6173, "response_times": {"2500": 1, "2800": 2, "3200": 3, "3000": 1, "3300": 1, "3600": 1, "3700": 2, "4000": 2, "3800": 1, "4200": 5, "4400": 3, "4100": 2, "4300": 4, "4600": 2, "4700": 3, "4900": 2, "5200": 1, "5500": 3, "5400": 1, "5700": 1, "6100": 1, "6200": 1, "6000": 2}, "response_time_percentiles": {"55": 4300, "65": 4600, "75": 4900, "85": 5500, "95": 6000}, "total_rps": 1.1126852720594205, "total_rpm": 66.76111632356523}, "put_put file: s3://org-humancellatlas-upload-dev/01ed0b2c-30c8-4a79-a564-e5f7c1e131f9/analysis_file_15.json": {"request_type": "put", "num_requests": 36, "min_response_time": 3242, "median_response_time": 4900, "avg_response_time": 4746.916666666667, "max_response_time": 5970, "response_times": {"3200": 1, "3300": 1, "3400": 1, "3600": 1, "3800": 3, "4200": 1, "4000": 1, "4300": 2, "4100": 2, "4500": 2, "4600": 1, "4900": 2, "5000": 2, "5100": 2, "5200": 3, "5400": 1, "5500": 1, "5300": 2, "5600": 3, "5700": 1, "5900": 1, "6000": 2}, "response_time_percentiles": {"55": 5000, "65": 5200, "75": 5400, "85": 5600, "95": 6000}, "total_rps": 0.8901482176475365, "total_rpm": 53.408893058852186}, "put_put file: s3://org-humancellatlas-upload-dev/01ed0b2c-30c8-4a79-a564-e5f7c1e131f9/analysis_file_16.json": {"request_type": "put", "num_requests": 25, "min_response_time": 3798, "median_response_time": 5400, "avg_response_time": 5167.08, "max_response_time": 6256, "response_times": {"3800": 2, "4200": 3, "4300": 1, "4100": 1, "4600": 2, "4900": 1, "5400": 1, "5000": 1, "5200": 1, "5500": 2, "5700": 1, "5800": 2, "6100": 2, "6000": 3, "6200": 1, "6300": 1}, "response_time_percentiles": {"55": 5500, "65": 5800, "75": 6000, "85": 6100, "95": 6200}, "total_rps": 0.6181584844774559, "total_rpm": 37.08950906864735}, "put_put file: s3://org-humancellatlas-upload-dev/01ed0b2c-30c8-4a79-a564-e5f7c1e131f9/analysis_file_17.json": {"request_type": "put", "num_requests": 12, "min_response_time": 4149, "median_response_time": 5100, "avg_response_time": 5199.5, "max_response_time": 6121, "response_times": {"4200": 1, "4100": 1, "5100": 2, "4900": 2, "5400": 3, "5800": 1, "6100": 1, "6000": 1}, "response_time_percentiles": {"55": 5400, "65": 5400, "75": 5800, "85": 6000, "95": 6100}, "total_rps": 0.2967160725491788, "total_rpm": 17.802964352950728}, "put_put file: s3://org-humancellatlas-upload-dev/01ed0b2c-30c8-4a79-a564-e5f7c1e131f9/analysis_file_2.json": {"request_type": "put", "num_requests": 6, "min_response_time": 4974, "median_response_time": 5900, "avg_response_time": 5655.5, "max_response_time": 5987, "response_times": {"5000": 1, "5200": 1, "5900": 2, "6000": 2}, "response_time_percentiles": {"55": 5900, "65": 5900, "75": 6000, "85": 6000, "95": 6000}, "total_rps": 0.1483580362745894, "total_rpm": 8.901482176475364}, "put_put file: s3://org-humancellatlas-upload-dev/01ed0b2c-30c8-4a79-a564-e5f7c1e131f9/analysis_file_3.json": {"request_type": "put", "num_requests": 2, "min_response_time": 5894, "median_response_time": 5900, "avg_response_time": 6025.5, "max_response_time": 6157, "response_times": {"6200": 1, "5900": 1}, "response_time_percentiles": {"55": 6200, "65": 6200, "75": 6200, "85": 6200, "95": 6200}, "total_rps": 0.04945267875819647, "total_rpm": 2.967160725491788}}, "failures": {}, "num_requests": 866, "num_requests_fail": 0, "locust_host": "https://dss.dev.data.humancellatlas.org/v1/", "start_time": 1539204318.5572288, "end_time": 1539204363.1595616, "remaining_time": 254948, "function_name": "lambda_locust", "function_version": "$LATEST", "invoked_function_arn": "arn:aws:lambda:us-east-1:861229788715:function:lambda_locust", "memory_limit": "1024", "aws_request_id": "64e325d8-cccd-11e8-900f-ef3c5942d120", "log_group_name": "/aws/lambda/lambda_locust", "log_stream_name": "2018/10/10/[$LATEST]2fc449a17286483b8845ce3534fb3778"}
