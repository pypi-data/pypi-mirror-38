
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>5. smallanglescattering (sas) &#8212; jscatter 0.8.2 documentation</title>
    <link rel="stylesheet" href="_static//default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="shortcut icon" href="_static/Jscatter-32x-32.png"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="6. formfactor (ff)" href="formfactor.html" />
    <link rel="prev" title="4. formel" href="formel.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="formfactor.html" title="6. formfactor (ff)"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="formel.html" title="4. formel"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">jscatter 0.8.2 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="smallanglescattering-sas">
<h1>5. smallanglescattering (sas)<a class="headerlink" href="#smallanglescattering-sas" title="Permalink to this headline">¶</a></h1>
<p>This module allows smearing/desmearing of SAXS/SANS data.</p>
<p>Smearing is for line collimation as in Kratky SAXS cameras and for point collimation for SANS.
For SANS the resolution smearing a la Pedersen is realised (resFunct).</p>
<p>For desmearing the Lake algorithm is an iterative procedure to desmear smeared data.
We follow here the improvements according to Vad using a convergence criterion and smoothing.</p>
<p>2D SAXS dat can be read into sasImage, background subtracted , transmission corrected….</p>
<p>As references the waterXray scattering and a AgBe reference spectrum are available.</p>
<p>For form factors and structure factors see the respective modules.</p>
<div class="section" id="smear-desmear-1d">
<h2>5.1. Smear/desmear 1D<a class="headerlink" href="#smear-desmear-1d" title="Permalink to this headline">¶</a></h2>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#jscatter.smallanglescattering.smear" title="jscatter.smallanglescattering.smear"><code class="xref py py-obj docutils literal notranslate"><span class="pre">smear</span></code></a>(data,&nbsp;beamProfile,&nbsp;**kwargs)</td>
<td>Smearing data for line-collimated SAXS (Kratky camera) or as point collimation SANS/SAXS.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#jscatter.smallanglescattering.desmear" title="jscatter.smallanglescattering.desmear"><code class="xref py py-obj docutils literal notranslate"><span class="pre">desmear</span></code></a>(Ios,&nbsp;beamProfile[,&nbsp;NIterations,&nbsp;…])</td>
<td>Desmearing according to Lake algorithm with possibility to stop recursion at best desmearing.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#jscatter.smallanglescattering.resFunct" title="jscatter.smallanglescattering.resFunct"><code class="xref py py-obj docutils literal notranslate"><span class="pre">resFunct</span></code></a>(S[,&nbsp;collDist,&nbsp;collAperture,&nbsp;…])</td>
<td>Resolution smearing of small angle scattering for SANS or SAXS according to Pedersen for radial averaged data.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#jscatter.smallanglescattering.prepareBeamProfile" title="jscatter.smallanglescattering.prepareBeamProfile"><code class="xref py py-obj docutils literal notranslate"><span class="pre">prepareBeamProfile</span></code></a>([data])</td>
<td>Prepare beam profile from Beam Profile measurement or according to given parameters.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#jscatter.smallanglescattering.getBeamWidth" title="jscatter.smallanglescattering.getBeamWidth"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getBeamWidth</span></code></a>(empty[,&nbsp;minmax,&nbsp;show])</td>
<td>Extract primary beam of empty cell or buffer measurement for semitransparent beam stops.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#jscatter.smallanglescattering.plotBeamProfile" title="jscatter.smallanglescattering.plotBeamProfile"><code class="xref py py-obj docutils literal notranslate"><span class="pre">plotBeamProfile</span></code></a>(beam[,&nbsp;p])</td>
<td>Plots beam profile and weight function according to parameters in beam.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#jscatter.smallanglescattering.transmissionCorrection" title="jscatter.smallanglescattering.transmissionCorrection"><code class="xref py py-obj docutils literal notranslate"><span class="pre">transmissionCorrection</span></code></a>(data,&nbsp;dark[,&nbsp;…])</td>
<td>Subtract dark current, find primary beam, get transmission and normalize by transmission and exposure time.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#jscatter.smallanglescattering.waterXrayScattering" title="jscatter.smallanglescattering.waterXrayScattering"><code class="xref py py-obj docutils literal notranslate"><span class="pre">waterXrayScattering</span></code></a>([composition,&nbsp;T,&nbsp;units])</td>
<td>Absolute scattering of water with components (salt, buffer) at Q=0 as reference for X-ray.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#jscatter.smallanglescattering.AgBeReference" title="jscatter.smallanglescattering.AgBeReference"><code class="xref py py-obj docutils literal notranslate"><span class="pre">AgBeReference</span></code></a>(q,&nbsp;wavelength[,&nbsp;n,&nbsp;ampn,&nbsp;…])</td>
<td>The scattering intensity expected from AgBe as a reference for wavelength calibration.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-jscatter.sasimagelib">
<span id="d-sasimage"></span><h2>5.2. 2D sasImage<a class="headerlink" href="#module-jscatter.sasimagelib" title="Permalink to this headline">¶</a></h2>
<p>Read 2D image files (TIFF) from SAXS cameras and extract the corresponding data.</p>
<p>The sasImage is a 2D array that allows direct subtraction and multiplication (e.g. transmission)
respecting given masks in operations. E.g.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sample</span><span class="o">=</span><span class="n">js</span><span class="o">.</span><span class="n">sas</span><span class="o">.</span><span class="n">sasImage</span><span class="p">(</span><span class="s1">&#39;sample.tiff&#39;</span><span class="p">)</span>
<span class="n">solvent</span><span class="o">=</span><span class="n">js</span><span class="o">.</span><span class="n">sas</span><span class="o">.</span><span class="n">sasImage</span><span class="p">(</span><span class="s1">&#39;solvent.tiff&#39;</span><span class="p">)</span>
<span class="n">corrected</span> <span class="o">=</span> <span class="n">sample</span><span class="o">/</span><span class="n">sampletransmission</span> <span class="o">-</span> <span class="n">solvent</span><span class="o">/</span><span class="n">solventtransmission</span>
</pre></div>
</div>
<p>Calibration of detector distance, radial average, size reduction and more.
.showPolar allows sensitive detection of the beamcenter.</p>
<p>An example is shown in <a class="reference internal" href="#jscatter.sasimagelib.sasImage" title="jscatter.sasimagelib.sasImage"><code class="xref py py-class docutils literal notranslate"><span class="pre">sasImage</span></code></a> .</p>
<hr class="docutils" />
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#jscatter.sasimagelib.sasImage" title="jscatter.sasimagelib.sasImage"><code class="xref py py-obj docutils literal notranslate"><span class="pre">sasImage</span></code></a></td>
<td>Creates sasImage as maskedArray from a detector image for evaluation.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#jscatter.sasimagelib.sasImage.maskRegion" title="jscatter.sasimagelib.sasImage.maskRegion"><code class="xref py py-obj docutils literal notranslate"><span class="pre">sasImage.maskRegion</span></code></a>(xmin,&nbsp;xmax,&nbsp;ymin,&nbsp;ymax)</td>
<td>Mask rectangular region.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#jscatter.sasimagelib.sasImage.maskFromImage" title="jscatter.sasimagelib.sasImage.maskFromImage"><code class="xref py py-obj docutils literal notranslate"><span class="pre">sasImage.maskFromImage</span></code></a>(image)</td>
<td>Use/copy mask from image.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#jscatter.sasimagelib.sasImage.maskRegion" title="jscatter.sasimagelib.sasImage.maskRegion"><code class="xref py py-obj docutils literal notranslate"><span class="pre">sasImage.maskRegion</span></code></a>(xmin,&nbsp;xmax,&nbsp;ymin,&nbsp;ymax)</td>
<td>Mask rectangular region.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#jscatter.sasimagelib.sasImage.maskRegions" title="jscatter.sasimagelib.sasImage.maskRegions"><code class="xref py py-obj docutils literal notranslate"><span class="pre">sasImage.maskRegions</span></code></a>(regions)</td>
<td>Mask several regions.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#jscatter.sasimagelib.sasImage.maskbelowLine" title="jscatter.sasimagelib.sasImage.maskbelowLine"><code class="xref py py-obj docutils literal notranslate"><span class="pre">sasImage.maskbelowLine</span></code></a>(p1,&nbsp;p2)</td>
<td>Mask points at one side of line.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#jscatter.sasimagelib.sasImage.maskTriangle" title="jscatter.sasimagelib.sasImage.maskTriangle"><code class="xref py py-obj docutils literal notranslate"><span class="pre">sasImage.maskTriangle</span></code></a>(p1,&nbsp;p2,&nbsp;p3[,&nbsp;invert])</td>
<td>Mask inside triangle.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#jscatter.sasimagelib.sasImage.mask4Polygon" title="jscatter.sasimagelib.sasImage.mask4Polygon"><code class="xref py py-obj docutils literal notranslate"><span class="pre">sasImage.mask4Polygon</span></code></a>(p1,&nbsp;p2,&nbsp;p3,&nbsp;p4[,&nbsp;invert])</td>
<td>Mask inside polygon of 4 points.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#jscatter.sasimagelib.sasImage.maskCircle" title="jscatter.sasimagelib.sasImage.maskCircle"><code class="xref py py-obj docutils literal notranslate"><span class="pre">sasImage.maskCircle</span></code></a>(center,&nbsp;radius[,&nbsp;invert])</td>
<td>Mask points inside circle.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#jscatter.sasimagelib.sasImage.save" title="jscatter.sasimagelib.sasImage.save"><code class="xref py py-obj docutils literal notranslate"><span class="pre">sasImage.save</span></code></a>(file[,&nbsp;format])</td>
<td>Saves image under the given filename.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#jscatter.sasimagelib.sasImage.setDetectorDistance" title="jscatter.sasimagelib.sasImage.setDetectorDistance"><code class="xref py py-obj docutils literal notranslate"><span class="pre">sasImage.setDetectorDistance</span></code></a>(detector_distance)</td>
<td>Set detector distance.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#jscatter.sasimagelib.sasImage.findCenterOfIntensity" title="jscatter.sasimagelib.sasImage.findCenterOfIntensity"><code class="xref py py-obj docutils literal notranslate"><span class="pre">sasImage.findCenterOfIntensity</span></code></a>([beamcenter,&nbsp;…])</td>
<td>Find beam center as center of intensity around beamcenter.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#jscatter.sasimagelib.sasImage.radialAverage" title="jscatter.sasimagelib.sasImage.radialAverage"><code class="xref py py-obj docutils literal notranslate"><span class="pre">sasImage.radialAverage</span></code></a>([beamcenter,&nbsp;number])</td>
<td>Radial average of image and conversion to wavevector q.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#jscatter.sasimagelib.sasImage.lineAverage" title="jscatter.sasimagelib.sasImage.lineAverage"><code class="xref py py-obj docutils literal notranslate"><span class="pre">sasImage.lineAverage</span></code></a>([beamcenter,&nbsp;number,&nbsp;…])</td>
<td>Line average of image and conversion to wavevector q for line collimation cameras.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#jscatter.sasimagelib.sasImage.recalibrateDetDistance" title="jscatter.sasimagelib.sasImage.recalibrateDetDistance"><code class="xref py py-obj docutils literal notranslate"><span class="pre">sasImage.recalibrateDetDistance</span></code></a>([…])</td>
<td>Recalibration of detectorDistance by AgBe reference for point collimation.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#jscatter.sasimagelib.sasImage.gaussianFilter" title="jscatter.sasimagelib.sasImage.gaussianFilter"><code class="xref py py-obj docutils literal notranslate"><span class="pre">sasImage.gaussianFilter</span></code></a>([sigma])</td>
<td>Gaussian filter in place.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#jscatter.sasimagelib.sasImage.showPolar" title="jscatter.sasimagelib.sasImage.showPolar"><code class="xref py py-obj docutils literal notranslate"><span class="pre">sasImage.showPolar</span></code></a>([beamcenter,&nbsp;scaleR])</td>
<td>Show image transformed to polar coordinates around beamcenter.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#jscatter.sasimagelib.sasImage.reduceSize" title="jscatter.sasimagelib.sasImage.reduceSize"><code class="xref py py-obj docutils literal notranslate"><span class="pre">sasImage.reduceSize</span></code></a>([size])</td>
<td>Reduce size of image using uniform average in box.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#jscatter.sasimagelib.sasImage.show" title="jscatter.sasimagelib.sasImage.show"><code class="xref py py-obj docutils literal notranslate"><span class="pre">sasImage.show</span></code></a>([scale,&nbsp;levels,&nbsp;axis])</td>
<td>Show image.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#jscatter.sasimagelib.sasImage.getfromcomment" title="jscatter.sasimagelib.sasImage.getfromcomment"><code class="xref py py-obj docutils literal notranslate"><span class="pre">sasImage.getfromcomment</span></code></a>(name[,&nbsp;replace,&nbsp;newname])</td>
<td>Extract name from .artist or .imageDescription with attribute name in front.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#jscatter.sasimagelib.sasImage.array" title="jscatter.sasimagelib.sasImage.array"><code class="xref py py-obj docutils literal notranslate"><span class="pre">sasImage.array</span></code></a></td>
<td>Strip of all attributes and return a simple array without mask.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="d-sasimage-convenience">
<h2>5.3. 2D sasImage convenience<a class="headerlink" href="#d-sasimage-convenience" title="Permalink to this headline">¶</a></h2>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#jscatter.sasimagelib.createLogPNG" title="jscatter.sasimagelib.createLogPNG"><code class="xref py py-obj docutils literal notranslate"><span class="pre">createLogPNG</span></code></a>(filenames[,&nbsp;center,&nbsp;size,&nbsp;…])</td>
<td>Create .png files from grayscale images with log scale conversion to values between [1,255].</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#jscatter.sasimagelib.createImageDescriptions" title="jscatter.sasimagelib.createImageDescriptions"><code class="xref py py-obj docutils literal notranslate"><span class="pre">createImageDescriptions</span></code></a>(images)</td>
<td>Create text file with image descriptions as list of content.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#jscatter.sasimagelib.readImages" title="jscatter.sasimagelib.readImages"><code class="xref py py-obj docutils literal notranslate"><span class="pre">readImages</span></code></a>(filenames)</td>
<td>Read a list of images returning sasImage`s.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="housekeeping">
<h2>5.4. Housekeeping<a class="headerlink" href="#housekeeping" title="Permalink to this headline">¶</a></h2>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#jscatter.smallanglescattering.readpdh" title="jscatter.smallanglescattering.readpdh"><code class="xref py py-obj docutils literal notranslate"><span class="pre">readpdh</span></code></a>(pdhFileName)</td>
<td>Opens and reads a SAXS data file in the .pdh (Primary Data Handling) format.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#jscatter.smallanglescattering.autoscaleYinoverlapX" title="jscatter.smallanglescattering.autoscaleYinoverlapX"><code class="xref py py-obj docutils literal notranslate"><span class="pre">autoscaleYinoverlapX</span></code></a>(dataa[,&nbsp;key,&nbsp;keep])</td>
<td>Scales elements of data to have same mean .Y value in the overlap region of .X .</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#jscatter.smallanglescattering.removeSpikesMinmaxMethod" title="jscatter.smallanglescattering.removeSpikesMinmaxMethod"><code class="xref py py-obj docutils literal notranslate"><span class="pre">removeSpikesMinmaxMethod</span></code></a>(dataa[,&nbsp;order,&nbsp;…])</td>
<td>Takes a dataset and removes single spikes from data by substitution with spline.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#jscatter.smallanglescattering.removeSpikes" title="jscatter.smallanglescattering.removeSpikes"><code class="xref py py-obj docutils literal notranslate"><span class="pre">removeSpikes</span></code></a>(dataa[,&nbsp;xmin,&nbsp;xmax,&nbsp;medwindow,&nbsp;…])</td>
<td>Takes a dataset and removes single spikes.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#jscatter.smallanglescattering.locateFiles" title="jscatter.smallanglescattering.locateFiles"><code class="xref py py-obj docutils literal notranslate"><span class="pre">locateFiles</span></code></a>(pattern[,&nbsp;root])</td>
<td>Locate all files matching supplied filename pattern in and below supplied root directory.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#jscatter.smallanglescattering.copyFiles" title="jscatter.smallanglescattering.copyFiles"><code class="xref py py-obj docutils literal notranslate"><span class="pre">copyFiles</span></code></a>(pattern[,&nbsp;root,&nbsp;destination,&nbsp;link])</td>
<td>Copies all files matching pattern in tree below root to destination directory</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#jscatter.smallanglescattering.addXMLParameter" title="jscatter.smallanglescattering.addXMLParameter"><code class="xref py py-obj docutils literal notranslate"><span class="pre">addXMLParameter</span></code></a>(data)</td>
<td>Adds the parameters stored in xml part of a .pdh file as eg.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#jscatter.smallanglescattering.moveSAXSPACE" title="jscatter.smallanglescattering.moveSAXSPACE"><code class="xref py py-obj docutils literal notranslate"><span class="pre">moveSAXSPACE</span></code></a>(pattern[,&nbsp;root,&nbsp;destination,&nbsp;…])</td>
<td>Read SAXSPACE .pdh files and removes spikes by removeSpikes.</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<span class="target" id="module-jscatter.smallanglescattering"></span><p>This module allows smearing/desmearing of SAXS/SANS data.</p>
<p>Smearing is for line collimation as in Kratky SAXS cameras and for point collimation for SANS.
For SANS the resolution smearing a la Pedersen is realised (resFunct).</p>
<p>For desmearing the Lake algorithm is an iterative procedure to desmear smeared data.
We follow here the improvements according to Vad using a convergence criterion and smoothing.</p>
<p>2D SAXS dat can be read into sasImage, background subtracted , transmission corrected….</p>
<p>As references the waterXray scattering and a AgBe reference spectrum are available.</p>
<p>For form factors and structure factors see the respective modules.</p>
<dl class="function">
<dt id="jscatter.smallanglescattering.AgBeReference">
<code class="descclassname">jscatter.smallanglescattering.</code><code class="descname">AgBeReference</code><span class="sig-paren">(</span><em>q, wavelength, n=array([1, 2, 3, 4, 5, 6, 7, 8, 9]), ampn=[1, 1, 1, 1, 1, 1, 1, 1, 1, 1], domainsize=100, udw=0.1, asym=0, lg=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jscatter/smallanglescattering.html#AgBeReference"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#jscatter.smallanglescattering.AgBeReference" title="Permalink to this definition">¶</a></dt>
<dd><p>The scattering intensity expected from AgBe as a reference for wavelength calibration.</p>
<p>The intensities assume a d-spacing of 5.8378 nm and a reduction of the intensity as q**-2.
The domain size determines the width according to Scherrer equation <a class="reference internal" href="#r98c57c382587-2" id="id1">[2]</a>. The first peak is at 1.076 1/nm.
The result needs to be convoluted with the instrument resolution by resFunct or smear.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>q</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">Wavevector</p>
</dd>
<dt><strong>wavelength</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Wavelength</p>
</dd>
<dt><strong>n</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array of int</span></dt>
<dd><p class="first last">Order of the peaks.</p>
</dd>
<dt><strong>ampn</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list of float</span></dt>
<dd><p class="first last">Amplitudes of the peaks</p>
</dd>
<dt><strong>domainsize</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Domainsize of AgBe crystals in nm.
default 100 nm as is given in <a class="reference internal" href="#r98c57c382587-1" id="id2">[1]</a>.</p>
</dd>
<dt><strong>udw</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Displacement u in Debye Waller factor exp(-u**2*q**2/3)</p>
</dd>
<dt><strong>asym</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Factor asymmetry in Voigt function describing the peaks.</p>
</dd>
<dt><strong>lg</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Lorenzian/gaussian fraction of both FWHM, describes the contributions of gaussian and lorenzian shape.
See Voigt for details.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>dataArray</strong></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="r98c57c382587-1" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[1]</td><td><em>(<a class="fn-backref" href="#id2">1</a>, <a class="fn-backref" href="#id3">2</a>)</em> T. C. Huang, H. Toraya, T. N. Blanton and Y. Wu
X-ray Powder Diffraction Analysis of Silver Behenate, a Possible Low-Angle Diffraction Standard
J. Appl.Cryst.(1993).26,180-184</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="r98c57c382587-2" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[2]</td><td><em>(<a class="fn-backref" href="#id1">1</a>, <a class="fn-backref" href="#id4">2</a>)</em> Patterson, A.
The Scherrer Formula for X-Ray Particle Size Determination
Phys. Rev. 56 (10): 978–982 (1939)
doi:10.1103/PhysRev.56.978.</td></tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="jscatter.smallanglescattering.addXMLParameter">
<code class="descclassname">jscatter.smallanglescattering.</code><code class="descname">addXMLParameter</code><span class="sig-paren">(</span><em>data</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jscatter/smallanglescattering.html#addXMLParameter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#jscatter.smallanglescattering.addXMLParameter" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds the parameters stored in xml part of a .pdh file as eg. in SAXSPACE .pdh files.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>data</strong> <span class="classifier-delimiter">:</span> <span class="classifier">dataArray</span></dt>
<dd><p class="first last">Already read pdh file.
XML content is found in comments of the read files and starts with ‘&lt;’.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="jscatter.smallanglescattering.autoscaleYinoverlapX">
<code class="descclassname">jscatter.smallanglescattering.</code><code class="descname">autoscaleYinoverlapX</code><span class="sig-paren">(</span><em>dataa</em>, <em>key=None</em>, <em>keep='lowest'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jscatter/smallanglescattering.html#autoscaleYinoverlapX"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#jscatter.smallanglescattering.autoscaleYinoverlapX" title="Permalink to this definition">¶</a></dt>
<dd><p>Scales elements of data to have same mean .Y value in the overlap region of .X .</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>dataa</strong> <span class="classifier-delimiter">:</span> <span class="classifier">dataList</span></dt>
<dd><p class="first last">data to scale</p>
</dd>
<dt><strong>key</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Data are grouped into unique values of attribute key before scaling.
E.g. to do it for a series of concentrations for each concentration individually.</p>
</dd>
<dt><strong>keep</strong> <span class="classifier-delimiter">:</span> <span class="classifier">default ‘l’</span></dt>
<dd><p class="first last">If ‘l’ the lowest X are kept and higher X are scaled successively to next lower X.
Anything else highest X are kept and other are scaled to next higher.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>dataList</strong></dt>
<dd><p class="first last">new scaled dataList</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>First data are sorted along .X.mean()
scaling value is stored in .autoscalefactor</p>
</dd></dl>

<dl class="function">
<dt id="jscatter.smallanglescattering.copyFiles">
<code class="descclassname">jscatter.smallanglescattering.</code><code class="descname">copyFiles</code><span class="sig-paren">(</span><em>pattern</em>, <em>root='.'</em>, <em>destination='copy'</em>, <em>link=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jscatter/smallanglescattering.html#copyFiles"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#jscatter.smallanglescattering.copyFiles" title="Permalink to this definition">¶</a></dt>
<dd><p>Copies all files matching pattern in tree below root to destination directory</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>pattern</strong> <span class="classifier-delimiter">:</span> <span class="classifier">file pattern</span></dt>
<dd><p class="first last">Pattern used in fnmatch.filter</p>
</dd>
<dt><strong>root</strong> <span class="classifier-delimiter">:</span> <span class="classifier">directory, default is os.curdir</span></dt>
<dd><p class="first last">Directory where to start</p>
</dd>
<dt><strong>destination</strong> <span class="classifier-delimiter">:</span> <span class="classifier">dirname</span></dt>
<dd><p class="first last">Destination</p>
</dd>
<dt><strong>link</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">If True links are created.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="jscatter.smallanglescattering.desmear">
<code class="descclassname">jscatter.smallanglescattering.</code><code class="descname">desmear</code><span class="sig-paren">(</span><em>Ios</em>, <em>beamProfile</em>, <em>NIterations=-15</em>, <em>windowsize=4</em>, <em>qmax=4</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jscatter/smallanglescattering.html#desmear"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#jscatter.smallanglescattering.desmear" title="Permalink to this definition">¶</a></dt>
<dd><p>Desmearing according to Lake algorithm with possibility to stop recursion at best desmearing.</p>
<p>For negative NIterations the iterations are stopped if a convergence criterion reaches a minimum as described by Vad <a class="reference internal" href="#r02a23bbf8122-2" id="id5">[2]</a>.
In each step a smoothing based on the ratio desmeared/observed as described in <a class="reference internal" href="#r02a23bbf8122-2" id="id6">[2]</a>
is used (point average with windowsize).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>Ios</strong> <span class="classifier-delimiter">:</span> <span class="classifier">dataArray</span></dt>
<dd><p class="first last">Original smeared data</p>
</dd>
<dt><strong>beamProfile</strong> <span class="classifier-delimiter">:</span> <span class="classifier">dataArray</span></dt>
<dd><p class="first last">Beam profile as prepared with prepareBeamProfile</p>
</dd>
<dt><strong>NIterations</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int, default=-15</span></dt>
<dd><p class="first last">Number of iterations to stop.
Negative values indicate to use the convergence criterion described by Vad <a class="reference internal" href="#r02a23bbf8122-2" id="id7">[2]</a> and abs(NIterations)
gives the maximum iterations to stop.</p>
</dd>
<dt><strong>qmax</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float, default=4</span></dt>
<dd><p class="first last">Maximum in scattering vector q up to where the convergence criterion is evaluated.
This reduces the influence of the noise at larger a.</p>
</dd>
<dt><strong>windowsize</strong> <span class="classifier-delimiter">:</span> <span class="classifier">odd int , default=4</span></dt>
<dd><p class="first last">Window size for smoothing in each step of desmearing (running average).</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>dataArray</strong></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="r02a23bbf8122-1" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id8">[1]</a></td><td>Lake, J. A. (1967). Acta Cryst. 23, 191–194.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="r02a23bbf8122-2" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[2]</td><td><em>(<a class="fn-backref" href="#id5">1</a>, <a class="fn-backref" href="#id6">2</a>, <a class="fn-backref" href="#id7">3</a>, <a class="fn-backref" href="#id9">4</a>)</em> Comparison of iterative desmearing procedures for one-dimensional small-angle scattering data
Vad and Sager, J. Appl. Cryst. (2011) 44,32-42</td></tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="jscatter.smallanglescattering.fitDarkCurrent">
<code class="descclassname">jscatter.smallanglescattering.</code><code class="descname">fitDarkCurrent</code><span class="sig-paren">(</span><em>darkfile</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jscatter/smallanglescattering.html#fitDarkCurrent"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#jscatter.smallanglescattering.fitDarkCurrent" title="Permalink to this definition">¶</a></dt>
<dd><p>Fits dark current with 5th order polynom + cosine.</p>
<p>This is dangerous as the darkcurrent has a noise that is not random but depends on
used detector and count time.</p>
</dd></dl>

<dl class="function">
<dt id="jscatter.smallanglescattering.getBeamWidth">
<code class="descclassname">jscatter.smallanglescattering.</code><code class="descname">getBeamWidth</code><span class="sig-paren">(</span><em>empty</em>, <em>minmax='auto'</em>, <em>show=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jscatter/smallanglescattering.html#getBeamWidth"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#jscatter.smallanglescattering.getBeamWidth" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract primary beam of empty cell or buffer measurement for semitransparent beam stops.</p>
<p>The primary beam is searched and cut between the next minima found, then normalized.
Additionally a Gaussian fit is done and hwhm is included in result profile.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>empty</strong> <span class="classifier-delimiter">:</span> <span class="classifier">dataArray</span></dt>
<dd><p class="first last">Empty cell measurement with the transmitted beam included.</p>
</dd>
<dt><strong>minmax</strong> <span class="classifier-delimiter">:</span> <span class="classifier">‘auto’,[float,float]</span></dt>
<dd><p class="first last">Automatic or interval for search of primary beam.
E.g. [-0.03,0.03] allow for explicitly setting the interval.</p>
</dd>
<dt><strong>show</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">Show the fit result</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>dataArray with beam width profile</strong></dt>
<dd><p class="first last">.sigma sigma of fit with Gaussian
.hwhm  half width half maximum</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="jscatter.smallanglescattering.locateFiles">
<code class="descclassname">jscatter.smallanglescattering.</code><code class="descname">locateFiles</code><span class="sig-paren">(</span><em>pattern</em>, <em>root='.'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jscatter/smallanglescattering.html#locateFiles"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#jscatter.smallanglescattering.locateFiles" title="Permalink to this definition">¶</a></dt>
<dd><p>Locate all files matching supplied filename pattern in and below supplied root directory.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>pattern</strong> <span class="classifier-delimiter">:</span> <span class="classifier">file pattern</span></dt>
<dd><p class="first last">Pattern used in fnmatch.filter</p>
</dd>
<dt><strong>root</strong> <span class="classifier-delimiter">:</span> <span class="classifier">directory, default is os.curdir</span></dt>
<dd><p class="first last">Directory where to start</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>file list</strong></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="jscatter.smallanglescattering.moveSAXSPACE">
<code class="descclassname">jscatter.smallanglescattering.</code><code class="descname">moveSAXSPACE</code><span class="sig-paren">(</span><em>pattern</em>, <em>root='./'</em>, <em>destination='./despiked'</em>, <em>medwindow=5</em>, <em>SGwindow=5</em>, <em>sigma=0.2</em>, <em>order=2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jscatter/smallanglescattering.html#moveSAXSPACE"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#jscatter.smallanglescattering.moveSAXSPACE" title="Permalink to this definition">¶</a></dt>
<dd><p>Read SAXSPACE .pdh files and removes spikes by removeSpikes.</p>
<p>This is mainly for use at JCNS SAXSPACE with CCD camera as detector :-))))</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>pattern</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Search pattern for filenames</p>
</dd>
<dt><strong>root</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Root path</p>
</dd>
<dt><strong>destination</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Where to save the files</p>
</dd>
<dt><strong>medwindow</strong> <span class="classifier-delimiter">:</span> <span class="classifier">odd integer</span></dt>
<dd><p class="first last">Window size of scipy.signal.medfilt</p>
</dd>
<dt><strong>SGwindow</strong> <span class="classifier-delimiter">:</span> <span class="classifier">odd int, None</span></dt>
<dd><p class="first last">Savitzky-Golay filter see scipy.signal.savgol_filter</p>
</dd>
<dt><strong>order</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Polynominal order of scipy.signal.savgol_filter</p>
</dd>
<dt><strong>sigma</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Deviation factor of eY
If datapoint-median&gt; sigma*std its a spike</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Default values are adjusted to typical SAXSPACE measurement.</p>
</dd></dl>

<dl class="function">
<dt id="jscatter.smallanglescattering.plotBeamProfile">
<code class="descclassname">jscatter.smallanglescattering.</code><code class="descname">plotBeamProfile</code><span class="sig-paren">(</span><em>beam</em>, <em>p=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jscatter/smallanglescattering.html#plotBeamProfile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#jscatter.smallanglescattering.plotBeamProfile" title="Permalink to this definition">¶</a></dt>
<dd><p>Plots beam profile and weight function according to parameters in beam.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>beam</strong></dt>
<dd><p class="first last">beam with parameters</p>
</dd>
<dt><strong>p</strong> <span class="classifier-delimiter">:</span> <span class="classifier">GracePlot instance</span></dt>
<dd><p class="first last">Reuse the given plot</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="jscatter.smallanglescattering.prepareBeamProfile">
<code class="descclassname">jscatter.smallanglescattering.</code><code class="descname">prepareBeamProfile</code><span class="sig-paren">(</span><em>data=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jscatter/smallanglescattering.html#prepareBeamProfile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#jscatter.smallanglescattering.prepareBeamProfile" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepare beam profile from Beam Profile measurement or according to given parameters.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>data</strong> <span class="classifier-delimiter">:</span> <span class="classifier">dataArray,’trapez’,’SANS’</span></dt>
<dd><dl class="first last docutils">
<dt>Contains measured beam profile, explicit Gaussian width list or type ‘SANS’, ‘trapz’.</dt>
<dd><ul class="first last simple">
<li>dataArray Line collimation as measured can be given and will be smoothed and made symmetric.</li>
<li>dataArray with explicit given Gaussian width for each Q values, missing values will be interpolated.</li>
<li>‘trapez’ : Line collimation  with trapezoidal parameters a, b, bxw, dIW.</li>
<li>‘SANS’ : Smearing a la Pedersen; see resFunct for parameters</li>
</ul>
</dd>
</dl>
</dd>
<dt><strong>collDist,collAperture,detDist,sampleAperture</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Parameters as described in resFunct for SANS
These are determined from the experimental setup.</p>
</dd>
<dt><strong>wavelength,wavespread,dpixelWidth,dringwidth,extrapolfunc</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Parameters as described in resFunct for SANS
These are determined from the experimental setup.</p>
</dd>
<dt><strong>a</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Larger full length of trapezoidal profile in detector q units.
Ignored for measured profile.</p>
</dd>
<dt><strong>b</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Shorter full length of trapezoidal profile in detector q units
If a=b ==&gt; a=a*(1+1e-7), b=b*(1-1e-7)
Ignored for measured profile.</p>
</dd>
<dt><strong>bxw</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float,dataArray</span></dt>
<dd><p class="first last">Beam width profile.
Use getBeamWidth to cut the primary beam and fit a Gaussian.
A float describes the beam half-width at half maximum (hwhm of Gaussian).
If bxw is the profile prepared by getBeamWidth the experimental profile is used.</p>
</dd>
<dt><strong>dIW</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Detector slit width in detector q units.
Length on detector to integrate parallel to beam length for line collimation.
On my SAXSpace this is 1.332 as given in the header of the file (20 mm in real coordinates).</p>
</dd>
<dt><strong>wavelength</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float,</span></dt>
<dd><p class="first last">Wavelength in nm
default 0.155418 nm for SAXS 0.5 nm for SANS</p>
</dd>
<dt><strong>detDist</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float, default 305.3558</span></dt>
<dd><p class="first last">Detector distance in units mm
Default is detector distance of SAXSpace</p>
</dd>
<dt><strong>explicit</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">For explicit given Gaussian width the index of the column with the width.
For merged dataFiles of <a class="reference external" href="mailto:KWS2&#37;&#52;&#48;MLZ">KWS2<span>&#64;</span>MLZ</a> this is the forth column with index 3.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>beam profile as dataArray</strong></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<ul class="simple">
<li>For measured beam profiles parameters a,b are determined from the flanks for trapezoidal profile.</li>
<li>Detector q units are equivalent to the pixel distance as expressed in a corrected measurement.</li>
<li>For ‘explicit’ Gaussian width a SANS measurement as on KWS2 can be used which has sigma as 4th column.
Missing values are interpolated.</li>
</ul>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># use as</span>
<span class="c1"># prepare measured beamprofile</span>
<span class="n">mbeam</span> <span class="o">=</span> <span class="n">js</span><span class="o">.</span><span class="n">sas</span><span class="o">.</span><span class="n">prepareBeamProfile</span><span class="p">(</span><span class="n">beam</span><span class="p">,</span> <span class="n">bxw</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span> <span class="n">dIW</span><span class="o">=</span><span class="mf">1.</span><span class="p">)</span>
<span class="c1"># prepare profile with trapezoidal shape (a,b are fitted above)</span>
<span class="n">tbeam</span> <span class="o">=</span> <span class="n">js</span><span class="o">.</span><span class="n">sas</span><span class="o">.</span><span class="n">prepareBeamProfile</span><span class="p">(</span><span class="s1">&#39;trapz&#39;</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="n">mbeam</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="n">mbeam</span><span class="o">.</span><span class="n">b</span><span class="p">,</span> <span class="n">bxw</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span> <span class="n">dIW</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="c1"># prepare profile SANS (missing parameters get defaults)</span>
<span class="n">Sbeam</span> <span class="o">=</span> <span class="n">js</span><span class="o">.</span><span class="n">sas</span><span class="o">.</span><span class="n">prepareBeamProfile</span><span class="p">(</span><span class="s1">&#39;SANS&#39;</span><span class="p">,</span> <span class="n">detDist</span><span class="o">=</span><span class="mi">2000</span><span class="p">,</span><span class="n">wavelength</span><span class="o">=</span><span class="mf">0.4</span><span class="p">,</span><span class="n">wavespread</span><span class="o">=</span><span class="mf">0.15</span><span class="p">)</span>
<span class="c1"># prepare profile with explicit given Gaussian width in column 3 as e.g. KWS2@MLZ</span>
<span class="n">Gbeam</span> <span class="o">=</span> <span class="n">js</span><span class="o">.</span><span class="n">sas</span><span class="o">.</span><span class="n">prepareBeamProfile</span><span class="p">(</span><span class="n">measurement</span><span class="p">,</span><span class="n">explicit</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="jscatter.smallanglescattering.readpdh">
<code class="descclassname">jscatter.smallanglescattering.</code><code class="descname">readpdh</code><span class="sig-paren">(</span><em>pdhFileName</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jscatter/smallanglescattering.html#readpdh"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#jscatter.smallanglescattering.readpdh" title="Permalink to this definition">¶</a></dt>
<dd><p>Opens and reads a SAXS data file in the .pdh (Primary Data Handling) format.</p>
<p>If data contain X values &lt;0 it is assumed that the primary beam is included as for SAXSpace instruments.
Use js.sas.transmissionCorrection to subtract dark counts and do transmission correction.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>pdhFileName</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">file name</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>dataArray</strong></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Alternatively the files can be read ignoring the information in the header (it is stored in the comments)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">data</span><span class="o">=</span><span class="n">dA</span><span class="p">(</span><span class="n">pdhFileName</span><span class="p">,</span><span class="n">lines2parameter</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span>
</pre></div>
</div>
<p><strong>PDH format</strong> used in the  PCG SAXS software suite developed by the Glatter group at the University of Graz, Austria.
This format is described in the appendix of the PCG manual (below from version 4.05.12 page 159).</p>
<p>In the PDH format, lines 1-5 contain header information, followed by the SAXS data.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">line</span> <span class="mi">1</span><span class="p">:</span>  <span class="nb">format</span> <span class="n">A80</span>             <span class="o">-&gt;</span> <span class="n">description</span>
<span class="n">line</span> <span class="mi">2</span><span class="p">:</span>  <span class="nb">format</span> <span class="mi">16</span><span class="p">(</span><span class="n">A4</span><span class="p">,</span><span class="mi">1</span><span class="n">X</span><span class="p">)</span>       <span class="o">-&gt;</span> <span class="n">description</span> <span class="ow">in</span> <span class="mi">16</span><span class="n">x4</span> <span class="n">character</span> <span class="n">groups</span> <span class="p">(</span><span class="mi">1</span><span class="n">X</span> <span class="o">=</span> <span class="n">space</span> <span class="n">separated</span><span class="p">)</span>
<span class="n">line</span> <span class="mi">3</span><span class="p">:</span>  <span class="nb">format</span> <span class="mi">8</span><span class="p">(</span><span class="n">I9</span><span class="p">,</span><span class="mi">1</span><span class="n">X</span><span class="p">)</span>        <span class="o">-&gt;</span> <span class="mi">8</span> <span class="n">integers</span> <span class="p">(</span><span class="mi">1</span><span class="n">X</span> <span class="o">=</span> <span class="n">space</span> <span class="n">separated</span><span class="p">)</span>
<span class="n">line</span> <span class="mi">4</span><span class="p">:</span>  <span class="nb">format</span> <span class="mi">5</span><span class="p">(</span><span class="n">E14</span><span class="o">.</span><span class="mi">6</span><span class="p">,</span><span class="mi">1</span><span class="n">X</span><span class="p">)</span>     <span class="o">-&gt;</span> <span class="mi">5</span> <span class="nb">float</span> <span class="p">(</span><span class="mi">1</span><span class="n">X</span> <span class="o">=</span> <span class="n">space</span> <span class="n">separated</span><span class="p">)</span>
<span class="n">line</span> <span class="mi">5</span><span class="p">:</span>  <span class="nb">format</span> <span class="mi">5</span><span class="p">(</span><span class="n">E14</span><span class="o">.</span><span class="mi">6</span><span class="p">,</span><span class="mi">1</span><span class="n">X</span>      <span class="o">-&gt;</span> <span class="mi">5</span> <span class="nb">float</span><span class="p">(</span><span class="mi">1</span><span class="n">X</span> <span class="o">=</span> <span class="n">space</span> <span class="n">separated</span><span class="p">)</span>
<span class="n">line</span> <span class="mi">6</span><span class="o">+</span>  <span class="nb">format</span> <span class="mi">3</span><span class="p">(</span><span class="n">E14</span><span class="o">.</span><span class="mi">6</span><span class="p">,</span><span class="mi">1</span><span class="n">X</span><span class="p">)</span>     <span class="o">-</span> <span class="n">SAXS</span> <span class="n">data</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">error</span> <span class="p">(</span><span class="mi">1</span><span class="n">X</span> <span class="o">=</span> <span class="n">space</span> <span class="n">separated</span><span class="p">)</span>
</pre></div>
</div>
<dl class="docutils">
<dt>with:</dt>
<dd><ul class="first last simple">
<li>line 3 field 0 : number of points</li>
<li>line 4 field 4 : normalization constant (default 1, never zero!!)</li>
</ul>
</dd>
</dl>
<p>Anything else can have different meanings.</p>
<dl class="docutils">
<dt>The SAXSpace and SAXSess (AntonPaar) format add:</dt>
<dd><ul class="first last simple">
<li>line 4 field 2 : detector distance in mm</li>
<li>line 4 field 5 : wavelength</li>
<li>line 5 field 2 : detector slit length (equivalent to width of integration area) in q units</li>
</ul>
</dd>
</dl>
<p>Additional xml parameter as in the SAXSPACE format appended can be extracted to attributes by addXMLParameter.
Mainly this is “Exposure” time.</p>
<p>Example data for SAXSpace</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">emptyline</span><span class="o">&gt;</span>
<span class="n">SAXS</span> <span class="n">BOX</span>
      <span class="mi">2057</span>         <span class="mi">0</span>         <span class="mi">0</span>         <span class="mi">0</span>         <span class="mi">0</span>         <span class="mi">0</span>         <span class="mi">0</span>         <span class="mi">0</span>
  <span class="mf">0.000000E+00</span>   <span class="mf">3.052516E+02</span>   <span class="mf">0.000000E+00</span>   <span class="mf">1.000000E+00</span>   <span class="mf">1.541800E-01</span>
  <span class="mf">0.000000E+00</span>   <span class="mf">1.332843E+00</span>   <span class="mf">0.000000E+00</span>   <span class="mf">0.000000E+00</span>   <span class="mf">0.000000E+00</span>
<span class="o">-</span><span class="mf">1.033335E-01</span>   <span class="mf">2.241656E+03</span>   <span class="mf">1.024389E+00</span>
<span class="o">-</span><span class="mf">1.001430E-01</span>   <span class="mf">2.199972E+03</span>   <span class="mf">1.052537E+00</span>
<span class="o">...</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="jscatter.smallanglescattering.removeSpikes">
<code class="descclassname">jscatter.smallanglescattering.</code><code class="descname">removeSpikes</code><span class="sig-paren">(</span><em>dataa</em>, <em>xmin=None</em>, <em>xmax=None</em>, <em>medwindow=5</em>, <em>SGwindow=None</em>, <em>sigma=0.2</em>, <em>SGorder=2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jscatter/smallanglescattering.html#removeSpikes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#jscatter.smallanglescattering.removeSpikes" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes a dataset and removes single spikes.</p>
<p>A median filter is used to find single spikes.
If abs(data.Y-medianY)/data.eY&gt;sigma then the medianY value is used.
If SGwindow!=None  Savitzky-Golay filtered values are used.
If sigma is 0 then new values (median or Savitzky-Golay filtered) are used everywhere.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>xmin,xmax</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Minimum and maximum X values</p>
</dd>
<dt><strong>dataa</strong> <span class="classifier-delimiter">:</span> <span class="classifier">dataArray</span></dt>
<dd><p class="first last">dataset with eY data</p>
</dd>
<dt><strong>medwindow</strong> <span class="classifier-delimiter">:</span> <span class="classifier">odd integer</span></dt>
<dd><p class="first last">window size of scipy.signal.medfilt</p>
</dd>
<dt><strong>SGwindow</strong> <span class="classifier-delimiter">:</span> <span class="classifier">odd int, None</span></dt>
<dd><p class="first last">Savitzky-Golay filter see scipy.signal.savgol_filter
without the spikes; window should be smaller than instrument resolution</p>
</dd>
<dt><strong>SGorder</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Polynomial order of scipy.signal.savgol_filter
needs to be smaller than SGwindow</p>
</dd>
<dt><strong>sigma</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">relative deviation from eY
if datapoint-median&gt; sigma*eY its a spike</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>Filtered and smoothed dataArray</strong></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="jscatter.smallanglescattering.removeSpikesMinmaxMethod">
<code class="descclassname">jscatter.smallanglescattering.</code><code class="descname">removeSpikesMinmaxMethod</code><span class="sig-paren">(</span><em>dataa</em>, <em>order=7</em>, <em>sigma=2</em>, <em>nrepeat=1</em>, <em>removePoints=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jscatter/smallanglescattering.html#removeSpikesMinmaxMethod"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#jscatter.smallanglescattering.removeSpikesMinmaxMethod" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes a dataset and removes single spikes from data by substitution with spline.</p>
<p>Find minima and maxima of data including double point spikes; no 3 point spikes
scipy.signal.argrelextrema with np.greater and np.less are used to find extrema</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>dataa</strong> <span class="classifier-delimiter">:</span> <span class="classifier">dataArray</span></dt>
<dd><p class="first last">Dataset with eY data.</p>
</dd>
<dt><strong>order</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Number of points see scipy.signal.argrelextrema.
Distance between extrema.</p>
</dd>
<dt><strong>sigma</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Deviation factor from std dev; from eY.
If datapoint -spline&gt; sigma*std its a spike.</p>
</dd>
<dt><strong>nrepeat</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Repeat the procedure nrepeat times.</p>
</dd>
<dt><strong>removePoints</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list of integer</span></dt>
<dd><p class="first last">Instrument related points to remove because of dead pixels.
‘JCNS’ results in a list for SAXSPACE at JCNS Jülich.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>data with spikes removed</strong></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="jscatter.smallanglescattering.resFunct">
<code class="descclassname">jscatter.smallanglescattering.</code><code class="descname">resFunct</code><span class="sig-paren">(</span><em>S</em>, <em>collDist=8000.0</em>, <em>collAperture=10</em>, <em>detDist=8000.0</em>, <em>sampleAperture=10</em>, <em>wavelength=0.5</em>, <em>wavespread=0.2</em>, <em>dpixelWidth=10</em>, <em>dringwidth=1</em>, <em>extrapolfunc=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jscatter/smallanglescattering.html#resFunct"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#jscatter.smallanglescattering.resFunct" title="Permalink to this definition">¶</a></dt>
<dd><p>Resolution smearing of small angle scattering for SANS or SAXS according to Pedersen for radial averaged data.</p>
<p>I(q0)= Integral{(R(q,q0)*S(q)}dq  with  Kernel R(q,q0) of equ. 33 in <a class="reference internal" href="#r12b84e242d39-1" id="id10">[1]</a> including wavelength spread, finite
collimation and detector resolution. Default parameters are typical for a SANS machine like <a class="reference external" href="mailto:KWS2&#37;&#52;&#48;JCNS">KWS2<span>&#64;</span>JCNS</a> with
rectangular apertures. Low Q can be extrapolated as power law or Guinier like or constant.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>S</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array like</span></dt>
<dd><p class="first last">dataArray with X. and .Y
theoretical Scattering function
q in nm^-1    .Y can be arbitrary unit</p>
</dd>
<dt><strong>collDist</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float, default 8000</span></dt>
<dd><p class="first last">collimation distance in mm</p>
</dd>
<dt><strong>collAperture</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float, default 10</span></dt>
<dd><p class="first last">collimation rectangular aperture size in mm</p>
</dd>
<dt><strong>detDist</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float, default 8000</span></dt>
<dd><p class="first last">detector distance in mm</p>
</dd>
<dt><strong>sampleAperture</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float, default 10</span></dt>
<dd><p class="first last">sample rectangular aperture size in mm</p>
</dd>
<dt><strong>wavelength</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float, default 0.5</span></dt>
<dd><p class="first last">wavelength in nm</p>
</dd>
<dt><strong>wavespread</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float, default 0.1</span></dt>
<dd><p class="first last">FWHM wavelengthspread dlambda/lambda</p>
</dd>
<dt><strong>dpixelWidth</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float, default 10</span></dt>
<dd><p class="first last">Detector pixel width in mm</p>
</dd>
<dt><strong>dringwidth</strong> <span class="classifier-delimiter">:</span> <span class="classifier">integer, default 1</span></dt>
<dd><p class="first last">number of pixel for averaging</p>
</dd>
<dt><strong>extrapolfunc</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list , default None</span></dt>
<dd><p class="first">Type of extrapolation at low and high X edges as list for [low edge,high edge].
If a singe value is given this is used for both.</p>
<blockquote class="last">
<div><ul class="simple">
<li>Low edge towards zero</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>float :   Power law extrapolation</li>
<li>None :    A constant value as Y(X.min()).</li>
<li>anything else : Low X data are log scaled, then X**2 extrapolated as Guinier like extrapolation.</li>
</ul>
</div></blockquote>
<ul class="simple">
<li>High edge towards infinity</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>float :   Power law extrapolation of low X e.g. a=-4 for  q**a for Porod scaling.</li>
<li>None :    A constant value as Y(X.max()).</li>
</ul>
</div></blockquote>
</div></blockquote>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>dataArray</strong></dt>
<dd><p class="first last">columns [‘wavevector; smeared scattering; unsmeared scattering; half width smearing function’]</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<ul class="simple">
<li>HalfWidthSmearingFunction is the FWHM the Gaussian used for smearing including all effects.</li>
<li>The resolution is assumed to be equal in direction parallel and perpendicular to q on a 2D detector as
described in chap. 2.5 in <a class="reference internal" href="#r12b84e242d39-1" id="id11">[1]</a>.</li>
<li>We neglect additional smearing due to radial averaging (last paragraph in chap 2.5 of <a class="reference internal" href="#r12b84e242d39-1" id="id12">[1]</a>).</li>
<li>Defaults correspond to a typical medium resolution measurement.</li>
<li>extrapolfunc allows extrapolation at both edges to reduce edge effects.
The best values depends on the measured signal shape at the edge.
The optimal way is to calculate the used model for the whole Q range, smear it and prune to the needed range.
This is demonstrated in example 2.
If at low <em>q</em> only a power law is observed use the corresponding extrapolation. Same for high <em>q</em>.</li>
<li>An example for SANS fitting with resFunc is given in example_SANSsmearing.py.</li>
</ul>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="r12b84e242d39-1" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[1]</td><td><em>(<a class="fn-backref" href="#id10">1</a>, <a class="fn-backref" href="#id11">2</a>, <a class="fn-backref" href="#id12">3</a>, <a class="fn-backref" href="#id13">4</a>, <a class="fn-backref" href="#id14">5</a>)</em> Analytical Treatment of the Resolution Function for Small-Angle Scattering
JAN SKOV PEDERSEN, DORTHE POSSELTAND KELL MORTENSEN J. Appl. Cryst. (1990). 23, 321-333</td></tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Reproducing Table 1 of <a class="reference internal" href="#r12b84e242d39-1" id="id14">[1]</a></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">jscatter</span> <span class="k">as</span> <span class="nn">js</span>
<span class="n">q</span><span class="o">=</span><span class="n">js</span><span class="o">.</span><span class="n">loglist</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">500</span><span class="p">)</span>
<span class="n">S</span><span class="o">=</span><span class="n">js</span><span class="o">.</span><span class="n">ff</span><span class="o">.</span><span class="n">sphere</span><span class="p">(</span><span class="n">q</span><span class="p">,</span><span class="mi">6</span><span class="p">)</span>
<span class="c1"># this is the direct call of resFunc, use smear instead as shown in next example</span>
<span class="n">Sr</span><span class="o">=</span><span class="n">js</span><span class="o">.</span><span class="n">sas</span><span class="o">.</span><span class="n">resFunct</span><span class="p">(</span><span class="n">S</span><span class="p">,</span> <span class="n">collDist</span><span class="o">=</span><span class="mf">2000.0</span><span class="p">,</span> <span class="n">collAperture</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">detDist</span><span class="o">=</span><span class="mf">2000.0</span><span class="p">,</span> <span class="n">sampleAperture</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">wavelength</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">wavespread</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span><span class="n">dpixelWidth</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">dringwidth</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="c1"># plot it</span>
<span class="n">p</span><span class="o">=</span><span class="n">js</span><span class="o">.</span><span class="n">grace</span><span class="p">()</span>
<span class="n">p</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span> <span class="n">S</span><span class="p">,</span><span class="n">sy</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.3</span><span class="p">],</span><span class="n">li</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">legend</span><span class="o">=</span><span class="s1">&#39;sphere&#39;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span> <span class="n">Sr</span><span class="p">,</span><span class="n">sy</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mf">0.3</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span><span class="n">li</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">legend</span><span class="o">=</span><span class="s1">&#39;smeared sphere&#39;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">Sr</span><span class="o">.</span><span class="n">X</span><span class="p">,</span><span class="n">Sr</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span><span class="n">li</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span><span class="n">sy</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">legend</span><span class="o">=</span><span class="s1">&#39;FWHM in nm\S-1 &#39;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">yaxis</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mf">1e-3</span><span class="p">,</span><span class="n">scale</span><span class="o">=</span><span class="s1">&#39;l&#39;</span><span class="p">,</span><span class="n">charsize</span><span class="o">=</span><span class="mf">1.5</span><span class="p">,</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;I(q) / a.u.&#39;</span><span class="p">,</span><span class="n">tick</span><span class="o">=</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="mi">9</span><span class="p">])</span>
<span class="n">p</span><span class="o">.</span><span class="n">yaxis</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mf">1e-1</span><span class="p">,</span><span class="n">tick</span><span class="o">=</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="mi">9</span><span class="p">])</span>
<span class="n">p</span><span class="o">.</span><span class="n">xaxis</span><span class="p">(</span><span class="n">scale</span><span class="o">=</span><span class="s1">&#39;l&#39;</span><span class="p">,</span><span class="n">charsize</span><span class="o">=</span><span class="mf">1.5</span><span class="p">,</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;q / nm\S-1&#39;</span><span class="p">,</span><span class="n">tick</span><span class="o">=</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="mi">9</span><span class="p">])</span>
<span class="n">p</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="mf">5e5</span><span class="p">)</span>
</pre></div>
</div>
<p>Example 2:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># smear model over full range and interpolate to needed data</span>
<span class="c1"># this is the best way to smear a model for fitting, but is not possible for desmearing</span>
<span class="n">meas</span><span class="o">=</span><span class="n">js</span><span class="o">.</span><span class="n">dA</span><span class="p">(</span><span class="s1">&#39;measureddata.dat&#39;</span><span class="p">)</span>     <span class="c1"># load data</span>
<span class="c1"># define profile</span>
<span class="n">resol2m</span> <span class="o">=</span> <span class="n">js</span><span class="o">.</span><span class="n">sas</span><span class="o">.</span><span class="n">prepareBeamProfile</span><span class="p">(</span><span class="s1">&#39;SANS&#39;</span><span class="p">,</span> <span class="n">detDist</span><span class="o">=</span><span class="mi">2000</span><span class="p">,</span><span class="n">collDist</span><span class="o">=</span><span class="mf">2000.</span><span class="p">,</span><span class="n">wavelength</span><span class="o">=</span><span class="mf">0.4</span><span class="p">,</span><span class="n">wavespread</span><span class="o">=</span><span class="mf">0.15</span><span class="p">)</span>
<span class="n">q</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">r_</span><span class="p">[</span><span class="mf">0.01</span><span class="p">:</span><span class="mi">5</span><span class="p">:</span><span class="mf">0.01</span><span class="p">]</span> <span class="c1"># or np.r_[0:meas.X.min():0.01,meas.X,meas.X.max():meas.X.max()*2:0.1]</span>
<span class="c1"># calc model</span>
<span class="n">temp</span><span class="o">=</span><span class="n">js</span><span class="o">.</span><span class="n">ff</span><span class="o">.</span><span class="n">ellipsoid</span><span class="p">(</span><span class="n">q</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="c1"># smear it</span>
<span class="n">smearedmodel</span><span class="o">=</span><span class="n">js</span><span class="o">.</span><span class="n">sas</span><span class="o">.</span><span class="n">smear</span><span class="p">(</span><span class="n">temp</span><span class="p">,</span><span class="n">resol2m</span><span class="p">)</span><span class="o">.</span><span class="n">interpolate</span><span class="p">(</span><span class="n">X</span><span class="o">=</span><span class="n">meas</span><span class="o">.</span><span class="n">X</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="jscatter.smallanglescattering.resFunctExplicit">
<code class="descclassname">jscatter.smallanglescattering.</code><code class="descname">resFunctExplicit</code><span class="sig-paren">(</span><em>S</em>, <em>beamprofile</em>, <em>extrapolfunc=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jscatter/smallanglescattering.html#resFunctExplicit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#jscatter.smallanglescattering.resFunctExplicit" title="Permalink to this definition">¶</a></dt>
<dd><p>Resolution smearing of small angle scattering for SANS or SAXS according to explict given Gaussian width.</p>
<p>I(q0)= Integral{(R(q,q0)*S(q)}dq  with  Gaussian kernel R(q,q0).
E.g. for merged dataFiles of <a class="reference external" href="mailto:KWS2&#37;&#52;&#48;MLZ">KWS2<span>&#64;</span>MLZ</a> the explicit width is given in the 4th column.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>S</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array like</span></dt>
<dd><p class="first last">dataArray with X. and .Y
theoretical Scattering function
q in nm^-1    .Y can be arbitrary unit</p>
</dd>
<dt><strong>beamprofile</strong> <span class="classifier-delimiter">:</span> <span class="classifier">beamProfile ‘explicit’</span></dt>
<dd><p class="first last">Beam profile as prepared from prepareBeamProfile ‘explicit’</p>
</dd>
<dt><strong>extrapolfunc</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list , default None</span></dt>
<dd><p class="first">Type of extrapolation at low and high X edges for handling of the border as list for [low edge,high edge].
If a singe value is given this is used for both.</p>
<blockquote class="last">
<div><ul class="simple">
<li>Low edge</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>float :   Power law extrapolation of low X e.g. a=-4 for  q**a for Porod scaling.</li>
<li>None :    A constant value as Y(X.min()).</li>
<li>anything else : Low X data are log scaled, then X**2 extrapolated as Guinier like extrapolation.</li>
</ul>
</div></blockquote>
<ul class="simple">
<li>High edge</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>float :   Power law extrapolation of low X e.g. a=-4 for  q**a for Porod scaling.</li>
<li>None :    A constant value as Y(X.max()).</li>
</ul>
</div></blockquote>
</div></blockquote>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>dataArray</strong></dt>
<dd><p class="first last">columns [‘wavevector; smeared scattering; unsmeared scattering; half width smearing function’]</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<ul class="simple">
<li>HalfWidthSmearingFunction is the FWHM the Gaussian used for smearing including all effects.</li>
</ul>
</dd></dl>

<dl class="function">
<dt id="jscatter.smallanglescattering.smear">
<code class="descclassname">jscatter.smallanglescattering.</code><code class="descname">smear</code><span class="sig-paren">(</span><em>data</em>, <em>beamProfile</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jscatter/smallanglescattering.html#smear"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#jscatter.smallanglescattering.smear" title="Permalink to this definition">¶</a></dt>
<dd><p>Smearing data for line-collimated SAXS (Kratky camera) or as point collimation SANS/SAXS.</p>
<p>The full resolution for point collimation SAXS/SANS is described in resFunct.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>data</strong> <span class="classifier-delimiter">:</span> <span class="classifier">dataArray</span></dt>
<dd><p class="first last">Data to be smeared.</p>
</dd>
<dt><strong>beamProfile</strong> <span class="classifier-delimiter">:</span> <span class="classifier">beamProfile or ‘trap’, ‘SANS’, ‘explicit’, dataArray</span></dt>
<dd><p class="first last">Beam profile as prepared from prepareBeamProfile
or type as ‘trapezoidal’, ‘SANS’,’explicit’ or a measured beam profile as dataArray for line collimation.
Measured Profile is treated by prepareBeamProfile.</p>
</dd>
<dt><strong>kwargs :</strong></dt>
<dd><p class="first last">See prepareBeamProfile for kwargs.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>dataArray</strong></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<ul class="simple">
<li>If data has attributes a, b, dIW, bxw, detDist these are used, if not given in function call.</li>
<li>If wavelength is missing in data a default of 0.155418 nm for Xray <span class="math">K_{\alpha}</span> line is assumed. For SANS 0.6 A.</li>
<li>During smearing for Kratky camera an integration over the beam width and beam length are performed.
In this integration <span class="math">q_{w,l}= ((q+q_{w})^2)+q_{l}^2)^{1/2}</span> is used with <span class="math">q_{w}</span> along the beam width
and <span class="math">q_{l}</span> along the beam length. in regions <span class="math">q_{w,l} &gt; max(q_{data})</span> we estimate the measured scattering
intensity by the mean of the last 10 points of the measured spectra to allow for a maximum in <span class="math">q</span> range.
The strictly valid q range can be estimated by calculating <span class="math">q_{x,y} &lt; max(q)</span>
with 2 times the used beam width and beam length.
As the smearing for larger <span class="math">q</span>  has no real effect the estimate might be still ok.</li>
</ul>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># use as</span>
<span class="c1"># prepare measured line collimation beamprofile</span>
<span class="n">mbeam</span> <span class="o">=</span> <span class="n">js</span><span class="o">.</span><span class="n">sas</span><span class="o">.</span><span class="n">prepareBeamProfile</span><span class="p">(</span><span class="n">beam</span><span class="p">,</span> <span class="n">bxw</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span> <span class="n">dIW</span><span class="o">=</span><span class="mf">1.</span><span class="p">)</span>
<span class="c1"># prepare profile with trapezoidal shape (a,b can be fitted above)</span>
<span class="n">tbeam</span> <span class="o">=</span> <span class="n">js</span><span class="o">.</span><span class="n">sas</span><span class="o">.</span><span class="n">prepareBeamProfile</span><span class="p">(</span><span class="s1">&#39;trapz&#39;</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="n">mbeam</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="n">mbeam</span><span class="o">.</span><span class="n">b</span><span class="p">,</span> <span class="n">bxw</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span> <span class="n">dIW</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="c1"># prepare profile SANS (missing parameters get defaults, see resFunct)</span>
<span class="n">Sbeam</span> <span class="o">=</span> <span class="n">js</span><span class="o">.</span><span class="n">sas</span><span class="o">.</span><span class="n">prepareBeamProfile</span><span class="p">(</span><span class="s1">&#39;SANS&#39;</span><span class="p">,</span> <span class="n">detDist</span><span class="o">=</span><span class="mi">2000</span><span class="p">,</span><span class="n">wavelength</span><span class="o">=</span><span class="mf">0.4</span><span class="p">,</span><span class="n">wavespread</span><span class="o">=</span><span class="mf">0.15</span><span class="p">)</span>
<span class="c1"># prepare profile with explicit given Gaussian width in column 3 as e.g. KWS2@JCNS</span>
<span class="n">Gbeam</span> <span class="o">=</span> <span class="n">js</span><span class="o">.</span><span class="n">sas</span><span class="o">.</span><span class="n">prepareBeamProfile</span><span class="p">(</span><span class="n">measurement</span><span class="p">,</span><span class="n">explicit</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="c1"># smear</span>
<span class="n">datasm</span><span class="o">=</span> <span class="n">js</span><span class="o">.</span><span class="n">sas</span><span class="o">.</span><span class="n">smear</span><span class="p">(</span><span class="n">data</span><span class="p">,</span><span class="n">mbeam</span><span class="p">)</span>
<span class="n">datast</span><span class="o">=</span> <span class="n">js</span><span class="o">.</span><span class="n">sas</span><span class="o">.</span><span class="n">smear</span><span class="p">(</span><span class="n">data</span><span class="p">,</span><span class="n">tbeam</span><span class="p">)</span>
<span class="n">datasS</span><span class="o">=</span> <span class="n">js</span><span class="o">.</span><span class="n">sas</span><span class="o">.</span><span class="n">smear</span><span class="p">(</span><span class="n">data</span><span class="p">,</span><span class="n">Sbeam</span><span class="p">)</span>
<span class="n">datasG</span><span class="o">=</span> <span class="n">js</span><span class="o">.</span><span class="n">sas</span><span class="o">.</span><span class="n">smear</span><span class="p">(</span><span class="n">data</span><span class="p">,</span><span class="n">Gbeam</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="jscatter.smallanglescattering.transmissionCorrection">
<code class="descclassname">jscatter.smallanglescattering.</code><code class="descname">transmissionCorrection</code><span class="sig-paren">(</span><em>data</em>, <em>dark</em>, <em>emptybeam=None</em>, <em>edge=0.03</em>, <em>exposure=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jscatter/smallanglescattering.html#transmissionCorrection"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#jscatter.smallanglescattering.transmissionCorrection" title="Permalink to this definition">¶</a></dt>
<dd><p>Subtract dark current, find primary beam, get transmission and normalize by transmission and exposure time. IN PLACE.</p>
<p>For measurements including the primary beam from a semitransparent beamstop as from SAXSpace.
Transmission is the maximum of the primary beam peak after dark subtraction.
Allows easier comparison of measurements  with aged source (primary intensity change).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>data</strong> <span class="classifier-delimiter">:</span> <span class="classifier">dataArray</span></dt>
<dd><p class="first last">A measurement from a SAXSpace instrument read by js.dA(‘filename.pdh’,lines2parameter=[2,3,4])</p>
</dd>
<dt><strong>dark</strong> <span class="classifier-delimiter">:</span> <span class="classifier">dataArray</span></dt>
<dd><p class="first last">Dark current measurement.</p>
</dd>
<dt><strong>emptybeam</strong> <span class="classifier-delimiter">:</span> <span class="classifier">dataArray,default=None</span></dt>
<dd><p class="first last">Empty beam measurement to subtract from measurement. dark will be subtracted of empty beam.</p>
</dd>
<dt><strong>edge</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float, default 0.03</span></dt>
<dd><p class="first last">Wavevector value below beam stop edge. The primary beam is searched below this value.</p>
</dd>
<dt><strong>exposure</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float, default None</span></dt>
<dd><p class="first last">Exposure time in unit ‘s’.
If not given the xml description at the end of the file is examined.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>None</strong></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Files from SAXSpace instrument (.pdh) can be read by</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">js</span><span class="o">.</span><span class="n">dA</span><span class="p">(</span><span class="s1">&#39;filename.pdh&#39;</span><span class="p">,</span><span class="n">lines2parameter</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span>
</pre></div>
</div>
<p><strong>Correction</strong></p>
<p>Brulet at al <a class="reference internal" href="#rc446572e7a39-1" id="id15">[1]</a> describe the data correction for SANS, which is in principle also valid for SAXS,
if incoherent contributions are neglected.</p>
<p>The difference is, that SAXS has typical transmission around ~0.3 for 1mm water sample in quartz cell
due to absorption, while in SANS typical values are around ~0.9 for D2O.
Larger volume fractions in the sample play a more important rule for SANS as hydrogenated ingredients
reduce the transmission significantly, while in SAXS still the water and the cell (quartz) dominate.</p>
<p>One finds for a sample inside of a container with thicknesses (<span class="math">z</span>)
for sample, buffer (solvent), empty cell and empty beam measurement (omitting the overall q dependence):</p>
<div class="math">
<p><span class="math">I_s = \frac{1}{z_S}\big((\frac{I_S-I_{dark}}{T_S}-I_{b}T_S\big) -\big(\frac{I_{EC}-I_{dark}}{T_{EC}}-I_{b}T_{EC})\big) -
\frac{1}{z_B}\big((\frac{I_B-I_{dark}}{T_B}-I_{b}T_B\big) -\big(\frac{I_{EC}-I_{dark}}{T_{EC}}-I_{b}T_{EC})\big)</span></p>
</div><dl class="docutils">
<dt>where</dt>
<dd><ul class="first last simple">
<li><span class="math">I_s</span>      is the interesting species</li>
<li><span class="math">I_S</span>      is the sample of species in solvent (buffer)</li>
<li><span class="math">I_B</span>      is the pure solvent (describing a constant background)</li>
<li><span class="math">I_{dark}</span> is the dark current measurement</li>
<li><span class="math">I_b</span>      is the empty beam measurement</li>
<li><span class="math">I_{EC}</span>   is the empty cell measurement</li>
<li><span class="math">z_x</span>      corresponding sample thickness</li>
<li><span class="math">T_x</span>      corresponding transmission</li>
</ul>
</dd>
</dl>
<p>The recurring pattern <span class="math">\big((\frac{I-I_{dark}}{T}-I_{b}T\big)</span> shows that the the beam tail
(border of primary beam not absorbed by the beam stop) is attenuated by the corresponding sample.</p>
<p>For equal sample thickness <span class="math">z</span> the empty beam is included in subtraction of  <span class="math">I_B</span>:</p>
<div class="math">
<p><span class="math">I_s = \frac{1}{z} \big((\frac{I_S-I_{dark}}{T_S}-I_{b}T_S) - (\frac{I_B-I_{dark}}{T_B}-I_{b}T_B)\big)</span></p>
</div><p><strong>The simple case</strong></p>
<p>If the transmissions are nearly equal as for e.g. protein samples with low concentration (<span class="math">T_S \approx T_B</span>)
we only need to subtract the transmission and dark current corrected buffer measurement from the sample.</p>
<div class="math">
<p><span class="math">I_s = \frac{1}{z} \big((\frac{I_S-I_{dark}}{T_S}) - (\frac{I_B-I_{dark}}{T_B}\big)</span></p>
</div><p><strong>Higher accuracy for large volume fractions</strong></p>
<p>For larger volume fractions <span class="math">\Phi</span> the transmission might be different and we have to take into account that
only <span class="math">1-\Phi</span> of solvent contributes to <span class="math">I_S</span>.
We may incorporate this in the sense of an optical density changing the effective thickness
<span class="math">\frac{1}{z_B}\rightarrow\frac{1-\Phi}{z_B}</span> resulting in different thicknesses <span class="math">z_S \neq z_B</span></p>
<p><strong>Transmission</strong></p>
<p>The transmission is measured as the ratio <span class="math">T=\frac{I(q=0)_{sample}}{I(q=0)_{emptybeam}}</span> with <span class="math">I(q=0)</span>
as the primary beam intensity.</p>
<p>If the primary beam tail is neglected in the above equation <span class="math">I(q=0)_{emptybeam}</span>
only gives a common scaling factor and can be omitted if arbitrary units are used.
Alternatively one can scale to the EC transmission with <span class="math">T_{EC}=1</span>
For absolute calibration the same needs to be done.
One finds <span class="math">T_{sample in cell}=T_{empty cell}T_{sample without cell}</span>.</p>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="rc446572e7a39-1" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[1]</td><td><em>(<a class="fn-backref" href="#id15">1</a>, <a class="fn-backref" href="#id16">2</a>)</em> Improvement of data treatment in small-angle neutron scattering
Brûlet et al Journal of Applied Crystallography 40, 165-177 (2007)</td></tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="jscatter.smallanglescattering.waterXrayScattering">
<code class="descclassname">jscatter.smallanglescattering.</code><code class="descname">waterXrayScattering</code><span class="sig-paren">(</span><em>composition='h2o1'</em>, <em>T=293</em>, <em>units='mol'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jscatter/smallanglescattering.html#waterXrayScattering"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#jscatter.smallanglescattering.waterXrayScattering" title="Permalink to this definition">¶</a></dt>
<dd><p>Absolute scattering of water with components (salt, buffer) at Q=0 as reference for X-ray.</p>
<p>According to <a class="reference internal" href="#r9e2a7e89ced9-2" id="id17">[2]</a> a buffer of water with components might be used.
Ions need to be given separatly as [‘55.51h2o1’,‘0.15Na’,‘0.15Cl’] for 0.15 M NaCl solution.
It is accounted for the temperature dependence of water density and compressibility.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>composition</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Buffer composition as in scatteringLengthDensityCalc
give dissociated ions separatly as [‘1Na’,‘1Cl’] with concentration in mol prepended
the additional scattering as ionic liquid of the ions in water is taken into account see <a class="reference internal" href="#r9e2a7e89ced9-2" id="id18">[2]</a>
mass in g; 1000g water are 55.508 mol</p>
</dd>
<dt><strong>T</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">temperature in °K</p>
</dd>
<dt><strong>units</strong> <span class="classifier-delimiter">:</span> <span class="classifier">‘mol’</span></dt>
<dd><p class="first last">anything except ‘mol’ prepended unit is mass fraction
‘mol’ prepended units is mol and mass fraction is calculated as <span class="math">mass=[mol] mass_{molecule}</span>
e.g. 1l Water with 123 mmol NaCl   [‘55.508H2O1’,‘0.123Na1Cl1’]</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>float absolute scattering length in Units 1/cm</strong></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p><span class="math">I(0)=(\sigma_{water}^2f_e^2 n_{ew}^2 k_B T \chi + \sum_{ci} n_i N_A 1000 n_{ei}^2 f_e^2 )/100</span></p>
<p>with</p>
<blockquote>
<div><span class="math">\sigma_{water}</span> water density
<span class="math">\chi</span>           compressibility
<span class="math">n_{ew}</span>     number of electrons per water molecule
<span class="math">f_e</span>        cross section of electron in nm
<span class="math">k_B</span>        Boltzmann constant
<span class="math">n_i</span>        concentration component i
<span class="math">n_{ei}</span>     number of electrons per molecule component i in Mol
<span class="math">\sum_{ci}</span>   is done for all ions separately if given</div></blockquote>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="r9e2a7e89ced9-1" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id19">[1]</a></td><td>SAXS experiments on absolute scale with Kratky systems using water as a secondary standard
Doris Orthaber et al. J. Appl. Cryst. (2000). 33, 218±225</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="r9e2a7e89ced9-2" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[2]</td><td><em>(<a class="fn-backref" href="#id17">1</a>, <a class="fn-backref" href="#id18">2</a>, <a class="fn-backref" href="#id20">3</a>)</em> A high sensitivity pinhole camera for soft condensed matter
T. Zemb, O. Tache, F. Né, and O. Spalla, J. Appl. Crystallogr. 36, 800 (2003).</td></tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="module-jscatter.sasimagelib"></span><p>Read 2D image files (TIFF) from SAXS cameras and extract the corresponding data.</p>
<p>The sasImage is a 2D array that allows direct subtraction and multiplication (e.g. transmission)
respecting given masks in operations. E.g.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sample</span><span class="o">=</span><span class="n">js</span><span class="o">.</span><span class="n">sas</span><span class="o">.</span><span class="n">sasImage</span><span class="p">(</span><span class="s1">&#39;sample.tiff&#39;</span><span class="p">)</span>
<span class="n">solvent</span><span class="o">=</span><span class="n">js</span><span class="o">.</span><span class="n">sas</span><span class="o">.</span><span class="n">sasImage</span><span class="p">(</span><span class="s1">&#39;solvent.tiff&#39;</span><span class="p">)</span>
<span class="n">corrected</span> <span class="o">=</span> <span class="n">sample</span><span class="o">/</span><span class="n">sampletransmission</span> <span class="o">-</span> <span class="n">solvent</span><span class="o">/</span><span class="n">solventtransmission</span>
</pre></div>
</div>
<p>Calibration of detector distance, radial average, size reduction and more.
.showPolar allows sensitive detection of the beamcenter.</p>
<p>An example is shown in <a class="reference internal" href="#jscatter.sasimagelib.sasImage" title="jscatter.sasimagelib.sasImage"><code class="xref py py-class docutils literal notranslate"><span class="pre">sasImage</span></code></a> .</p>
<hr class="docutils" />
<dl class="data">
<dt id="jscatter.sasimagelib.AgBepeaks">
<code class="descclassname">jscatter.sasimagelib.</code><code class="descname">AgBepeaks</code><em class="property"> = [1.0753, 2.1521, 3.2286, 4.3049, 5.3813, 6.4576, 7.5339, 8.6102, 9.6865, 10.7628]</em><a class="headerlink" href="#jscatter.sasimagelib.AgBepeaks" title="Permalink to this definition">¶</a></dt>
<dd><p>AgBe peak positions</p>
</dd></dl>

<dl class="class">
<dt id="jscatter.sasimagelib.SubArray">
<em class="property">class </em><code class="descclassname">jscatter.sasimagelib.</code><code class="descname">SubArray</code><a class="reference internal" href="_modules/jscatter/sasimagelib.html#SubArray"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#jscatter.sasimagelib.SubArray" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></p>
<dl class="attribute">
<dt id="jscatter.sasimagelib.SubArray.array">
<code class="descname">array</code><a class="headerlink" href="#jscatter.sasimagelib.SubArray.array" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="jscatter.sasimagelib.SubArray.attr">
<code class="descname">attr</code><a class="headerlink" href="#jscatter.sasimagelib.SubArray.attr" title="Permalink to this definition">¶</a></dt>
<dd><p>Show specific attribute names as sorted list of attribute names.</p>
</dd></dl>

<dl class="method">
<dt id="jscatter.sasimagelib.SubArray.setattr">
<code class="descname">setattr</code><span class="sig-paren">(</span><em>objekt</em>, <em>prepend=''</em>, <em>keyadd='_'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jscatter/sasimagelib.html#SubArray.setattr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#jscatter.sasimagelib.SubArray.setattr" title="Permalink to this definition">¶</a></dt>
<dd><p>Set (copy) attributes from objekt.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>objekt</strong> <span class="classifier-delimiter">:</span> <span class="classifier">objekt with attr or dictionary</span></dt>
<dd><p class="first last">Can be a dictionary of names:value pairs like {‘name’:[1,2,3,7,9]}
If object has property attr the returned attribut names are copied.</p>
</dd>
<dt><strong>prepend</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, default ‘’</span></dt>
<dd><p class="first last">Prepend this string to all attribute names.</p>
</dd>
<dt><strong>keyadd</strong> <span class="classifier-delimiter">:</span> <span class="classifier">char, default=’_’</span></dt>
<dd><p class="first last">If reserved attributes (T, mean, ..) are found the name is ‘T’+keyadd</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="jscatter.sasimagelib.SubArray.showattr">
<code class="descname">showattr</code><span class="sig-paren">(</span><em>maxlength=None, exclude=['comment']</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jscatter/sasimagelib.html#SubArray.showattr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#jscatter.sasimagelib.SubArray.showattr" title="Permalink to this definition">¶</a></dt>
<dd><p>Show specific attributes with values as overview.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>maxlength</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Truncate string representation after maxlength char.</p>
</dd>
<dt><strong>exclude</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list of str</span></dt>
<dd><p class="first last">List of attribute names to exclude from result.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="jscatter.sasimagelib.createImageDescriptions">
<code class="descclassname">jscatter.sasimagelib.</code><code class="descname">createImageDescriptions</code><span class="sig-paren">(</span><em>images</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jscatter/sasimagelib.html#createImageDescriptions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#jscatter.sasimagelib.createImageDescriptions" title="Permalink to this definition">¶</a></dt>
<dd><p>Create text file with image descriptions as list of content.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>images</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list of sasImages or glob pattern</span></dt>
<dd><p class="first last">List of images</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="jscatter.sasimagelib.createLogPNG">
<code class="descclassname">jscatter.sasimagelib.</code><code class="descname">createLogPNG</code><span class="sig-paren">(</span><em>filenames</em>, <em>center=None</em>, <em>size=None</em>, <em>colormap='jet'</em>, <em>equalize=False</em>, <em>contrast=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jscatter/sasimagelib.html#createLogPNG"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#jscatter.sasimagelib.createLogPNG" title="Permalink to this definition">¶</a></dt>
<dd><p>Create .png files from grayscale images with log scale conversion to values between [1,255].</p>
<p>This generates images viewable in simple image viewers as overview.
The new files are stored in the same folder as the original files.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>filenames</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Filename with glob pattern as ‘file*.tif’</p>
</dd>
<dt><strong>center</strong> <span class="classifier-delimiter">:</span> <span class="classifier">[int,int]</span></dt>
<dd><p class="first last">Center of crop region.</p>
</dd>
<dt><strong>size</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Size of crop region as around center as 2*size.
If center is None the border is cut by size.</p>
</dd>
<dt><strong>colormap</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, None</span></dt>
<dd><p class="first last">Colormap from matplotlib or None for grayscale.
For standard colormap names look in mpl.showColors().</p>
</dd>
<dt><strong>equalize</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">Equalize the images.</p>
</dd>
<dt><strong>contrast</strong> <span class="classifier-delimiter">:</span> <span class="classifier">None, float</span></dt>
<dd><p class="first last">Autocontrast for the image.
The value (0.1=10%) determines how much percent are cut from the intensity histogram before linear
spread of intensities.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="jscatter.sasimagelib.etree_to_dict">
<code class="descclassname">jscatter.sasimagelib.</code><code class="descname">etree_to_dict</code><span class="sig-paren">(</span><em>root</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jscatter/sasimagelib.html#etree_to_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#jscatter.sasimagelib.etree_to_dict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="jscatter.sasimagelib.parseXML">
<code class="descclassname">jscatter.sasimagelib.</code><code class="descname">parseXML</code><span class="sig-paren">(</span><em>text</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jscatter/sasimagelib.html#parseXML"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#jscatter.sasimagelib.parseXML" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="jscatter.sasimagelib.phase">
<code class="descclassname">jscatter.sasimagelib.</code><code class="descname">phase</code><span class="sig-paren">(</span><em>phases</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jscatter/sasimagelib.html#phase"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#jscatter.sasimagelib.phase" title="Permalink to this definition">¶</a></dt>
<dd><p>Transform to [-pi,pi] range.</p>
</dd></dl>

<dl class="function">
<dt id="jscatter.sasimagelib.readImages">
<code class="descclassname">jscatter.sasimagelib.</code><code class="descname">readImages</code><span class="sig-paren">(</span><em>filenames</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jscatter/sasimagelib.html#readImages"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#jscatter.sasimagelib.readImages" title="Permalink to this definition">¶</a></dt>
<dd><p>Read a list of images returning sasImage`s.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>filenames</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Glob pattern to read</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>list of sasImage`s</strong></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>To get a list of image descriptions:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">images</span><span class="o">=</span><span class="n">js</span><span class="o">.</span><span class="n">sas</span><span class="o">.</span><span class="n">readImages</span><span class="p">(</span><span class="n">path</span><span class="o">+</span><span class="s1">&#39;/latest*.tiff&#39;</span><span class="p">)</span>
<span class="p">[</span><span class="n">i</span><span class="o">.</span><span class="n">description</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">images</span><span class="p">]</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="jscatter.sasimagelib.sasImage">
<em class="property">class </em><code class="descclassname">jscatter.sasimagelib.</code><code class="descname">sasImage</code><a class="reference internal" href="_modules/jscatter/sasimagelib.html#sasImage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#jscatter.sasimagelib.sasImage" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#jscatter.sasimagelib.SubArray" title="jscatter.sasimagelib.SubArray"><code class="xref py py-class docutils literal notranslate"><span class="pre">jscatter.sasimagelib.SubArray</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ma.core.MaskedArray</span></code></p>
<p>Creates sasImage as maskedArray from a detector image for evaluation.</p>
<dl class="docutils">
<dt>Reads a .tif file including the information in the EXIF tag.</dt>
<dd><ul class="first last simple">
<li>All methods of maskedArrays including masking of invalid areas work.</li>
<li>Masked areas are automatically masked for all math operations.</li>
<li>Arithmetic operations for sasImages work as for numpy arrays
e.g. to subtract background image or multiplying with transmission.</li>
</ul>
</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>file</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Filename to open.</p>
</dd>
<dt><strong>detector_distance</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float, sasImage</span></dt>
<dd><p class="first last">Detector distance from calibration measurement or calibrated image.
Overwrites value in the file EXIF tag.</p>
</dd>
<dt><strong>beamcenter</strong> <span class="classifier-delimiter">:</span> <span class="classifier">None, list 2xfloat, sasImage</span></dt>
<dd><p class="first last">Position of the beamcenter or copy from sasImage with beamcenter given.
Overwrites value given in the file EXIF tag.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>image</strong> <span class="classifier-delimiter">:</span> <span class="classifier">sasImage with attributes</span></dt>
<dd><ul class="first last simple">
<li>.beamcenter : beam center</li>
<li>.iX : X pixel position</li>
<li>.iY : Y pixel position</li>
<li>.filename</li>
<li>.artist : Additional attributes from EXIF Tag Artist</li>
<li>.imageDescription : Additional attributes from EXIF Tag ImageDescription</li>
</ul>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<ul class="simple">
<li>Unmasked data can be accessed as .data</li>
<li>The mask is .mask and initial set to all negative values.</li>
<li>Masking of a pixel is done as image[i,j]=np.ma.masked.
Use mask methods as implemented.</li>
<li>TIFF tags with index above 700 are ignored.</li>
<li>Tested for reading tiff image files from Pilatus detectors as given from our
metal jet SAXS machines Ganesha and Galaxi at JCNS, Jülich.</li>
<li>Additional SAXSpace TIFF files are supported which show frames per pixel on the Y axis.
This allows to examine the time evolution of the measurement on these line collimation cameras
(Kratky camera).
Instead of the old PIL the newer fork Pillow is needed for the multi page TIFFs.
Additional the pixel_size is set to 0.024 (µm) as for the JCNS CCD camera.</li>
<li><dl class="first docutils">
<dt>Beamcenter &amp; orientation:</dt>
<dd>The x,y orientation is not well defined and dependent on the implementation on the specific camera setup.
The default used here corresponds to our in house Ganesha which needs to revert the EXIF beamcenter.
We use the lower left image corner as zero with X as lower axis. Please check if your beamcenter
corresponds to this. If not just change it.</dd>
</dl>
</li>
</ul>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="rb6ea7d3b6428-1" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[1]</td><td>Everything SAXS: small-angle scattering pattern collection and correction
Brian Richard Pauw J. Phys.: Condens. Matter 25,  383201 (2013)
DOI <a class="reference external" href="https://doi.org/10.1088/0953-8984/25/38/383201">https://doi.org/10.1088/0953-8984/25/38/383201</a></td></tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">jscatter</span> <span class="k">as</span> <span class="nn">js</span>
<span class="c1">#</span>
<span class="c1"># Look at calibration measurement</span>
<span class="n">calibration</span> <span class="o">=</span> <span class="n">js</span><span class="o">.</span><span class="n">sas</span><span class="o">.</span><span class="n">sasImage</span><span class="p">(</span><span class="n">js</span><span class="o">.</span><span class="n">examples</span><span class="o">.</span><span class="n">datapath</span><span class="o">+</span><span class="s1">&#39;/calibration.tiff&#39;</span><span class="p">)</span>
<span class="c1"># Check beamcenter</span>
<span class="c1"># For correct beamcenter it should show straight lines (change beamcenter to see change)</span>
<span class="n">calibration</span><span class="o">.</span><span class="n">showPolar</span><span class="p">(</span><span class="n">beamcenter</span><span class="o">=</span><span class="p">[</span><span class="mi">122</span><span class="p">,</span><span class="mi">254</span><span class="p">],</span><span class="n">scaleR</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="c1"># Recalibrate with previous found beamcenter (calibration sets it already)</span>
<span class="n">calibration</span><span class="o">.</span><span class="n">recalibrateDetDistance</span><span class="p">(</span><span class="n">showfits</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">iqcal</span><span class="o">=</span><span class="n">calibration</span><span class="o">.</span><span class="n">radialAverage</span><span class="p">()</span>
<span class="c1"># This might be used to calibrate detector distance for following measurements as</span>
<span class="c1"># empty.setDetectorDistance(calibration)</span>
<span class="c1">#</span>
<span class="n">empty</span> <span class="o">=</span> <span class="n">js</span><span class="o">.</span><span class="n">sas</span><span class="o">.</span><span class="n">sasImage</span><span class="p">(</span><span class="n">js</span><span class="o">.</span><span class="n">examples</span><span class="o">.</span><span class="n">datapath</span><span class="o">+</span><span class="s1">&#39;/emptycell.tiff&#39;</span><span class="p">)</span>
<span class="c1"># Mask beamstop (not the same as calibration, unluckily)</span>
<span class="n">empty</span><span class="o">.</span><span class="n">mask4Polygon</span><span class="p">([</span><span class="mi">92</span><span class="p">,</span><span class="mi">185</span><span class="p">],[</span><span class="mi">92</span><span class="p">,</span><span class="mi">190</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mi">233</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mi">228</span><span class="p">])</span>
<span class="n">empty</span><span class="o">.</span><span class="n">maskCircle</span><span class="p">(</span><span class="n">empty</span><span class="o">.</span><span class="n">beamcenter</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span>
<span class="n">empty</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="n">buffer</span> <span class="o">=</span> <span class="n">js</span><span class="o">.</span><span class="n">sas</span><span class="o">.</span><span class="n">sasImage</span><span class="p">(</span><span class="n">js</span><span class="o">.</span><span class="n">examples</span><span class="o">.</span><span class="n">datapath</span><span class="o">+</span><span class="s1">&#39;/buffer.tiff&#39;</span><span class="p">)</span>
<span class="n">buffer</span><span class="o">.</span><span class="n">maskFromImage</span><span class="p">(</span><span class="n">empty</span><span class="p">)</span>
<span class="n">buffer</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="n">bsa</span> <span class="o">=</span> <span class="n">js</span><span class="o">.</span><span class="n">sas</span><span class="o">.</span><span class="n">sasImage</span><span class="p">(</span><span class="n">js</span><span class="o">.</span><span class="n">examples</span><span class="o">.</span><span class="n">datapath</span><span class="o">+</span><span class="s1">&#39;/BSA11mg.tiff&#39;</span><span class="p">)</span>
<span class="n">bsa</span><span class="o">.</span><span class="n">maskFromImage</span><span class="p">(</span><span class="n">empty</span><span class="p">)</span>
<span class="n">bsa</span><span class="o">.</span><span class="n">show</span><span class="p">()</span> <span class="c1"># by default a log scaled image</span>
<span class="c1">#</span>
<span class="c1"># subtract buffer (transmission factor is just a guess here, sorry)</span>
<span class="n">new</span><span class="o">=</span><span class="n">bsa</span><span class="o">-</span><span class="n">buffer</span><span class="o">*</span><span class="mf">0.2</span>
<span class="n">new</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="c1">#</span>
<span class="n">iqempty</span><span class="o">=</span><span class="n">empty</span><span class="o">.</span><span class="n">radialAverage</span><span class="p">()</span>
<span class="n">iqbuffer</span><span class="o">=</span><span class="n">buffer</span><span class="o">.</span><span class="n">radialAverage</span><span class="p">()</span>
<span class="n">iqbsa</span><span class="o">=</span><span class="n">bsa</span><span class="o">.</span><span class="n">radialAverage</span><span class="p">()</span>
<span class="c1">#</span>
<span class="n">p</span><span class="o">=</span><span class="n">js</span><span class="o">.</span><span class="n">grace</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">iqempty</span><span class="p">,</span><span class="n">le</span><span class="o">=</span><span class="s1">&#39;empty cell&#39;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">iqbuffer</span><span class="p">,</span><span class="n">le</span><span class="o">=</span><span class="s1">&#39;buffer&#39;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">iqbsa</span><span class="p">,</span><span class="n">le</span><span class="o">=</span><span class="s1">&#39;bsa 11 mg/ml&#39;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;raw data, no transmission correction&#39;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">yaxis</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="nb">max</span><span class="o">=</span><span class="mf">1e3</span><span class="p">,</span><span class="n">scale</span><span class="o">=</span><span class="s1">&#39;l&#39;</span><span class="p">,</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;I(q) / a.u.&#39;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">xaxis</span><span class="p">(</span><span class="n">scale</span><span class="o">=</span><span class="s1">&#39;l&#39;</span><span class="p">,</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;q / nm\S-1&#39;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
</pre></div>
</div>
<dl class="attribute">
<dt id="jscatter.sasimagelib.sasImage.array">
<code class="descname">array</code><a class="headerlink" href="#jscatter.sasimagelib.sasImage.array" title="Permalink to this definition">¶</a></dt>
<dd><p>Strip of all attributes and return a simple array without mask.</p>
</dd></dl>

<dl class="method">
<dt id="jscatter.sasimagelib.sasImage.findCenterOfIntensity">
<code class="descname">findCenterOfIntensity</code><span class="sig-paren">(</span><em>beamcenter=None</em>, <em>size=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jscatter/sasimagelib.html#sasImage.findCenterOfIntensity"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#jscatter.sasimagelib.sasImage.findCenterOfIntensity" title="Permalink to this definition">¶</a></dt>
<dd><p>Find beam center as center of intensity around beamcenter.</p>
<p>Only values above the mean value are used to calc center of intensity.
Use an image with a clear symmetric and  strong scattering sample as AgBe.
Use <em>.showPolar([600,699],scaleR=5)</em> to see if peak is symmetric.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>beamcenter</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list 2x int</span></dt>
<dd><p class="first last">First estimate of beamcenter.
If not given preliminary beamcenter is estimated as center of intensity of full image.</p>
</dd>
<dt><strong>size</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Defines size of rectangular region of interest (ROI) around the beamcenter to look at.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>Adds (replaces) .beamcenter as attribute.</strong></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>If ROI is to large the result may be biased due to asymmetry of
the intensity distribution inside of ROI.</p>
</dd></dl>

<dl class="method">
<dt id="jscatter.sasimagelib.sasImage.gaussianFilter">
<code class="descname">gaussianFilter</code><span class="sig-paren">(</span><em>sigma=2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jscatter/sasimagelib.html#sasImage.gaussianFilter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#jscatter.sasimagelib.sasImage.gaussianFilter" title="Permalink to this definition">¶</a></dt>
<dd><p>Gaussian filter in place.</p>
<p>Uses ndimage.filters.gaussian_filter with default parameters except sigma.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>sigma</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Gaussian kernel sigma.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="jscatter.sasimagelib.sasImage.getPixelQ">
<code class="descname">getPixelQ</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/jscatter/sasimagelib.html#sasImage.getPixelQ"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#jscatter.sasimagelib.sasImage.getPixelQ" title="Permalink to this definition">¶</a></dt>
<dd><p>Get scattering vector along pixel dimension around beamcenter.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>qx,qy with image x and y dimension</strong></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="jscatter.sasimagelib.sasImage.getfromcomment">
<code class="descname">getfromcomment</code><span class="sig-paren">(</span><em>name</em>, <em>replace=None</em>, <em>newname=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jscatter/sasimagelib.html#sasImage.getfromcomment"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#jscatter.sasimagelib.sasImage.getfromcomment" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract name from .artist or .imageDescription with attribute name in front.</p>
<p>If multiple names start with parname first one is used.
Used line is deleted from .artist or .imageDescription.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>name</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Name of the parameter in first place.</p>
</dd>
<dt><strong>replace</strong> <span class="classifier-delimiter">:</span> <span class="classifier">dict</span></dt>
<dd><p class="first last">Dictionary with pairs to replace in all lines.</p>
</dd>
<dt><strong>newname</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">New attribute name</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="jscatter.sasimagelib.sasImage.iX">
<code class="descname">iX</code><a class="headerlink" href="#jscatter.sasimagelib.sasImage.iX" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="jscatter.sasimagelib.sasImage.iY">
<code class="descname">iY</code><a class="headerlink" href="#jscatter.sasimagelib.sasImage.iY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="jscatter.sasimagelib.sasImage.lineAverage">
<code class="descname">lineAverage</code><span class="sig-paren">(</span><em>beamcenter=None</em>, <em>number=None</em>, <em>minmax='auto'</em>, <em>show=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jscatter/sasimagelib.html#sasImage.lineAverage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#jscatter.sasimagelib.sasImage.lineAverage" title="Permalink to this definition">¶</a></dt>
<dd><p>Line average of image and conversion to wavevector q for line collimation cameras.</p>
<p>Remember to set .detector_distance to calibrated value.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>beamcenter</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Sets beam center in data and uses this.
If not given the beam center is determined from semitransparent beam.</p>
</dd>
<dt><strong>number</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int, default None</span></dt>
<dd><p class="first last">Number of intervals on new X scale. None means all pixels.</p>
</dd>
<dt><strong>minmax</strong> <span class="classifier-delimiter">:</span> <span class="classifier">[int,int], ‘auto’</span></dt>
<dd><p class="first last">Interval for determination of beamcenter.</p>
</dd>
<dt><strong>show</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">Show the fit of the primary beam.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>dataArray</strong></dt>
<dd><ul class="first last simple">
<li>.filename</li>
<li>.detector_distance</li>
<li>.description</li>
<li>.beamcenter</li>
</ul>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<ul class="simple">
<li>Detector distance in attributes is used.</li>
<li>The primary beam is automatically detected.</li>
<li>Correction for flat detector projected to Ewald sphere included.</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="jscatter.sasimagelib.sasImage.mask4Polygon">
<code class="descname">mask4Polygon</code><span class="sig-paren">(</span><em>p1</em>, <em>p2</em>, <em>p3</em>, <em>p4</em>, <em>invert=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jscatter/sasimagelib.html#sasImage.mask4Polygon"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#jscatter.sasimagelib.sasImage.mask4Polygon" title="Permalink to this definition">¶</a></dt>
<dd><p>Mask inside polygon of 4 points.</p>
<p>Points need to be given in right hand order.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>p1,p2,p3,p4</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list of 2x float</span></dt>
<dd><p class="first last">Edge points.</p>
</dd>
<dt><strong>invert</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">Invert region. Mask outside circle.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="jscatter.sasimagelib.sasImage.maskCircle">
<code class="descname">maskCircle</code><span class="sig-paren">(</span><em>center</em>, <em>radius</em>, <em>invert=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jscatter/sasimagelib.html#sasImage.maskCircle"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#jscatter.sasimagelib.sasImage.maskCircle" title="Permalink to this definition">¶</a></dt>
<dd><p>Mask points inside circle.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>center</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list of 2x float</span></dt>
<dd><p class="first last">Center point.</p>
</dd>
<dt><strong>radius</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Radius in pixel units</p>
</dd>
<dt><strong>invert</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">Invert region. Mask outside circle.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="jscatter.sasimagelib.sasImage.maskFromImage">
<code class="descname">maskFromImage</code><span class="sig-paren">(</span><em>image</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jscatter/sasimagelib.html#sasImage.maskFromImage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#jscatter.sasimagelib.sasImage.maskFromImage" title="Permalink to this definition">¶</a></dt>
<dd><p>Use/copy mask from image.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>image</strong> <span class="classifier-delimiter">:</span> <span class="classifier">sasImage</span></dt>
<dd><p class="first last">sasImage to use mask for resetting mask.
image needs to have same dimension.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="jscatter.sasimagelib.sasImage.maskRegion">
<code class="descname">maskRegion</code><span class="sig-paren">(</span><em>xmin</em>, <em>xmax</em>, <em>ymin</em>, <em>ymax</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jscatter/sasimagelib.html#sasImage.maskRegion"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#jscatter.sasimagelib.sasImage.maskRegion" title="Permalink to this definition">¶</a></dt>
<dd><p>Mask rectangular region.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>xmin,xmax,ymin,ymax</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Corners of the region to mask</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="jscatter.sasimagelib.sasImage.maskRegions">
<code class="descname">maskRegions</code><span class="sig-paren">(</span><em>regions</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jscatter/sasimagelib.html#sasImage.maskRegions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#jscatter.sasimagelib.sasImage.maskRegions" title="Permalink to this definition">¶</a></dt>
<dd><p>Mask several regions.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>regions</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd><p class="first last">List of regions as in maskRegion.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="jscatter.sasimagelib.sasImage.maskTriangle">
<code class="descname">maskTriangle</code><span class="sig-paren">(</span><em>p1</em>, <em>p2</em>, <em>p3</em>, <em>invert=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jscatter/sasimagelib.html#sasImage.maskTriangle"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#jscatter.sasimagelib.sasImage.maskTriangle" title="Permalink to this definition">¶</a></dt>
<dd><p>Mask inside triangle.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>p1,p2,p3</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list of 2x float</span></dt>
<dd><p class="first last">Edge points of triangle.</p>
</dd>
<dt><strong>invert</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">Invert region. Mask outside circle.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="jscatter.sasimagelib.sasImage.maskbelowLine">
<code class="descname">maskbelowLine</code><span class="sig-paren">(</span><em>p1</em>, <em>p2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jscatter/sasimagelib.html#sasImage.maskbelowLine"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#jscatter.sasimagelib.sasImage.maskbelowLine" title="Permalink to this definition">¶</a></dt>
<dd><p>Mask points at one side of line.</p>
<p>The masked side is left looking from p1 to p2.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>p1, p2</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list of 2x float</span></dt>
<dd><p class="first last">Points in pixel coordinates defining line.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="jscatter.sasimagelib.sasImage.radialAverage">
<code class="descname">radialAverage</code><span class="sig-paren">(</span><em>beamcenter=None</em>, <em>number=500</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jscatter/sasimagelib.html#sasImage.radialAverage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#jscatter.sasimagelib.sasImage.radialAverage" title="Permalink to this definition">¶</a></dt>
<dd><p>Radial average of image and conversion to wavevector q.</p>
<p>Remember to set .detector_distance to calibrated value.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>beamcenter</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list 2x float</span></dt>
<dd><p class="first last">Sets beam center or radial center in data and uses this.
If not given the attribut beamcenter in the data is used.</p>
</dd>
<dt><strong>number</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int, default 500</span></dt>
<dd><p class="first last">Number of intervals on new X scale.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>dataArray</strong></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<ul class="simple">
<li>Correction of pixel size for flat detector projected to Ewald sphere included.</li>
<li>The value in a q binning is the average count rate <span class="math">c(q)=(\sum c_i)/N</span>
with counts in pixel <em>i</em> <span class="math">c_i</span> and number of pixels <span class="math">N</span></li>
<li>The error (standard deviation) is calculated in a q binning as
<span class="math">e=(\sum c_i)^{1/2}/N</span></li>
<li><dl class="first docutils">
<dt>The error is valid for single photon counting detectors showing Poisson statistics</dt>
<dd>as the today typical Pilatus detectors from DECTRIS.</dd>
</dl>
</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="jscatter.sasimagelib.sasImage.recalibrateDetDistance">
<code class="descname">recalibrateDetDistance</code><span class="sig-paren">(</span><em>beamcenter=None</em>, <em>number=500</em>, <em>showfits=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jscatter/sasimagelib.html#sasImage.recalibrateDetDistance"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#jscatter.sasimagelib.sasImage.recalibrateDetDistance" title="Permalink to this definition">¶</a></dt>
<dd><p>Recalibration of detectorDistance by AgBe reference for point collimation.</p>
<p>Use only for AgBe reference measurements to determine the correction factor.
For non AgBe measurements set during reading or .detector_distance to the new value.
May not work if the detector distance is totally wrong.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>beamcenter</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list 2x float</span></dt>
<dd><p class="first last">Sets beam center or radial center in data and uses this.
If not given the attribut beamcenter in the data is used.</p>
</dd>
<dt><strong>number</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int, default 1000</span></dt>
<dd><p class="first last">number of intervals on new X scale.</p>
</dd>
<dt><strong>showfits</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">Show the AgBe peak fits.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<ul class="simple">
<li>.distanceCorrection will contain factor for correction.
Repeating this results in a .distanceCorrection close to 1.</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="jscatter.sasimagelib.sasImage.reduceSize">
<code class="descname">reduceSize</code><span class="sig-paren">(</span><em>size=2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jscatter/sasimagelib.html#sasImage.reduceSize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#jscatter.sasimagelib.sasImage.reduceSize" title="Permalink to this definition">¶</a></dt>
<dd><p>Reduce size of image using uniform average in box.</p>
<p>XResolution,YResolution are scaled correspondingly.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>size</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Pixel size of the box to average.
Also factor for reduction.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>sasImage</strong></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="jscatter.sasimagelib.sasImage.save">
<code class="descname">save</code><span class="sig-paren">(</span><em>file</em>, <em>format=None</em>, <em>**params</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jscatter/sasimagelib.html#sasImage.save"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#jscatter.sasimagelib.sasImage.save" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves image under the given filename.</p>
<p>If no format is specified, the format to use is determined from the filename extension.
See PIL save for formats and options.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>file</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Filename to save to.</p>
</dd>
<dt><strong>format :</strong></dt>
<dd><p class="first last">Optional format override. If omitted, the format to use is determined from
the filename extension. If a file object was used instead of a filename,
this parameter should always be used.</p>
</dd>
<dt><strong>params</strong> <span class="classifier-delimiter">:</span> <span class="classifier">-</span></dt>
<dd><p class="first last">Additional parameters.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="jscatter.sasimagelib.sasImage.setBeamcenter">
<code class="descname">setBeamcenter</code><span class="sig-paren">(</span><em>beamcenter</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jscatter/sasimagelib.html#sasImage.setBeamcenter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#jscatter.sasimagelib.sasImage.setBeamcenter" title="Permalink to this definition">¶</a></dt>
<dd><p>Set beamcenter.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>beamcenter</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float, sasImage</span></dt>
<dd><p class="first last">New value for beamcenter.
If sasImage the beamcenter is copied.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="jscatter.sasimagelib.sasImage.setDetectorDistance">
<code class="descname">setDetectorDistance</code><span class="sig-paren">(</span><em>detector_distance</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jscatter/sasimagelib.html#sasImage.setDetectorDistance"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#jscatter.sasimagelib.sasImage.setDetectorDistance" title="Permalink to this definition">¶</a></dt>
<dd><p>Set detector distance.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>detector_distance</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float, sasImage</span></dt>
<dd><p class="first last">New value for detector distance.
If sasImage the detector_distance is copied.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="jscatter.sasimagelib.sasImage.show">
<code class="descname">show</code><span class="sig-paren">(</span><em>scale=None</em>, <em>levels=8</em>, <em>axis='pixel'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jscatter/sasimagelib.html#sasImage.show"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#jscatter.sasimagelib.sasImage.show" title="Permalink to this definition">¶</a></dt>
<dd><p>Show image.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>scale</strong> <span class="classifier-delimiter">:</span> <span class="classifier">‘norm’, default ‘log’,</span></dt>
<dd><p class="first last">If log the image is first log scaled</p>
</dd>
<dt><strong>levels</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int, None</span></dt>
<dd><p class="first last">Number of countour levels.</p>
</dd>
<dt><strong>axis</strong> <span class="classifier-delimiter">:</span> <span class="classifier">‘pixel’, None</span></dt>
<dd><p class="first last">Force pixel as coordinates, otherwise wavevectors if possible.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>image handle</strong></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="jscatter.sasimagelib.sasImage.showPolar">
<code class="descname">showPolar</code><span class="sig-paren">(</span><em>beamcenter=None</em>, <em>scaleR=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jscatter/sasimagelib.html#sasImage.showPolar"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#jscatter.sasimagelib.sasImage.showPolar" title="Permalink to this definition">¶</a></dt>
<dd><p>Show image transformed to polar coordinates around beamcenter.</p>
<p>Azimuth corresponds:
center line to beamcenter upwards, upper quarter beamcenter to right
upper/lower edge = beamcenter downwards, lower quarter beamcenter to left</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>beamcenter</strong> <span class="classifier-delimiter">:</span> <span class="classifier">[int,int]</span></dt>
<dd><p class="first last">Beamcenter</p>
</dd>
<dt><strong>scaleR</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Scaling factor for radial component to zoom the beamcenter.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>Handle to figure</strong></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="jscatter.sasimagelib.shortprint">
<code class="descclassname">jscatter.sasimagelib.</code><code class="descname">shortprint</code><span class="sig-paren">(</span><em>values</em>, <em>threshold=6</em>, <em>edgeitems=2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jscatter/sasimagelib.html#shortprint"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#jscatter.sasimagelib.shortprint" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a short handy representation string for array values.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>values</strong> <span class="classifier-delimiter">:</span> <span class="classifier">object</span></dt>
<dd><p class="first last">Values to print.</p>
</dd>
<dt><strong>threshold: int default 6</strong></dt>
<dd><p class="first last">Number of elements to switch to reduced form.</p>
</dd>
<dt><strong>edgeitems</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int default 2</span></dt>
<dd><p class="first last">Items at the edge.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="jscatter.sasimagelib.subarray">
<code class="descclassname">jscatter.sasimagelib.</code><code class="descname">subarray</code><a class="headerlink" href="#jscatter.sasimagelib.subarray" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#jscatter.sasimagelib.SubArray" title="jscatter.sasimagelib.SubArray"><code class="xref py py-class docutils literal notranslate"><span class="pre">jscatter.sasimagelib.SubArray</span></code></a></p>
</dd></dl>

<dl class="class">
<dt>
<em class="property">class </em><code class="descclassname">jscatter.sasimagelib.</code><code class="descname">sasImage</code><a class="reference internal" href="_modules/jscatter/sasimagelib.html#sasImage"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Creates sasImage as maskedArray from a detector image for evaluation.</p>
<dl class="docutils">
<dt>Reads a .tif file including the information in the EXIF tag.</dt>
<dd><ul class="first last simple">
<li>All methods of maskedArrays including masking of invalid areas work.</li>
<li>Masked areas are automatically masked for all math operations.</li>
<li>Arithmetic operations for sasImages work as for numpy arrays
e.g. to subtract background image or multiplying with transmission.</li>
</ul>
</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>file</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Filename to open.</p>
</dd>
<dt><strong>detector_distance</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float, sasImage</span></dt>
<dd><p class="first last">Detector distance from calibration measurement or calibrated image.
Overwrites value in the file EXIF tag.</p>
</dd>
<dt><strong>beamcenter</strong> <span class="classifier-delimiter">:</span> <span class="classifier">None, list 2xfloat, sasImage</span></dt>
<dd><p class="first last">Position of the beamcenter or copy from sasImage with beamcenter given.
Overwrites value given in the file EXIF tag.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>image</strong> <span class="classifier-delimiter">:</span> <span class="classifier">sasImage with attributes</span></dt>
<dd><ul class="first last simple">
<li>.beamcenter : beam center</li>
<li>.iX : X pixel position</li>
<li>.iY : Y pixel position</li>
<li>.filename</li>
<li>.artist : Additional attributes from EXIF Tag Artist</li>
<li>.imageDescription : Additional attributes from EXIF Tag ImageDescription</li>
</ul>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<ul class="simple">
<li>Unmasked data can be accessed as .data</li>
<li>The mask is .mask and initial set to all negative values.</li>
<li>Masking of a pixel is done as image[i,j]=np.ma.masked.
Use mask methods as implemented.</li>
<li>TIFF tags with index above 700 are ignored.</li>
<li>Tested for reading tiff image files from Pilatus detectors as given from our
metal jet SAXS machines Ganesha and Galaxi at JCNS, Jülich.</li>
<li>Additional SAXSpace TIFF files are supported which show frames per pixel on the Y axis.
This allows to examine the time evolution of the measurement on these line collimation cameras
(Kratky camera).
Instead of the old PIL the newer fork Pillow is needed for the multi page TIFFs.
Additional the pixel_size is set to 0.024 (µm) as for the JCNS CCD camera.</li>
<li><dl class="first docutils">
<dt>Beamcenter &amp; orientation:</dt>
<dd>The x,y orientation is not well defined and dependent on the implementation on the specific camera setup.
The default used here corresponds to our in house Ganesha which needs to revert the EXIF beamcenter.
We use the lower left image corner as zero with X as lower axis. Please check if your beamcenter
corresponds to this. If not just change it.</dd>
</dl>
</li>
</ul>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="id22" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[1]</td><td>Everything SAXS: small-angle scattering pattern collection and correction
Brian Richard Pauw J. Phys.: Condens. Matter 25,  383201 (2013)
DOI <a class="reference external" href="https://doi.org/10.1088/0953-8984/25/38/383201">https://doi.org/10.1088/0953-8984/25/38/383201</a></td></tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">jscatter</span> <span class="k">as</span> <span class="nn">js</span>
<span class="c1">#</span>
<span class="c1"># Look at calibration measurement</span>
<span class="n">calibration</span> <span class="o">=</span> <span class="n">js</span><span class="o">.</span><span class="n">sas</span><span class="o">.</span><span class="n">sasImage</span><span class="p">(</span><span class="n">js</span><span class="o">.</span><span class="n">examples</span><span class="o">.</span><span class="n">datapath</span><span class="o">+</span><span class="s1">&#39;/calibration.tiff&#39;</span><span class="p">)</span>
<span class="c1"># Check beamcenter</span>
<span class="c1"># For correct beamcenter it should show straight lines (change beamcenter to see change)</span>
<span class="n">calibration</span><span class="o">.</span><span class="n">showPolar</span><span class="p">(</span><span class="n">beamcenter</span><span class="o">=</span><span class="p">[</span><span class="mi">122</span><span class="p">,</span><span class="mi">254</span><span class="p">],</span><span class="n">scaleR</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="c1"># Recalibrate with previous found beamcenter (calibration sets it already)</span>
<span class="n">calibration</span><span class="o">.</span><span class="n">recalibrateDetDistance</span><span class="p">(</span><span class="n">showfits</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">iqcal</span><span class="o">=</span><span class="n">calibration</span><span class="o">.</span><span class="n">radialAverage</span><span class="p">()</span>
<span class="c1"># This might be used to calibrate detector distance for following measurements as</span>
<span class="c1"># empty.setDetectorDistance(calibration)</span>
<span class="c1">#</span>
<span class="n">empty</span> <span class="o">=</span> <span class="n">js</span><span class="o">.</span><span class="n">sas</span><span class="o">.</span><span class="n">sasImage</span><span class="p">(</span><span class="n">js</span><span class="o">.</span><span class="n">examples</span><span class="o">.</span><span class="n">datapath</span><span class="o">+</span><span class="s1">&#39;/emptycell.tiff&#39;</span><span class="p">)</span>
<span class="c1"># Mask beamstop (not the same as calibration, unluckily)</span>
<span class="n">empty</span><span class="o">.</span><span class="n">mask4Polygon</span><span class="p">([</span><span class="mi">92</span><span class="p">,</span><span class="mi">185</span><span class="p">],[</span><span class="mi">92</span><span class="p">,</span><span class="mi">190</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mi">233</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mi">228</span><span class="p">])</span>
<span class="n">empty</span><span class="o">.</span><span class="n">maskCircle</span><span class="p">(</span><span class="n">empty</span><span class="o">.</span><span class="n">beamcenter</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span>
<span class="n">empty</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="n">buffer</span> <span class="o">=</span> <span class="n">js</span><span class="o">.</span><span class="n">sas</span><span class="o">.</span><span class="n">sasImage</span><span class="p">(</span><span class="n">js</span><span class="o">.</span><span class="n">examples</span><span class="o">.</span><span class="n">datapath</span><span class="o">+</span><span class="s1">&#39;/buffer.tiff&#39;</span><span class="p">)</span>
<span class="n">buffer</span><span class="o">.</span><span class="n">maskFromImage</span><span class="p">(</span><span class="n">empty</span><span class="p">)</span>
<span class="n">buffer</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="n">bsa</span> <span class="o">=</span> <span class="n">js</span><span class="o">.</span><span class="n">sas</span><span class="o">.</span><span class="n">sasImage</span><span class="p">(</span><span class="n">js</span><span class="o">.</span><span class="n">examples</span><span class="o">.</span><span class="n">datapath</span><span class="o">+</span><span class="s1">&#39;/BSA11mg.tiff&#39;</span><span class="p">)</span>
<span class="n">bsa</span><span class="o">.</span><span class="n">maskFromImage</span><span class="p">(</span><span class="n">empty</span><span class="p">)</span>
<span class="n">bsa</span><span class="o">.</span><span class="n">show</span><span class="p">()</span> <span class="c1"># by default a log scaled image</span>
<span class="c1">#</span>
<span class="c1"># subtract buffer (transmission factor is just a guess here, sorry)</span>
<span class="n">new</span><span class="o">=</span><span class="n">bsa</span><span class="o">-</span><span class="n">buffer</span><span class="o">*</span><span class="mf">0.2</span>
<span class="n">new</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="c1">#</span>
<span class="n">iqempty</span><span class="o">=</span><span class="n">empty</span><span class="o">.</span><span class="n">radialAverage</span><span class="p">()</span>
<span class="n">iqbuffer</span><span class="o">=</span><span class="n">buffer</span><span class="o">.</span><span class="n">radialAverage</span><span class="p">()</span>
<span class="n">iqbsa</span><span class="o">=</span><span class="n">bsa</span><span class="o">.</span><span class="n">radialAverage</span><span class="p">()</span>
<span class="c1">#</span>
<span class="n">p</span><span class="o">=</span><span class="n">js</span><span class="o">.</span><span class="n">grace</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">iqempty</span><span class="p">,</span><span class="n">le</span><span class="o">=</span><span class="s1">&#39;empty cell&#39;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">iqbuffer</span><span class="p">,</span><span class="n">le</span><span class="o">=</span><span class="s1">&#39;buffer&#39;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">iqbsa</span><span class="p">,</span><span class="n">le</span><span class="o">=</span><span class="s1">&#39;bsa 11 mg/ml&#39;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;raw data, no transmission correction&#39;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">yaxis</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="nb">max</span><span class="o">=</span><span class="mf">1e3</span><span class="p">,</span><span class="n">scale</span><span class="o">=</span><span class="s1">&#39;l&#39;</span><span class="p">,</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;I(q) / a.u.&#39;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">xaxis</span><span class="p">(</span><span class="n">scale</span><span class="o">=</span><span class="s1">&#39;l&#39;</span><span class="p">,</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;q / nm\S-1&#39;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
</pre></div>
</div>
<dl class="attribute">
<dt>
<code class="descname">array</code></dt>
<dd><p>Strip of all attributes and return a simple array without mask.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">findCenterOfIntensity</code><span class="sig-paren">(</span><em>beamcenter=None</em>, <em>size=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jscatter/sasimagelib.html#sasImage.findCenterOfIntensity"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Find beam center as center of intensity around beamcenter.</p>
<p>Only values above the mean value are used to calc center of intensity.
Use an image with a clear symmetric and  strong scattering sample as AgBe.
Use <em>.showPolar([600,699],scaleR=5)</em> to see if peak is symmetric.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>beamcenter</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list 2x int</span></dt>
<dd><p class="first last">First estimate of beamcenter.
If not given preliminary beamcenter is estimated as center of intensity of full image.</p>
</dd>
<dt><strong>size</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Defines size of rectangular region of interest (ROI) around the beamcenter to look at.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>Adds (replaces) .beamcenter as attribute.</strong></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>If ROI is to large the result may be biased due to asymmetry of
the intensity distribution inside of ROI.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">gaussianFilter</code><span class="sig-paren">(</span><em>sigma=2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jscatter/sasimagelib.html#sasImage.gaussianFilter"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Gaussian filter in place.</p>
<p>Uses ndimage.filters.gaussian_filter with default parameters except sigma.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>sigma</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Gaussian kernel sigma.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">getPixelQ</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/jscatter/sasimagelib.html#sasImage.getPixelQ"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Get scattering vector along pixel dimension around beamcenter.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>qx,qy with image x and y dimension</strong></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">getfromcomment</code><span class="sig-paren">(</span><em>name</em>, <em>replace=None</em>, <em>newname=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jscatter/sasimagelib.html#sasImage.getfromcomment"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Extract name from .artist or .imageDescription with attribute name in front.</p>
<p>If multiple names start with parname first one is used.
Used line is deleted from .artist or .imageDescription.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>name</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Name of the parameter in first place.</p>
</dd>
<dt><strong>replace</strong> <span class="classifier-delimiter">:</span> <span class="classifier">dict</span></dt>
<dd><p class="first last">Dictionary with pairs to replace in all lines.</p>
</dd>
<dt><strong>newname</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">New attribute name</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt>
<code class="descname">iX</code></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="descname">iY</code></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">lineAverage</code><span class="sig-paren">(</span><em>beamcenter=None</em>, <em>number=None</em>, <em>minmax='auto'</em>, <em>show=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jscatter/sasimagelib.html#sasImage.lineAverage"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Line average of image and conversion to wavevector q for line collimation cameras.</p>
<p>Remember to set .detector_distance to calibrated value.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>beamcenter</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Sets beam center in data and uses this.
If not given the beam center is determined from semitransparent beam.</p>
</dd>
<dt><strong>number</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int, default None</span></dt>
<dd><p class="first last">Number of intervals on new X scale. None means all pixels.</p>
</dd>
<dt><strong>minmax</strong> <span class="classifier-delimiter">:</span> <span class="classifier">[int,int], ‘auto’</span></dt>
<dd><p class="first last">Interval for determination of beamcenter.</p>
</dd>
<dt><strong>show</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">Show the fit of the primary beam.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>dataArray</strong></dt>
<dd><ul class="first last simple">
<li>.filename</li>
<li>.detector_distance</li>
<li>.description</li>
<li>.beamcenter</li>
</ul>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<ul class="simple">
<li>Detector distance in attributes is used.</li>
<li>The primary beam is automatically detected.</li>
<li>Correction for flat detector projected to Ewald sphere included.</li>
</ul>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">mask4Polygon</code><span class="sig-paren">(</span><em>p1</em>, <em>p2</em>, <em>p3</em>, <em>p4</em>, <em>invert=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jscatter/sasimagelib.html#sasImage.mask4Polygon"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Mask inside polygon of 4 points.</p>
<p>Points need to be given in right hand order.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>p1,p2,p3,p4</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list of 2x float</span></dt>
<dd><p class="first last">Edge points.</p>
</dd>
<dt><strong>invert</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">Invert region. Mask outside circle.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">maskCircle</code><span class="sig-paren">(</span><em>center</em>, <em>radius</em>, <em>invert=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jscatter/sasimagelib.html#sasImage.maskCircle"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Mask points inside circle.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>center</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list of 2x float</span></dt>
<dd><p class="first last">Center point.</p>
</dd>
<dt><strong>radius</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Radius in pixel units</p>
</dd>
<dt><strong>invert</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">Invert region. Mask outside circle.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">maskFromImage</code><span class="sig-paren">(</span><em>image</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jscatter/sasimagelib.html#sasImage.maskFromImage"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Use/copy mask from image.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>image</strong> <span class="classifier-delimiter">:</span> <span class="classifier">sasImage</span></dt>
<dd><p class="first last">sasImage to use mask for resetting mask.
image needs to have same dimension.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">maskRegion</code><span class="sig-paren">(</span><em>xmin</em>, <em>xmax</em>, <em>ymin</em>, <em>ymax</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jscatter/sasimagelib.html#sasImage.maskRegion"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Mask rectangular region.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>xmin,xmax,ymin,ymax</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Corners of the region to mask</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">maskRegions</code><span class="sig-paren">(</span><em>regions</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jscatter/sasimagelib.html#sasImage.maskRegions"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Mask several regions.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>regions</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd><p class="first last">List of regions as in maskRegion.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">maskTriangle</code><span class="sig-paren">(</span><em>p1</em>, <em>p2</em>, <em>p3</em>, <em>invert=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jscatter/sasimagelib.html#sasImage.maskTriangle"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Mask inside triangle.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>p1,p2,p3</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list of 2x float</span></dt>
<dd><p class="first last">Edge points of triangle.</p>
</dd>
<dt><strong>invert</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">Invert region. Mask outside circle.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">maskbelowLine</code><span class="sig-paren">(</span><em>p1</em>, <em>p2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jscatter/sasimagelib.html#sasImage.maskbelowLine"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Mask points at one side of line.</p>
<p>The masked side is left looking from p1 to p2.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>p1, p2</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list of 2x float</span></dt>
<dd><p class="first last">Points in pixel coordinates defining line.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">radialAverage</code><span class="sig-paren">(</span><em>beamcenter=None</em>, <em>number=500</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jscatter/sasimagelib.html#sasImage.radialAverage"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Radial average of image and conversion to wavevector q.</p>
<p>Remember to set .detector_distance to calibrated value.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>beamcenter</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list 2x float</span></dt>
<dd><p class="first last">Sets beam center or radial center in data and uses this.
If not given the attribut beamcenter in the data is used.</p>
</dd>
<dt><strong>number</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int, default 500</span></dt>
<dd><p class="first last">Number of intervals on new X scale.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>dataArray</strong></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<ul class="simple">
<li>Correction of pixel size for flat detector projected to Ewald sphere included.</li>
<li>The value in a q binning is the average count rate <span class="math">c(q)=(\sum c_i)/N</span>
with counts in pixel <em>i</em> <span class="math">c_i</span> and number of pixels <span class="math">N</span></li>
<li>The error (standard deviation) is calculated in a q binning as
<span class="math">e=(\sum c_i)^{1/2}/N</span></li>
<li><dl class="first docutils">
<dt>The error is valid for single photon counting detectors showing Poisson statistics</dt>
<dd>as the today typical Pilatus detectors from DECTRIS.</dd>
</dl>
</li>
</ul>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">recalibrateDetDistance</code><span class="sig-paren">(</span><em>beamcenter=None</em>, <em>number=500</em>, <em>showfits=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jscatter/sasimagelib.html#sasImage.recalibrateDetDistance"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Recalibration of detectorDistance by AgBe reference for point collimation.</p>
<p>Use only for AgBe reference measurements to determine the correction factor.
For non AgBe measurements set during reading or .detector_distance to the new value.
May not work if the detector distance is totally wrong.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>beamcenter</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list 2x float</span></dt>
<dd><p class="first last">Sets beam center or radial center in data and uses this.
If not given the attribut beamcenter in the data is used.</p>
</dd>
<dt><strong>number</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int, default 1000</span></dt>
<dd><p class="first last">number of intervals on new X scale.</p>
</dd>
<dt><strong>showfits</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">Show the AgBe peak fits.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<ul class="simple">
<li>.distanceCorrection will contain factor for correction.
Repeating this results in a .distanceCorrection close to 1.</li>
</ul>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">reduceSize</code><span class="sig-paren">(</span><em>size=2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jscatter/sasimagelib.html#sasImage.reduceSize"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Reduce size of image using uniform average in box.</p>
<p>XResolution,YResolution are scaled correspondingly.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>size</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Pixel size of the box to average.
Also factor for reduction.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>sasImage</strong></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">save</code><span class="sig-paren">(</span><em>file</em>, <em>format=None</em>, <em>**params</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jscatter/sasimagelib.html#sasImage.save"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Saves image under the given filename.</p>
<p>If no format is specified, the format to use is determined from the filename extension.
See PIL save for formats and options.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>file</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Filename to save to.</p>
</dd>
<dt><strong>format :</strong></dt>
<dd><p class="first last">Optional format override. If omitted, the format to use is determined from
the filename extension. If a file object was used instead of a filename,
this parameter should always be used.</p>
</dd>
<dt><strong>params</strong> <span class="classifier-delimiter">:</span> <span class="classifier">-</span></dt>
<dd><p class="first last">Additional parameters.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">setBeamcenter</code><span class="sig-paren">(</span><em>beamcenter</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jscatter/sasimagelib.html#sasImage.setBeamcenter"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Set beamcenter.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>beamcenter</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float, sasImage</span></dt>
<dd><p class="first last">New value for beamcenter.
If sasImage the beamcenter is copied.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">setDetectorDistance</code><span class="sig-paren">(</span><em>detector_distance</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jscatter/sasimagelib.html#sasImage.setDetectorDistance"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Set detector distance.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>detector_distance</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float, sasImage</span></dt>
<dd><p class="first last">New value for detector distance.
If sasImage the detector_distance is copied.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">show</code><span class="sig-paren">(</span><em>scale=None</em>, <em>levels=8</em>, <em>axis='pixel'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jscatter/sasimagelib.html#sasImage.show"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Show image.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>scale</strong> <span class="classifier-delimiter">:</span> <span class="classifier">‘norm’, default ‘log’,</span></dt>
<dd><p class="first last">If log the image is first log scaled</p>
</dd>
<dt><strong>levels</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int, None</span></dt>
<dd><p class="first last">Number of countour levels.</p>
</dd>
<dt><strong>axis</strong> <span class="classifier-delimiter">:</span> <span class="classifier">‘pixel’, None</span></dt>
<dd><p class="first last">Force pixel as coordinates, otherwise wavevectors if possible.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>image handle</strong></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">showPolar</code><span class="sig-paren">(</span><em>beamcenter=None</em>, <em>scaleR=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jscatter/sasimagelib.html#sasImage.showPolar"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Show image transformed to polar coordinates around beamcenter.</p>
<p>Azimuth corresponds:
center line to beamcenter upwards, upper quarter beamcenter to right
upper/lower edge = beamcenter downwards, lower quarter beamcenter to left</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>beamcenter</strong> <span class="classifier-delimiter">:</span> <span class="classifier">[int,int]</span></dt>
<dd><p class="first last">Beamcenter</p>
</dd>
<dt><strong>scaleR</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Scaling factor for radial component to zoom the beamcenter.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>Handle to figure</strong></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/Jscatter1.gif" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="BeginnersGuide.html">1. Beginners Guide / Help</a></li>
<li class="toctree-l1"><a class="reference internal" href="dataArray.html">2. dataArray</a></li>
<li class="toctree-l1"><a class="reference internal" href="dataList.html">3. dataList</a></li>
<li class="toctree-l1"><a class="reference internal" href="formel.html">4. formel</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">5. smallanglescattering (sas)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#smear-desmear-1d">5.1. Smear/desmear 1D</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-jscatter.sasimagelib">5.2. 2D sasImage</a></li>
<li class="toctree-l2"><a class="reference internal" href="#d-sasimage-convenience">5.3. 2D sasImage convenience</a></li>
<li class="toctree-l2"><a class="reference internal" href="#housekeeping">5.4. Housekeeping</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="formfactor.html">6. formfactor (ff)</a></li>
<li class="toctree-l1"><a class="reference internal" href="structurefactor.html">7. structurefactor (sf)</a></li>
<li class="toctree-l1"><a class="reference internal" href="dynamic.html">8. dynamic</a></li>
<li class="toctree-l1"><a class="reference internal" href="dls.html">9. dls</a></li>
<li class="toctree-l1"><a class="reference internal" href="parallel.html">10. parallel</a></li>
<li class="toctree-l1"><a class="reference internal" href="GracePlot.html">11. Plotting in XmGrace</a></li>
<li class="toctree-l1"><a class="reference internal" href="mpl.html">12. mpl</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">13. Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="Extending.html">14. Extending/Contributing/Fortran</a></li>
<li class="toctree-l1"><a class="reference internal" href="tips.html">15. Tips</a></li>
<li class="toctree-l1"><a class="reference internal" href="Remarks.html">16. Intention and Remarks</a></li>
<li class="toctree-l1"><a class="reference internal" href="Installation.html">17. Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="citing.html">18. Citing Jscatter</a></li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="formel.html"
                        title="previous chapter">4. formel</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="formfactor.html"
                        title="next chapter">6. formfactor (ff)</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/sas.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="formfactor.html" title="6. formfactor (ff)"
             >next</a> |</li>
        <li class="right" >
          <a href="formel.html" title="4. formel"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">jscatter 0.8.2 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2014-18, Ralf Biehl.
      Last updated on Nov 22, 2018.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.2.
    </div>
  </body>
</html>